<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.41">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Martin Schweinberger">

<title>Concordancing with R – Language Technology and Data Analysis Laboratory (LADAL)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-48ffa3e5b9d089919c6712c39e5b00f2.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-d4be639c637f3db3c684c66cefad7e0c.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-VSGK4KYDQZ"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-VSGK4KYDQZ', { 'anonymize_ip': true});
</script>
<style>html{ scroll-behavior: smooth; }</style>
<script>

    // Wait for the document to be fully loaded

    document.addEventListener("DOMContentLoaded", function () {

        // Create a new div element to hold the dynamic content

        var newContainer = document.createElement("div");

        newContainer.classList.add("custom-banner");  // You can assign a class to the new container for styling



        // You can also add content inside the new container

        newContainer.innerHTML = `

          <div class="banner">

              <img src="/images/ladal_icon_white.png" alt="Icon" class="banner-icon">

              <span class="banner-text">Language Technology and Data Analysis Laboratory</span>

          </div>

      `



        // Select the header element

        var header = document.getElementById("quarto-header");



        // Select the nav element inside the header to place the new container just above it

        var navbar = header.querySelector("nav");



        // Insert the new container before the navbar element

        header.insertBefore(newContainer, navbar);

    });

</script>
<script src="../../site_libs/clipboard-1.7.1/clipboard.min.js"></script>

<link href="../../site_libs/primer-tooltips-1.4.0/build.css" rel="stylesheet">

<link href="../../site_libs/klippy-0.0.0.9500/css/klippy.min.css" rel="stylesheet">

<script src="../../site_libs/klippy-0.0.0.9500/js/klippy.min.js"></script>

<link href="../../site_libs/tabwid-1.1.3/tabwid.css" rel="stylesheet">

<script src="../../site_libs/tabwid-1.1.3/tabwid.js"></script>



<link rel="stylesheet" href="../../css/styles.css">
</head>

<body class="floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Language Technology and Data Analysis Laboratory (LADAL)</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">HOME</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">ABOUT</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../events.html"> 
<span class="menu-text">EVENTS</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../tutorials.html"> 
<span class="menu-text">TUTORIALS</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../tools.html"> 
<span class="menu-text">TOOLS</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../resources.html"> 
<span class="menu-text">RESOURCES</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../contact.html"> 
<span class="menu-text">CONTACT</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul class="collapse">
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a>
  <ul class="collapse">
  <li><a href="#loading-and-processing-text" id="toc-loading-and-processing-text" class="nav-link" data-scroll-target="#loading-and-processing-text">Loading and Processing Text</a></li>
  <li><a href="#generating-basic-kwics" id="toc-generating-basic-kwics" class="nav-link" data-scroll-target="#generating-basic-kwics">Generating Basic KWICs</a></li>
  <li><a href="#exporting-kwics" id="toc-exporting-kwics" class="nav-link" data-scroll-target="#exporting-kwics">Exporting KWICs</a></li>
  <li><a href="#extracting-multi-word-expressions" id="toc-extracting-multi-word-expressions" class="nav-link" data-scroll-target="#extracting-multi-word-expressions">Extracting Multi-Word Expressions</a></li>
  <li><a href="#concordancing-using-regular-expressions" id="toc-concordancing-using-regular-expressions" class="nav-link" data-scroll-target="#concordancing-using-regular-expressions">Concordancing Using Regular Expressions</a></li>
  <li><a href="#concordancing-and-piping" id="toc-concordancing-and-piping" class="nav-link" data-scroll-target="#concordancing-and-piping">Concordancing and Piping</a></li>
  <li><a href="#ordering-and-arranging-kwics" id="toc-ordering-and-arranging-kwics" class="nav-link" data-scroll-target="#ordering-and-arranging-kwics">Ordering and Arranging KWICs</a></li>
  <li><a href="#ordering-by-multiple-co-occurrence-frequencies" id="toc-ordering-by-multiple-co-occurrence-frequencies" class="nav-link" data-scroll-target="#ordering-by-multiple-co-occurrence-frequencies">Ordering by Multiple Co-Occurrence Frequencies</a></li>
  <li><a href="#concordances-from-transcriptions" id="toc-concordances-from-transcriptions" class="nav-link" data-scroll-target="#concordances-from-transcriptions">Concordances from Transcriptions</a></li>
  <li><a href="#custom-concordances" id="toc-custom-concordances" class="nav-link" data-scroll-target="#custom-concordances">Custom Concordances</a></li>
  </ul></li>
  <li><a href="#citation-session-info" id="toc-citation-session-info" class="nav-link" data-scroll-target="#citation-session-info">Citation &amp; Session Info</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Concordancing with R</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Martin Schweinberger </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<p><img src="../..\images/uq1.jpg" class="img-fluid" style="width:100.0%"></p>
<section id="introduction" class="level1 unnumbered">
<h1 class="unnumbered">Introduction</h1>
<p>This tutorial introduces how to extract concordances and keyword-in-context (KWIC) displays with R using the <code>quanteda</code> package <span class="citation" data-cites="quanteda2018package">(<a href="#ref-quanteda2018package" role="doc-biblioref">Benoit et al. 2018</a>)</span>.</p>
<div class="warning" style="padding:0.5em; background-color:rgba(215,209,204,.3); color:#51247a">
<span>
<p style="margin-top:1em; text-align:center">
Please cite as: <br>Schweinberger, Martin. 2024. <em>Concordancing with R</em>. Brisbane: The Language Technology and Data Analysis Laboratory (LADAL). url: tutorials/kwics.html (Version 2024.05.07).<br>
</p>
<p></p>
</span></div>
<p><img src="../..\images/gy_chili.png" class="img-fluid" style="float:right; padding:10px;width:15.0%"></p>
<p>This tutorial is aimed at beginners and intermediate users of R with the aim of showcasing how to extract words and phrases from textual data and how to process the resulting concordances using R. The aim is not to provide a fully-fledged analysis but rather to show and exemplify selected useful methods associated with concordancing.</p>
<div class="warning" style="padding:0.1em; background-color:rgba(215,209,204,.3); color:#51247a">
<span>
<p style="margin-top:1em; text-align:center">
To be able to follow this tutorial, we suggest you check out and familiarize yourself with the content of the following <strong>R Basics</strong> tutorials:<br>
</p>
<p style="margin-top:1em; text-align:left">
</p><ul>
<li>
<a href="tutorials/intror.html">Getting started with R</a>
</li>
<li>
<a href="tutorials/load.html">Loading, saving, and generating data in R</a>
</li>
<li>
<a href="tutorials/string.html">String Processing in R</a>
</li>
<li>
<a href="tutorials/regex.html">Regular Expressions in R</a>
</li>
</ul>
<p></p>
<p style="margin-top:1em; text-align:center">
Click <a href="tutorials/kwics/kwics.qmd">here</a><a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> to download the <strong>entire R Notebook</strong> for this tutorial.
</p>
<div class="text-center">
<p><a href="https://binderhub.atap-binder.cloud.edu.au/v2/gh/SLCLADAL/interactive-notebooks-environment/main?urlpath=git-pull%3Frepo=https://github.com/SLCLADAL/interactive-notebooks%26urlpath=lab/tree/interactive-notebooks/notebooks/kwics_cb.ipynb%26branch=main"><img src="https://mybinder.org/badge_logo.svg" class="img-fluid"></a></p>
<p>Click <a href="https://binderhub.atap-binder.cloud.edu.au/v2/gh/SLCLADAL/interactive-notebooks-environment/main?urlpath=git-pull%3Frepo=https://github.com/SLCLADAL/interactive-notebooks%26urlpath=lab/tree/interactive-notebooks/notebooks/kwics_cb.ipynb%26branch=main"><strong>here</strong></a> to open a Jupyter notebook that allows you to follow this tutorial interactively. This means that you can execute, change, and edit the code used in this tutorial to help you better understand how the code shown here works (make sure you run all code chunks in the order in which they appear to avoid running into errors).</p>
</div>
<p style="margin-left:1em;">
</p>
<p></p>
</span></div>
<p><br></p>
<div class="warning" style="padding:0.5em; background-color:rgba(215,209,204,.3); color:#51247a">
<span>
<p style="margin-top:1em; text-align:center">
<strong>CONCORDANCING TOOL</strong>
</p>
<p style="margin-top:1em; text-align:center">
</p>
<div class="text-center">
<p><a href="https://binderhub.atap-binder.cloud.edu.au/v2/gh/SLCLADAL/interactive-notebooks-environment/main?urlpath=git-pull%3Frepo=https://github.com/SLCLADAL/interactive-notebooks%26urlpath=lab/tree/interactive-notebooks/notebooks/kwictool.ipynb%26branch=main"><img src="https://mybinder.org/badge_logo.svg" class="img-fluid"></a></p>
<p>Click <a href="https://binderhub.atap-binder.cloud.edu.au/v2/gh/SLCLADAL/interactive-notebooks-environment/main?urlpath=git-pull%3Frepo=https://github.com/SLCLADAL/interactive-notebooks%26urlpath=lab/tree/interactive-notebooks/notebooks/kwictool.ipynb%26branch=main"><strong>here</strong></a> to open an notebook-based tool <br>that allows you to upload your own text(s), perform concordancing on them, and download the resulting kwic(s).</p>
</div>
<p style="margin-left:1em;">
</p>
<p></p>
</span></div>
<p><br></p>
<p>Concordancing is a fundamental tool in language sciences, involving the extraction of words from a given text or texts <span class="citation" data-cites="lindquist2009corpus">(<a href="#ref-lindquist2009corpus" role="doc-biblioref">Lindquist, 5</a>)</span>. Typically, these extractions are displayed through keyword-in-context displays (KWICs), where the search term, also referred to as the <em>node word</em>, is showcased within its surrounding context, comprising both preceding and following words. Concordancing serves as a cornerstone for textual analyses, often serving as the initial step towards more intricate examinations of language data <span class="citation" data-cites="stafanowitsch2020corpus">(<a href="#ref-stafanowitsch2020corpus" role="doc-biblioref">Stefanowitsch</a>)</span>. Their significance lies in their capacity to provide insights into how words or phrases are utilized, their frequency of occurrence, and the contexts in which they appear. By facilitating the examination of a word or phrase’s contextual usage and offering frequency data, concordances empower researchers to delve into collocations or the collocational profiles of words and phrases <span class="citation" data-cites="stafanowitsch2020corpus">(<a href="#ref-stafanowitsch2020corpus" role="doc-biblioref">Stefanowitsch, 50–51</a>)</span>.</p>
<p>Examples of Concordancing Applications:</p>
<ol type="1">
<li><p><strong>Linguistic Research</strong>: Linguists often use concordances to explore the usage patterns of specific words or phrases in different contexts. For instance, researchers might use concordancing to analyze the various meanings and connotations of a polysemous word across different genres of literature.</p></li>
<li><p><strong>Language Teaching</strong>: Concordancing can be a valuable tool in language teaching. Educators can create concordances to illustrate how vocabulary words are used in authentic contexts, helping students grasp their usage nuances and collocational patterns.</p></li>
<li><p><strong>Stylistic Analysis</strong>: Literary scholars use concordances to conduct stylistic analyses of texts. By examining how certain words or phrases are employed within a literary work, researchers can gain insights into the author’s writing style, thematic concerns, and narrative techniques.</p></li>
<li><p><strong>Translation Studies</strong>: Concordancing is also applied in translation studies to analyze the usage of specific terms or expressions in source and target languages. Translators use concordances to identify appropriate equivalents and ensure accurate translation of idiomatic expressions and collocations.</p></li>
<li><p><strong>Lexicography</strong>: Lexicographers employ concordances to compile and refine dictionaries. By examining the contexts in which words appear, lexicographers can identify common collocations and usage patterns, informing the creation of more comprehensive and accurate lexical entries.</p></li>
</ol>
<p>These examples underscore the usefulness of concordancing across various disciplines within the language sciences, showcasing its role in facilitating nuanced analyses and insights into language usage.</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center" style="float:left; padding:2px">
<figure class="figure">
<p><img src="images/AntConcConcordance.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption> Concordances in AntConc.</figcaption>
</figure>
</div>
</div>
</div>
<p><br></p>
<p>There are various very good software packages that can be used to create concordances - both for offline use. There are, for example</p>
<ul>
<li><a href="https://www.laurenceanthony.net/software/antconc/"><em>AntConc</em></a> <span class="citation" data-cites="anthony2004antconc">(<a href="#ref-anthony2004antconc" role="doc-biblioref">Anthony</a>)</span></li>
<li><a href="https://www.sketchengine.eu/"><em>SketchEngine</em></a> <span class="citation" data-cites="kilgarriff2004itri">(<a href="#ref-kilgarriff2004itri" role="doc-biblioref">Kilgarriff et al.</a>)</span></li>
<li><a href="https://www.monoconc.com/"><em>MONOCONC</em></a> <span class="citation" data-cites="barlow1999monoconc">(<a href="#ref-barlow1999monoconc" role="doc-biblioref">Barlow</a>)</span></li>
<li><a href="https://paraconc.com/"><em>ParaConc</em></a>) <span class="citation" data-cites="barlow2002paraconc">(<a href="#ref-barlow2002paraconc" role="doc-biblioref">Barlow</a>)</span></li>
<li><a href="https://lextutor.ca/conc/"><em>Web Concordancers</em></a></li>
<li><a href="https://corpusmate.com/"><em>CorpusMate</em></a> <span class="citation" data-cites="corpusmate">(<a href="#ref-corpusmate" role="doc-biblioref">Crosthwaite and Baisa 2024</a>)</span></li>
</ul>
<p>In addition, many corpora that are available such as the <a href="https://corpus.byu.edu/overview.asp">BYU corpora</a> can be accessed via a web interface that have in-built concordancing functions.</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center" style="float:right; padding:2px">
<figure class="figure">
<p><img src="images/KwicCocaLanguage.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption> Online concordances extracted from the COCA corpus that is part of the BYU corpora.</figcaption>
</figure>
</div>
</div>
</div>
<p>While many concordance software packages boast user-friendly interfaces and additional functionalities, their inherent limitations make R a compelling alternative. These shortcomings include:</p>
<ul>
<li><p><strong>Lack of Transparency</strong>: Traditional concordance software often operates as black boxes, leaving researchers without full control or insight into the inner workings of the software. This opacity can compromise the reproducibility and transparency of analyses, as researchers are unable to fully understand or document the analytical process.</p></li>
<li><p><strong>Closed Source</strong>: The proprietary nature of many concordance software packages restricts access to their source code, hindering collaborative development and innovation within the research community. In contrast, R’s open-source framework encourages transparency, collaboration, and customization, empowering researchers to tailor analyses to their specific needs.</p></li>
<li><p><strong>Replication Challenges</strong>: Replicating analyses conducted using traditional concordance software can be time-consuming and labor-intensive, particularly when compared to analyses documented in Notebooks. R’s integrated scripting environment facilitates reproducibility by allowing researchers to document their entire workflow in a clear, executable format, streamlining the replication process and enhancing research transparency.</p></li>
<li><p><strong>Cost and Restrictions</strong>: Many concordance software packages are not free-of-charge or impose usage restrictions, limiting accessibility for researchers with budget constraints or specific licensing requirements. While exceptions like <em>AntConc</em> exist, the prevalence of cost barriers or usage restrictions underscores the importance of open-source alternatives like R, which offer greater accessibility and flexibility for researchers across diverse settings.</p></li>
</ul>
<p>By addressing these key limitations, R emerges as a robust and versatile platform for concordancing, offering researchers greater transparency, flexibility, and accessibility. As such, R offers a compelling alternative to off-the-shelf concordancing applications for several reasons:</p>
<ul>
<li><p><strong>Flexibility</strong>: R provides unparalleled flexibility, allowing researchers to conduct their entire analysis within a single environment. This versatility enables users to tailor their analysis precisely to their research needs, incorporating custom functions and scripts as required.</p></li>
<li><p><strong>Transparency and Documentation</strong>: One of R’s strengths lies in its capacity for full transparency and documentation. Analyses can be documented and presented in R Notebooks, providing a comprehensive record of the analytical process. This transparency ensures that every step of the analysis is clearly documented, enhancing the reproducibility of research findings.</p></li>
<li><p><strong>Version Control</strong>: R offers robust version control measures, enabling researchers to track and trace specific versions of software and packages used in their analysis. This ensures that analyses are conducted using consistent software environments, minimizing the risk of discrepancies or errors due to software updates or changes.</p></li>
<li><p><strong>Replicability</strong>: Replicability is paramount in scientific research, particularly in light of the ongoing Replication Crisis <span class="citation" data-cites="atlantic2018psychology fivethirtyeight2018replication noba2019replication physorg2018replication sciencealert2018replication">(<a href="#ref-atlantic2018psychology" role="doc-biblioref">Yong</a>; <a href="#ref-fivethirtyeight2018replication" role="doc-biblioref">Aschwanden</a>; <a href="#ref-noba2019replication" role="doc-biblioref">Diener and Biswas-Diener</a>; <a href="#ref-physorg2018replication" role="doc-biblioref">Velasco</a>; <a href="#ref-sciencealert2018replication" role="doc-biblioref">McRae</a>)</span>. By conducting analyses within R and documenting the entire workflow in scripts or Notebooks, researchers facilitate easy replication of their analyses by others. This not only enhances the credibility and robustness of research findings but also fosters greater collaboration and transparency within the scientific community.</p></li>
</ul>
<p>The Replication Crisis, which has affected various fields since the early 2010s <span class="citation" data-cites="fanelli2009fraud">(<a href="#ref-fanelli2009fraud" role="doc-biblioref">Fanelli</a>)</span>, underscores the importance of transparent and replicable research practices. R’s capability to document workflows comprehensively in scripts or Notebooks addresses this challenge directly. Researchers can readily share their scripts or Notebooks with others, enabling full transparency and facilitating replication of analyses. This emphasis on transparency and replicability aligns closely with best practices in scientific research, ensuring that findings can be scrutinized, validated, and built upon by the broader research community.</p>
<p><strong>Preparation and session set up</strong></p>
<p>This tutorial is conducted within the R environment. If you’re new to R or haven’t installed it yet, you can find an introduction to R and further instructions on how to use it <a href="tutorials/intror/intror.html">here</a>. To ensure smooth execution of the scripts provided in this tutorial, it’s necessary to install specific packages from the R library. Before proceeding to the code examples, please ensure you’ve installed these packages by running the code provided below. If you’ve already installed the required packages, feel free to skip ahead and disregard this section. To install the necessary packages, simply execute the following code. Please note that installation may take some time (usually between 1 and 5 minutes), so there’s no need to be concerned if it takes a while.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install packages</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"quanteda"</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"dplyr"</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"stringr"</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"writexl"</span>)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"here"</span>)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"flextable"</span>)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co"># install klippy for copy-to-clipboard button in code chunks</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"remotes"</span>)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">"rlesur/klippy"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now that we’ve installed the required packages, let’s activate them using the following code snippet:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r klippy code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># activate packages</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(writexl)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(flextable)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co"># activate klippy for copy-to-clipboard button</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>klippy<span class="sc">::</span><span class="fu">klippy</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<script>
  addClassKlippyTo("pre.r, pre.markdown");
  addKlippy('left', 'top', 'auto', '1', 'Copy code', 'Copied!');
</script>
</div>
</div>
<p>Once you’ve initiated the session by executing the provided code, you’re ready to proceed.</p>
<section id="loading-and-processing-text" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="loading-and-processing-text">Loading and Processing Text</h2>
<p>For this tutorial, we will use Lewis Carroll’s classic novel <em>Alice’s Adventures in Wonderland</em> as our primary text dataset. This whimsical tale follows the adventures of Alice as she navigates a fantastical world filled with peculiar characters and surreal landscapes.</p>
<p><strong>Loading Text (from Project Gutenberg)</strong></p>
<p>To access the text within R, you can use the following code snippet, ensuring you have an active internet connection:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load Alice's Adventures in Wonderland text into R</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>rawtext <span class="ot">&lt;-</span> <span class="fu">readLines</span>(<span class="st">"https://www.gutenberg.org/files/11/11-0.txt"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-022b71f2{table-layout:auto;width:95%;}.cl-021ebdf4{font-family:'Arial';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-021ebe08{font-family:'Arial';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-0223b5de{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-0223d618{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0223d622{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0223d623{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0223d62c{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-022b71f2"><thead><tr style="overflow-wrap:break-word;"><th class="cl-0223d618"><p class="cl-0223b5de"><span class="cl-021ebdf4">.</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-0223d622"><p class="cl-0223b5de"><span class="cl-021ebe08">*** START OF THE PROJECT GUTENBERG EBOOK 11 ***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0223d623"><p class="cl-0223b5de"><span class="cl-021ebe08">[Illustration]</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0223d622"><p class="cl-0223b5de"><span class="cl-021ebe08">Alice’s Adventures in Wonderland</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0223d623"><p class="cl-0223b5de"><span class="cl-021ebe08">by Lewis Carroll</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0223d622"><p class="cl-0223b5de"><span class="cl-021ebe08">THE MILLENNIUM FULCRUM EDITION 3.0</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0223d623"><p class="cl-0223b5de"><span class="cl-021ebe08">Contents</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0223d622"><p class="cl-0223b5de"><span class="cl-021ebe08"> CHAPTER I.     Down the Rabbit-Hole</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0223d623"><p class="cl-0223b5de"><span class="cl-021ebe08"> CHAPTER II.    The Pool of Tears</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0223d622"><p class="cl-0223b5de"><span class="cl-021ebe08"> CHAPTER III.   A Caucus-Race and a Long Tale</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0223d623"><p class="cl-0223b5de"><span class="cl-021ebe08"> CHAPTER IV.    The Rabbit Sends in a Little Bill</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0223d622"><p class="cl-0223b5de"><span class="cl-021ebe08"> CHAPTER V.     Advice from a Caterpillar</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0223d623"><p class="cl-0223b5de"><span class="cl-021ebe08"> CHAPTER VI.    Pig and Pepper</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0223d622"><p class="cl-0223b5de"><span class="cl-021ebe08"> CHAPTER VII.   A Mad Tea-Party</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0223d623"><p class="cl-0223b5de"><span class="cl-021ebe08"> CHAPTER VIII.  The Queen’s Croquet-Ground</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0223d622"><p class="cl-0223b5de"><span class="cl-021ebe08"> CHAPTER IX.    The Mock Turtle’s Story</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0223d623"><p class="cl-0223b5de"><span class="cl-021ebe08"> CHAPTER X.     The Lobster Quadrille</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0223d622"><p class="cl-0223b5de"><span class="cl-021ebe08"> CHAPTER XI.    Who Stole the Tarts?</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0223d623"><p class="cl-0223b5de"><span class="cl-021ebe08"> CHAPTER XII.   Alice’s Evidence</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0223d622"><p class="cl-0223b5de"><span class="cl-021ebe08">CHAPTER I.</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0223d623"><p class="cl-0223b5de"><span class="cl-021ebe08">Down the Rabbit-Hole</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0223d622"><p class="cl-0223b5de"><span class="cl-021ebe08">Alice was beginning to get very tired of sitting by her sister on the</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0223d623"><p class="cl-0223b5de"><span class="cl-021ebe08">bank, and of having nothing to do: once or twice she had peeped into</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0223d622"><p class="cl-0223b5de"><span class="cl-021ebe08">the book her sister was reading, but it had no pictures or</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0223d623"><p class="cl-0223b5de"><span class="cl-021ebe08">conversations in it, “and what is the use of a book,” thought Alice</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0223d62c"><p class="cl-0223b5de"><span class="cl-021ebe08">“without pictures or conversations?”</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>After retrieving the text from Project Gutenberg, it becomes available for analysis within R. However, upon loading the text into our environment, we notice that it requires some processing. This includes removing extraneous elements such as the table of contents to isolate the main body of the text. Therefore, in the next step, we process the text. This will include consolidating the text into a single object and eliminating any non-essential content. Additionally, we clean up the text by removing superfluous white spaces to ensure a tidy dataset for our analysis.</p>
<p><strong>Data Preparation</strong></p>
<p>Data processing and preparation play a crucial role in text analysis, as they directly impact the quality and accuracy of the results obtained. When working with text data, it’s essential to ensure that the data is clean, structured, and formatted appropriately for analysis. This involves tasks such as removing irrelevant information, standardizing text formats, and handling missing or erroneous data.</p>
<p>The importance of data processing and preparation lies in its ability to transform raw text into a usable format that can be effectively analyzed. By cleaning and pre-processing the data, researchers can mitigate the impact of noise and inconsistencies, enabling more accurate and meaningful insights to be extracted from the text.</p>
<p>However, it’s worth noting that data preparation can often be a time-consuming process, sometimes requiring more time and effort than the actual analysis task itself. The extent of data preparation required can vary significantly depending on the complexity of the data and the specific research objectives. While some datasets may require minimal processing, others may necessitate extensive cleaning and transformation.</p>
<p>Ultimately, the time and effort invested in data preparation are essential for ensuring the reliability and validity of the analysis results. By dedicating sufficient attention to data processing and preparation, researchers can enhance the quality of their analyses and derive more robust insights from the text data at hand.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>text <span class="ot">&lt;-</span> rawtext <span class="sc">%&gt;%</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># collapse lines into a single  text</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste0</span>(<span class="at">collapse =</span> <span class="st">" "</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># remove superfluous white spaces</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_squish</span>() <span class="sc">%&gt;%</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># remove everything before "CHAPTER I."</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_remove</span>(<span class="st">".*CHAPTER I</span><span class="sc">\\</span><span class="st">."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-0266895e{table-layout:auto;width:95%;}.cl-025d4de4{font-family:'Arial';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-025d4dee{font-family:'Arial';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-02614a20{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-02616294{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0261629e{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-0266895e"><thead><tr style="overflow-wrap:break-word;"><th class="cl-02616294"><p class="cl-02614a20"><span class="cl-025d4de4">.</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-0261629e"><p class="cl-02614a20"><span class="cl-025d4dee"> Down the Rabbit-Hole Alice was beginning to get very tired of sitting by her sister on the bank, and of having nothing to do: once or twice she had peeped into the book her sister was reading, but it had no pictures or conversations in it, “and what is the use of a book,” thought Alice “without pictures or conversations?” So she was considering in her own mind (as well as she could, for the hot day made her feel very sleepy and stupid), whether the pleasure of making a daisy-chain would be worth the trouble of getting up and picking the daisies, when suddenly a White Rabbit with pink eyes ran close by her. There was nothing so _very_ remarkable in that; nor did Alice think it so _very_ much out of the way to hear the Rabbit say to itself, “Oh dear! Oh dear! I shall be late!” (when she thought it over afterwards, it occurred to her that she ought to have wondered at this, but at the time it all seemed quite natural); but when the Rabbit actually _took a watch out of its waistcoat-pocke</span></p></td></tr></tbody></table></div>
</div>
</div>
<div class="warning" style="padding:0.1em; background-color:#51247a; color:#f2f2f2">
<span>
<p style="margin-top:1em; text-align:center">
<b>ADDITIONAL INFO</b>: the regular expression “.<em>CHAPTER I\.” can be interpreted as follows:<br> Match any sequence of characters (.</em>) followed by the exact text”CHAPTER I” and ending with a period (.). This pattern is commonly used to locate occurrences of a chapter heading labeled “CHAPTER I” within a larger body of text.
</p>
<p></p>
</span></div>
<p><br></p>
<p>The entire content of Lewis Carroll’s <em>Alice’s Adventures in Wonderland</em> is now combined into a single character object and we can begin with generating concordances (KWICs).</p>
</section>
<section id="generating-basic-kwics" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="generating-basic-kwics">Generating Basic KWICs</h2>
<p>Now, extracting concordances becomes straightforward with the <code>kwic</code> function from the <code>quanteda</code> package. This function is designed to enable the extraction of keyword-in-context (KWIC) displays, a common format for displaying concordance lines.</p>
<p>To prepare the text for concordance extraction, we first need to tokenize it, which involves splitting it into individual words or tokens. Additionally, we specify the <code>phrase</code> argument in the <code>kwic</code> function, allowing us to extract phrases consisting of more than one token, such as “poor alice”.</p>
<p>The <code>kwic</code> function primarily requires two arguments: the tokenized text (<code>x</code>) and the search pattern (<code>pattern</code>). Additionally, it offers flexibility by allowing users to specify the context window, determining the number of words or elements displayed to the left and right of the nodeword. We’ll delve deeper into customizing this context window later on.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>mykwic <span class="ot">&lt;-</span> quanteda<span class="sc">::</span><span class="fu">kwic</span>(</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># define and tokenise text</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  quanteda<span class="sc">::</span><span class="fu">tokens</span>(text),</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># define search pattern and add the phrase function</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">pattern =</span> <span class="fu">phrase</span>(<span class="st">"Alice"</span>)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># convert it into a data frame</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-029e173e{table-layout:auto;width:95%;}.cl-02914e78{font-family:'Arial';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-02914e8c{font-family:'Arial';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-0296cac4{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-0296cace{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-0296eeaa{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0296eebe{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0296eebf{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0296eec8{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0296eec9{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0296eed2{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0296eed3{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0296eedc{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0296eedd{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0296eede{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0296eee6{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0296eee7{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0296eef0{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0296eefa{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0296eefb{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0296ef04{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-029e173e"><thead><tr style="overflow-wrap:break-word;"><th class="cl-0296eeaa"><p class="cl-0296cac4"><span class="cl-02914e78">docname</span></p></th><th class="cl-0296eebe"><p class="cl-0296cace"><span class="cl-02914e78">from</span></p></th><th class="cl-0296eebe"><p class="cl-0296cace"><span class="cl-02914e78">to</span></p></th><th class="cl-0296eebf"><p class="cl-0296cac4"><span class="cl-02914e78">pre</span></p></th><th class="cl-0296eebf"><p class="cl-0296cac4"><span class="cl-02914e78">keyword</span></p></th><th class="cl-0296eebf"><p class="cl-0296cac4"><span class="cl-02914e78">post</span></p></th><th class="cl-0296eec8"><p class="cl-0296cac4"><span class="cl-02914e78">pattern</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-0296eec9"><p class="cl-0296cac4"><span class="cl-02914e8c">text1</span></p></td><td class="cl-0296eed2"><p class="cl-0296cace"><span class="cl-02914e8c">4</span></p></td><td class="cl-0296eed2"><p class="cl-0296cace"><span class="cl-02914e8c">4</span></p></td><td class="cl-0296eed3"><p class="cl-0296cac4"><span class="cl-02914e8c">Down the Rabbit-Hole</span></p></td><td class="cl-0296eed3"><p class="cl-0296cac4"><span class="cl-02914e8c">Alice</span></p></td><td class="cl-0296eed3"><p class="cl-0296cac4"><span class="cl-02914e8c">was beginning to get very</span></p></td><td class="cl-0296eedc"><p class="cl-0296cac4"><span class="cl-02914e8c">Alice</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0296eedd"><p class="cl-0296cac4"><span class="cl-02914e8c">text1</span></p></td><td class="cl-0296eede"><p class="cl-0296cace"><span class="cl-02914e8c">63</span></p></td><td class="cl-0296eede"><p class="cl-0296cace"><span class="cl-02914e8c">63</span></p></td><td class="cl-0296eee6"><p class="cl-0296cac4"><span class="cl-02914e8c">a book , ” thought</span></p></td><td class="cl-0296eee6"><p class="cl-0296cac4"><span class="cl-02914e8c">Alice</span></p></td><td class="cl-0296eee6"><p class="cl-0296cac4"><span class="cl-02914e8c">“ without pictures or conversations</span></p></td><td class="cl-0296eee7"><p class="cl-0296cac4"><span class="cl-02914e8c">Alice</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0296eec9"><p class="cl-0296cac4"><span class="cl-02914e8c">text1</span></p></td><td class="cl-0296eed2"><p class="cl-0296cace"><span class="cl-02914e8c">143</span></p></td><td class="cl-0296eed2"><p class="cl-0296cace"><span class="cl-02914e8c">143</span></p></td><td class="cl-0296eed3"><p class="cl-0296cac4"><span class="cl-02914e8c">in that ; nor did</span></p></td><td class="cl-0296eed3"><p class="cl-0296cac4"><span class="cl-02914e8c">Alice</span></p></td><td class="cl-0296eed3"><p class="cl-0296cac4"><span class="cl-02914e8c">think it so _very_ much</span></p></td><td class="cl-0296eedc"><p class="cl-0296cac4"><span class="cl-02914e8c">Alice</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0296eedd"><p class="cl-0296cac4"><span class="cl-02914e8c">text1</span></p></td><td class="cl-0296eede"><p class="cl-0296cace"><span class="cl-02914e8c">229</span></p></td><td class="cl-0296eede"><p class="cl-0296cace"><span class="cl-02914e8c">229</span></p></td><td class="cl-0296eee6"><p class="cl-0296cac4"><span class="cl-02914e8c">and then hurried on ,</span></p></td><td class="cl-0296eee6"><p class="cl-0296cac4"><span class="cl-02914e8c">Alice</span></p></td><td class="cl-0296eee6"><p class="cl-0296cac4"><span class="cl-02914e8c">started to her feet ,</span></p></td><td class="cl-0296eee7"><p class="cl-0296cac4"><span class="cl-02914e8c">Alice</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0296eec9"><p class="cl-0296cac4"><span class="cl-02914e8c">text1</span></p></td><td class="cl-0296eed2"><p class="cl-0296cace"><span class="cl-02914e8c">299</span></p></td><td class="cl-0296eed2"><p class="cl-0296cace"><span class="cl-02914e8c">299</span></p></td><td class="cl-0296eed3"><p class="cl-0296cac4"><span class="cl-02914e8c">In another moment down went</span></p></td><td class="cl-0296eed3"><p class="cl-0296cac4"><span class="cl-02914e8c">Alice</span></p></td><td class="cl-0296eed3"><p class="cl-0296cac4"><span class="cl-02914e8c">after it , never once</span></p></td><td class="cl-0296eedc"><p class="cl-0296cac4"><span class="cl-02914e8c">Alice</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0296eef0"><p class="cl-0296cac4"><span class="cl-02914e8c">text1</span></p></td><td class="cl-0296eefa"><p class="cl-0296cace"><span class="cl-02914e8c">338</span></p></td><td class="cl-0296eefa"><p class="cl-0296cace"><span class="cl-02914e8c">338</span></p></td><td class="cl-0296eefb"><p class="cl-0296cac4"><span class="cl-02914e8c">down , so suddenly that</span></p></td><td class="cl-0296eefb"><p class="cl-0296cac4"><span class="cl-02914e8c">Alice</span></p></td><td class="cl-0296eefb"><p class="cl-0296cac4"><span class="cl-02914e8c">had not a moment to</span></p></td><td class="cl-0296ef04"><p class="cl-0296cac4"><span class="cl-02914e8c">Alice</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>The resulting table showcases how “Alice” is used within our example text. However, since we use the <code>head</code> function, the table only displays the first six instances.</p>
<p>After extracting a concordance table, we can easily determine the frequency of the search term (“alice”) using either the <code>nrow</code> or <code>length</code> functions. These functions provide the number of rows in a table (<code>nrow</code>) or the length of a vector (<code>length</code>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(mykwic)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 386</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(mykwic<span class="sc">$</span>keyword)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 386</code></pre>
</div>
</div>
<p>The results indicate that there are 386 instances of the search term (“alice”). Moreover, we can also explore how often different variants of the search term were found using the table function. While this may be particularly useful for searches involving various search terms (although less so in the present example).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(mykwic<span class="sc">$</span>keyword)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Alice 
  386 </code></pre>
</div>
</div>
<p>To gain a deeper understanding of how a word is used, it can be beneficial to extract more context. This can be achieved by adjusting the size of the context window. To do so, we simply specify the <code>window</code> argument of the <code>kwic</code> function. In the following example, we set the context window size to 10 words/elements, deviating from the default size of 5 words/elements.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>mykwic_long <span class="ot">&lt;-</span> quanteda<span class="sc">::</span><span class="fu">kwic</span>(</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># define text</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  quanteda<span class="sc">::</span><span class="fu">tokens</span>(text),</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># define search pattern</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">pattern =</span> <span class="fu">phrase</span>(<span class="st">"alice"</span>),</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># define context window size</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">window =</span> <span class="dv">10</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># make it a data frame</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-02d8933c{table-layout:auto;width:95%;}.cl-02cf7f18{font-family:'Arial';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-02cf7f22{font-family:'Arial';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-02d2d384{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-02d2d398{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-02d30a7a{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-02d30a84{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-02d30a85{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-02d30a8e{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-02d30a8f{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-02d30a98{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-02d30a99{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-02d30a9a{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-02d30aa2{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-02d30aa3{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-02d30aac{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-02d30aad{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-02d30aae{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-02d30ab6{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-02d30ab7{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-02d30ab8{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-02d8933c"><thead><tr style="overflow-wrap:break-word;"><th class="cl-02d30a7a"><p class="cl-02d2d384"><span class="cl-02cf7f18">docname</span></p></th><th class="cl-02d30a84"><p class="cl-02d2d398"><span class="cl-02cf7f18">from</span></p></th><th class="cl-02d30a84"><p class="cl-02d2d398"><span class="cl-02cf7f18">to</span></p></th><th class="cl-02d30a85"><p class="cl-02d2d384"><span class="cl-02cf7f18">pre</span></p></th><th class="cl-02d30a85"><p class="cl-02d2d384"><span class="cl-02cf7f18">keyword</span></p></th><th class="cl-02d30a85"><p class="cl-02d2d384"><span class="cl-02cf7f18">post</span></p></th><th class="cl-02d30a8e"><p class="cl-02d2d384"><span class="cl-02cf7f18">pattern</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-02d30a8f"><p class="cl-02d2d384"><span class="cl-02cf7f22">text1</span></p></td><td class="cl-02d30a98"><p class="cl-02d2d398"><span class="cl-02cf7f22">4</span></p></td><td class="cl-02d30a98"><p class="cl-02d2d398"><span class="cl-02cf7f22">4</span></p></td><td class="cl-02d30a99"><p class="cl-02d2d384"><span class="cl-02cf7f22">Down the Rabbit-Hole</span></p></td><td class="cl-02d30a99"><p class="cl-02d2d384"><span class="cl-02cf7f22">Alice</span></p></td><td class="cl-02d30a99"><p class="cl-02d2d384"><span class="cl-02cf7f22">was beginning to get very tired of sitting by her</span></p></td><td class="cl-02d30a9a"><p class="cl-02d2d384"><span class="cl-02cf7f22">alice</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-02d30aa2"><p class="cl-02d2d384"><span class="cl-02cf7f22">text1</span></p></td><td class="cl-02d30aa3"><p class="cl-02d2d398"><span class="cl-02cf7f22">63</span></p></td><td class="cl-02d30aa3"><p class="cl-02d2d398"><span class="cl-02cf7f22">63</span></p></td><td class="cl-02d30aac"><p class="cl-02d2d384"><span class="cl-02cf7f22">what is the use of a book , ” thought</span></p></td><td class="cl-02d30aac"><p class="cl-02d2d384"><span class="cl-02cf7f22">Alice</span></p></td><td class="cl-02d30aac"><p class="cl-02d2d384"><span class="cl-02cf7f22">“ without pictures or conversations ? ” So she was</span></p></td><td class="cl-02d30aad"><p class="cl-02d2d384"><span class="cl-02cf7f22">alice</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-02d30a8f"><p class="cl-02d2d384"><span class="cl-02cf7f22">text1</span></p></td><td class="cl-02d30a98"><p class="cl-02d2d398"><span class="cl-02cf7f22">143</span></p></td><td class="cl-02d30a98"><p class="cl-02d2d398"><span class="cl-02cf7f22">143</span></p></td><td class="cl-02d30a99"><p class="cl-02d2d384"><span class="cl-02cf7f22">was nothing so _very_ remarkable in that ; nor did</span></p></td><td class="cl-02d30a99"><p class="cl-02d2d384"><span class="cl-02cf7f22">Alice</span></p></td><td class="cl-02d30a99"><p class="cl-02d2d384"><span class="cl-02cf7f22">think it so _very_ much out of the way to</span></p></td><td class="cl-02d30a9a"><p class="cl-02d2d384"><span class="cl-02cf7f22">alice</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-02d30aa2"><p class="cl-02d2d384"><span class="cl-02cf7f22">text1</span></p></td><td class="cl-02d30aa3"><p class="cl-02d2d398"><span class="cl-02cf7f22">229</span></p></td><td class="cl-02d30aa3"><p class="cl-02d2d398"><span class="cl-02cf7f22">229</span></p></td><td class="cl-02d30aac"><p class="cl-02d2d384"><span class="cl-02cf7f22">and looked at it , and then hurried on ,</span></p></td><td class="cl-02d30aac"><p class="cl-02d2d384"><span class="cl-02cf7f22">Alice</span></p></td><td class="cl-02d30aac"><p class="cl-02d2d384"><span class="cl-02cf7f22">started to her feet , for it flashed across her</span></p></td><td class="cl-02d30aad"><p class="cl-02d2d384"><span class="cl-02cf7f22">alice</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-02d30a8f"><p class="cl-02d2d384"><span class="cl-02cf7f22">text1</span></p></td><td class="cl-02d30a98"><p class="cl-02d2d398"><span class="cl-02cf7f22">299</span></p></td><td class="cl-02d30a98"><p class="cl-02d2d398"><span class="cl-02cf7f22">299</span></p></td><td class="cl-02d30a99"><p class="cl-02d2d384"><span class="cl-02cf7f22">rabbit-hole under the hedge . In another moment down went</span></p></td><td class="cl-02d30a99"><p class="cl-02d2d384"><span class="cl-02cf7f22">Alice</span></p></td><td class="cl-02d30a99"><p class="cl-02d2d384"><span class="cl-02cf7f22">after it , never once considering how in the world</span></p></td><td class="cl-02d30a9a"><p class="cl-02d2d384"><span class="cl-02cf7f22">alice</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-02d30aae"><p class="cl-02d2d384"><span class="cl-02cf7f22">text1</span></p></td><td class="cl-02d30ab6"><p class="cl-02d2d398"><span class="cl-02cf7f22">338</span></p></td><td class="cl-02d30ab6"><p class="cl-02d2d398"><span class="cl-02cf7f22">338</span></p></td><td class="cl-02d30ab7"><p class="cl-02d2d384"><span class="cl-02cf7f22">, and then dipped suddenly down , so suddenly that</span></p></td><td class="cl-02d30ab7"><p class="cl-02d2d384"><span class="cl-02cf7f22">Alice</span></p></td><td class="cl-02d30ab7"><p class="cl-02d2d384"><span class="cl-02cf7f22">had not a moment to think about stopping herself before</span></p></td><td class="cl-02d30ab8"><p class="cl-02d2d384"><span class="cl-02cf7f22">alice</span></p></td></tr></tbody></table></div>
</div>
</div>
<hr>
<div class="warning" style="padding:0.1em; background-color:#51247a; color:#f2f2f2">
<span>
<p style="margin-top:1em; text-align:center">
<b>EXERCISE TIME!</b>
</p>
<p style="margin-left:1em;">
</p>
<p></p>
</span></div>
<div class="question">
<p>`</p>
<ol type="1">
<li>Extract the first 10 concordances for the word <em>confused</em>.<br></li>
</ol>
<details>
<summary>
Answer
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>kwic_confused <span class="ot">&lt;-</span> quanteda<span class="sc">::</span><span class="fu">kwic</span>(<span class="at">x =</span> quanteda<span class="sc">::</span><span class="fu">tokens</span>(text), <span class="at">pattern =</span> <span class="fu">phrase</span>(<span class="st">"confused"</span>))</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>kwic_confused <span class="sc">%&gt;%</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  docname  from    to                    pre  keyword
1   text1  6217  6217     , calling out in a confused
2   text1 19140 19140     . ” This answer so confused
3   text1 19325 19325 said Alice , very much confused
4   text1 33422 33422      she knew ) to the confused
                                 post  pattern
1                    way , “ Prizes ! confused
2               poor Alice , that she confused
3                   , “ I don’t think confused
4 clamour of the busy farm-yard—while confused</code></pre>
</div>
</div>
</details>
<ol start="2" type="1">
<li>How many instances are there of the word <em>wondering</em>?<br></li>
</ol>
<details>
<summary>
Answer
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>quanteda<span class="sc">::</span><span class="fu">kwic</span>(<span class="at">x =</span> quanteda<span class="sc">::</span><span class="fu">tokens</span>(text), <span class="at">pattern =</span> <span class="fu">phrase</span>(<span class="st">"wondering"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7</code></pre>
</div>
</div>
</details>
<ol start="3" type="1">
<li>Extract concordances for the word <em>strange</em> and show the first 5 concordance lines.<br></li>
</ol>
<details>
<summary>
Answer
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>kwic_strange <span class="ot">&lt;-</span> quanteda<span class="sc">::</span><span class="fu">kwic</span>(<span class="at">x =</span> quanteda<span class="sc">::</span><span class="fu">tokens</span>(text), <span class="at">pattern =</span> <span class="fu">phrase</span>(<span class="st">"strange"</span>))</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>kwic_strange <span class="sc">%&gt;%</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  docname  from    to                          pre keyword
1   text1  3527  3527 her voice sounded hoarse and strange
2   text1 13147 13147         , that it felt quite strange
3   text1 32997 32997    remember them , all these strange
4   text1 33204 33204    her became alive with the strange
5   text1 33514 33514        and eager with many a strange
                              post pattern
1              , and the words did strange
2               at first ; but she strange
3      Adventures of hers that you strange
4 creatures of her little sister’s strange
5         tale , perhaps even with strange</code></pre>
</div>
</div>
</details>
</div>
<hr>
</section>
<section id="exporting-kwics" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="exporting-kwics">Exporting KWICs</h2>
<p>To export or save a concordance table as an MS Excel spreadsheet, you can utilize the <code>write_xlsx</code> function from the <code>writexl</code> package, as demonstrated below. It’s important to note that we employ the <code>here</code> function from the <code>here</code> package to specify the location where we want to save the file. In this instance, we save the file in the current working directory. If you’re working with Rproj files in RStudio, which is recommended, then the current working directory corresponds to the directory or folder where your Rproj file is located.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_xlsx</span>(mykwic, here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"mykwic.xlsx"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="extracting-multi-word-expressions" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="extracting-multi-word-expressions">Extracting Multi-Word Expressions</h2>
<p>While extracting single words is a common practice, there are situations where you may need to extract more than just one word at a time. This can be particularly useful when you’re interested in extracting phrases or multi-word expressions from your text data. To accomplish this, you simply need to specify that the pattern you are searching for is a phrase. This allows you to extract contiguous sequences of words that form meaningful units of text.</p>
<p>For example, if you’re analyzing a text and want to extract phrases like “poor alice”, “mad hatter”, or “cheshire cat”, you can easily do so by specifying these phrases as your search patterns.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extract concordances for the phrase "poor alice" using the kwic function from the quanteda package</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>kwic_pooralice <span class="ot">&lt;-</span> quanteda<span class="sc">::</span><span class="fu">kwic</span>(</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># tokenizing the input text</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  quanteda<span class="sc">::</span><span class="fu">tokens</span>(text),</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># specifying the search pattern as the phrase "poor alice"</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">pattern =</span> <span class="fu">phrase</span>(<span class="st">"poor alice"</span>)</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># converting the result to a data frame for easier manipulation</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-033d67c6{table-layout:auto;width:95%;}.cl-03330088{font-family:'Arial';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-03330092{font-family:'Arial';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-03367db2{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-03367dbc{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-0336a756{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0336a760{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0336a76a{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0336a76b{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0336a76c{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0336a774{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0336a775{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0336a77e{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0336a77f{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0336a788{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0336a789{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0336a78a{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0336a78b{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0336a792{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0336a793{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0336a79c{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-033d67c6"><thead><tr style="overflow-wrap:break-word;"><th class="cl-0336a756"><p class="cl-03367db2"><span class="cl-03330088">docname</span></p></th><th class="cl-0336a760"><p class="cl-03367dbc"><span class="cl-03330088">from</span></p></th><th class="cl-0336a760"><p class="cl-03367dbc"><span class="cl-03330088">to</span></p></th><th class="cl-0336a76a"><p class="cl-03367db2"><span class="cl-03330088">pre</span></p></th><th class="cl-0336a76a"><p class="cl-03367db2"><span class="cl-03330088">keyword</span></p></th><th class="cl-0336a76a"><p class="cl-03367db2"><span class="cl-03330088">post</span></p></th><th class="cl-0336a76b"><p class="cl-03367db2"><span class="cl-03330088">pattern</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-0336a76c"><p class="cl-03367db2"><span class="cl-03330092">text1</span></p></td><td class="cl-0336a774"><p class="cl-03367dbc"><span class="cl-03330092">1,541</span></p></td><td class="cl-0336a774"><p class="cl-03367dbc"><span class="cl-03330092">1,542</span></p></td><td class="cl-0336a775"><p class="cl-03367db2"><span class="cl-03330092">go through , ” thought</span></p></td><td class="cl-0336a775"><p class="cl-03367db2"><span class="cl-03330092">poor Alice</span></p></td><td class="cl-0336a775"><p class="cl-03367db2"><span class="cl-03330092">, “ it would be</span></p></td><td class="cl-0336a77e"><p class="cl-03367db2"><span class="cl-03330092">poor alice</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0336a77f"><p class="cl-03367db2"><span class="cl-03330092">text1</span></p></td><td class="cl-0336a788"><p class="cl-03367dbc"><span class="cl-03330092">2,130</span></p></td><td class="cl-0336a788"><p class="cl-03367dbc"><span class="cl-03330092">2,131</span></p></td><td class="cl-0336a789"><p class="cl-03367db2"><span class="cl-03330092">; but , alas for</span></p></td><td class="cl-0336a789"><p class="cl-03367db2"><span class="cl-03330092">poor Alice</span></p></td><td class="cl-0336a789"><p class="cl-03367db2"><span class="cl-03330092">! when she got to</span></p></td><td class="cl-0336a78a"><p class="cl-03367db2"><span class="cl-03330092">poor alice</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0336a76c"><p class="cl-03367db2"><span class="cl-03330092">text1</span></p></td><td class="cl-0336a774"><p class="cl-03367dbc"><span class="cl-03330092">2,332</span></p></td><td class="cl-0336a774"><p class="cl-03367dbc"><span class="cl-03330092">2,333</span></p></td><td class="cl-0336a775"><p class="cl-03367db2"><span class="cl-03330092">use now , ” thought</span></p></td><td class="cl-0336a775"><p class="cl-03367db2"><span class="cl-03330092">poor Alice</span></p></td><td class="cl-0336a775"><p class="cl-03367db2"><span class="cl-03330092">, “ to pretend to</span></p></td><td class="cl-0336a77e"><p class="cl-03367db2"><span class="cl-03330092">poor alice</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0336a77f"><p class="cl-03367db2"><span class="cl-03330092">text1</span></p></td><td class="cl-0336a788"><p class="cl-03367dbc"><span class="cl-03330092">2,887</span></p></td><td class="cl-0336a788"><p class="cl-03367dbc"><span class="cl-03330092">2,888</span></p></td><td class="cl-0336a789"><p class="cl-03367db2"><span class="cl-03330092">to the garden door .</span></p></td><td class="cl-0336a789"><p class="cl-03367db2"><span class="cl-03330092">Poor Alice</span></p></td><td class="cl-0336a789"><p class="cl-03367db2"><span class="cl-03330092">! It was as much</span></p></td><td class="cl-0336a78a"><p class="cl-03367db2"><span class="cl-03330092">poor alice</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0336a76c"><p class="cl-03367db2"><span class="cl-03330092">text1</span></p></td><td class="cl-0336a774"><p class="cl-03367dbc"><span class="cl-03330092">3,604</span></p></td><td class="cl-0336a774"><p class="cl-03367dbc"><span class="cl-03330092">3,605</span></p></td><td class="cl-0336a775"><p class="cl-03367db2"><span class="cl-03330092">right words , ” said</span></p></td><td class="cl-0336a775"><p class="cl-03367db2"><span class="cl-03330092">poor Alice</span></p></td><td class="cl-0336a775"><p class="cl-03367db2"><span class="cl-03330092">, and her eyes filled</span></p></td><td class="cl-0336a77e"><p class="cl-03367db2"><span class="cl-03330092">poor alice</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0336a77f"><p class="cl-03367db2"><span class="cl-03330092">text1</span></p></td><td class="cl-0336a788"><p class="cl-03367dbc"><span class="cl-03330092">6,876</span></p></td><td class="cl-0336a788"><p class="cl-03367dbc"><span class="cl-03330092">6,877</span></p></td><td class="cl-0336a789"><p class="cl-03367db2"><span class="cl-03330092">mean it ! ” pleaded</span></p></td><td class="cl-0336a789"><p class="cl-03367db2"><span class="cl-03330092">poor Alice</span></p></td><td class="cl-0336a789"><p class="cl-03367db2"><span class="cl-03330092">. “ But you’re so</span></p></td><td class="cl-0336a78a"><p class="cl-03367db2"><span class="cl-03330092">poor alice</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0336a76c"><p class="cl-03367db2"><span class="cl-03330092">text1</span></p></td><td class="cl-0336a774"><p class="cl-03367dbc"><span class="cl-03330092">7,290</span></p></td><td class="cl-0336a774"><p class="cl-03367dbc"><span class="cl-03330092">7,291</span></p></td><td class="cl-0336a775"><p class="cl-03367db2"><span class="cl-03330092">more ! ” And here</span></p></td><td class="cl-0336a775"><p class="cl-03367db2"><span class="cl-03330092">poor Alice</span></p></td><td class="cl-0336a775"><p class="cl-03367db2"><span class="cl-03330092">began to cry again ,</span></p></td><td class="cl-0336a77e"><p class="cl-03367db2"><span class="cl-03330092">poor alice</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0336a77f"><p class="cl-03367db2"><span class="cl-03330092">text1</span></p></td><td class="cl-0336a788"><p class="cl-03367dbc"><span class="cl-03330092">8,239</span></p></td><td class="cl-0336a788"><p class="cl-03367dbc"><span class="cl-03330092">8,240</span></p></td><td class="cl-0336a789"><p class="cl-03367db2"><span class="cl-03330092">at home , ” thought</span></p></td><td class="cl-0336a789"><p class="cl-03367db2"><span class="cl-03330092">poor Alice</span></p></td><td class="cl-0336a789"><p class="cl-03367db2"><span class="cl-03330092">, “ when one wasn’t</span></p></td><td class="cl-0336a78a"><p class="cl-03367db2"><span class="cl-03330092">poor alice</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0336a76c"><p class="cl-03367db2"><span class="cl-03330092">text1</span></p></td><td class="cl-0336a774"><p class="cl-03367dbc"><span class="cl-03330092">11,788</span></p></td><td class="cl-0336a774"><p class="cl-03367dbc"><span class="cl-03330092">11,789</span></p></td><td class="cl-0336a775"><p class="cl-03367db2"><span class="cl-03330092">to it ! ” pleaded</span></p></td><td class="cl-0336a775"><p class="cl-03367db2"><span class="cl-03330092">poor Alice</span></p></td><td class="cl-0336a775"><p class="cl-03367db2"><span class="cl-03330092">in a piteous tone .</span></p></td><td class="cl-0336a77e"><p class="cl-03367db2"><span class="cl-03330092">poor alice</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0336a78b"><p class="cl-03367db2"><span class="cl-03330092">text1</span></p></td><td class="cl-0336a792"><p class="cl-03367dbc"><span class="cl-03330092">19,141</span></p></td><td class="cl-0336a792"><p class="cl-03367dbc"><span class="cl-03330092">19,142</span></p></td><td class="cl-0336a793"><p class="cl-03367db2"><span class="cl-03330092">” This answer so confused</span></p></td><td class="cl-0336a793"><p class="cl-03367db2"><span class="cl-03330092">poor Alice</span></p></td><td class="cl-0336a793"><p class="cl-03367db2"><span class="cl-03330092">, that she let the</span></p></td><td class="cl-0336a79c"><p class="cl-03367db2"><span class="cl-03330092">poor alice</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>In addition to exact words or phrases, there are situations where you may need to extract more or less fixed patterns from your text data. These patterns might allow for variations in spelling, punctuation, or formatting. To search for such flexible patterns, you need to incorporate regular expressions into your search pattern.</p>
<p>Regular expressions (regex) are powerful tools for pattern matching and text manipulation. They allow you to define flexible search patterns that can match a wide range of text variations. For example, you can use regex to find all instances of a word regardless of whether it’s in lowercase or uppercase, or to identify patterns like dates, email addresses, or URLs.</p>
<p>To incorporate regular expressions into your search pattern, you can use functions like <code>grepl()</code> or <code>grep()</code> in base R, or <code>str_detect()</code> and <code>str_extract()</code> in the <code>stringr</code> package. These functions allow you to specify regex patterns to search for within your text data.</p>
<hr>
<div class="warning" style="padding:0.1em; background-color:#51247a; color:#f2f2f2">
<span>
<p style="margin-top:1em; text-align:center">
<b>EXERCISE TIME!</b>
</p>
<p style="margin-left:1em;">
</p>
<p></p>
</span></div>
<div class="question">
<p>`</p>
<ol type="1">
<li>Extract the first 10 concordances for the phrase <em>the hatter</em>.<br></li>
</ol>
<details>
<summary>
Answer
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>kwic_thehatter <span class="ot">&lt;-</span> quanteda<span class="sc">::</span><span class="fu">kwic</span>(<span class="at">x =</span> quanteda<span class="sc">::</span><span class="fu">tokens</span>(text), <span class="at">pattern =</span> <span class="fu">phrase</span>(<span class="st">"the hatter"</span>))</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>kwic_thehatter <span class="sc">%&gt;%</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   docname  from    to                    pre    keyword
1    text1 16576 16577   wish I’d gone to see the Hatter
2    text1 16607 16608 and the March Hare and the Hatter
3    text1 16859 16860 wants cutting , ” said the Hatter
4    text1 16905 16906     it’s very rude . ” The Hatter
5    text1 17049 17050         a bit ! ” said the Hatter
6    text1 17174 17175      with you , ” said the Hatter
7    text1 17209 17210  , which wasn’t much . The Hatter
8    text1 17287 17288  days wrong ! ” sighed the Hatter
9    text1 17338 17339         in as well , ” the Hatter
10   text1 17453 17454 should it ? ” muttered the Hatter
                          post    pattern
1      instead ! ” CHAPTER VII the hatter
2        were having tea at it the hatter
3        . He had been looking the hatter
4    opened his eyes very wide the hatter
5           . “ You might just the hatter
6  , and here the conversation the hatter
7       was the first to break the hatter
8               . “ I told you the hatter
9   grumbled : “ you shouldn’t the hatter
10       . “ Does _your_ watch the hatter</code></pre>
</div>
</div>
</details>
<ol start="2" type="1">
<li>How many instances are there of the phrase <em>the hatter</em>?<br></li>
</ol>
<details>
<summary>
Answer
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>kwic_thehatter <span class="sc">%&gt;%</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 51</code></pre>
</div>
</div>
</details>
<ol start="3" type="1">
<li>Extract concordances for the phrase <em>the cat</em> and show the first 5 concordance lines.<br></li>
</ol>
<details>
<summary>
Answer
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>kwic_thecat <span class="ot">&lt;-</span> quanteda<span class="sc">::</span><span class="fu">kwic</span>(<span class="at">x =</span> quanteda<span class="sc">::</span><span class="fu">tokens</span>(text), <span class="at">pattern =</span> <span class="fu">phrase</span>(<span class="st">"the cat"</span>))</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>kwic_thecat <span class="sc">%&gt;%</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  docname  from    to               pre keyword                     post
1   text1   932   933   ! ” ( Dinah was the cat             . ) “ I hope
2   text1 15624 15625 a few yards off . The Cat only grinned when it saw
3   text1 15749 15750   get to , ” said the Cat         . “ I don’t much
4   text1 15775 15776   you go , ” said the Cat            . “ — so long
5   text1 15805 15806  do that , ” said the Cat          , “ if you only
  pattern
1 the cat
2 the cat
3 the cat
4 the cat
5 the cat</code></pre>
</div>
</div>
</details>
</div>
<hr>
</section>
<section id="concordancing-using-regular-expressions" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="concordancing-using-regular-expressions">Concordancing Using Regular Expressions</h2>
<p>Regular expressions provide a powerful means of searching for abstract patterns within text data, offering unparalleled flexibility beyond concrete words or phrases. Often abbreviated as <em>regex</em> or <em>regexp</em>, a regular expression is a special sequence of characters that describe a pattern to be matched in a text.</p>
<p>You can conceptualize regular expressions as highly potent combinations of wildcards, offering an extensive range of pattern-matching capabilities. For instance, the sequence <code>[a-z]{1,3}</code> is a regular expression that signifies one to three lowercase characters. Searching for this regular expression would yield results such as “is”, “a”, “an”, “of”, “the”, “my”, “our”, and other short words.</p>
<p>There are three fundamental types of regular expressions:</p>
<ol type="1">
<li><p><strong>Regular expressions for individual symbols and frequencies</strong>: These regular expressions represent single characters and determine their frequencies within the text. For example, <code>[a-z]</code> matches any lowercase letter, <code>[0-9]</code> matches any digit, and <code>{1,3}</code> specifies a range of occurrences (one to three in this case).</p></li>
<li><p><strong>Regular expressions for classes of symbols</strong>: These regular expressions represent classes or groups of symbols with shared characteristics. For instance, <code>\d</code> matches any digit, <code>\w</code> matches any word character (alphanumeric characters and underscores), and <code>\s</code> matches any whitespace character.</p></li>
<li><p><strong>Regular expressions for structural properties</strong>: These regular expressions represent structural properties or patterns within the text. For example, <code>^</code> matches the start of a line, <code>$</code> matches the end of a line, and <code>\b</code> matches a word boundary.</p></li>
</ol>
<p>The regular expressions below show the first type of regular expressions, i.e.&nbsp;regular expressions that stand for individual symbols and determine frequencies.</p>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-037cdcbc{table-layout:auto;width:75%;}.cl-03724b62{font-family:'Arial';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-03724b6c{font-family:'Arial';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-03767304{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-03769438{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-03769442{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-03769443{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0376944c{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0376944d{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0376944e{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-03769456{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-03769457{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-03769460{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-03769461{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-03769462{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0376946a{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-037cdcbc"><thead><tr style="overflow-wrap:break-word;"><th class="cl-03769438"><p class="cl-03767304"><span class="cl-03724b62">RegEx Symbol/Sequence</span></p></th><th class="cl-03769442"><p class="cl-03767304"><span class="cl-03724b62">Explanation</span></p></th><th class="cl-03769443"><p class="cl-03767304"><span class="cl-03724b62">Example</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-0376944c"><p class="cl-03767304"><span class="cl-03724b6c">?</span></p></td><td class="cl-0376944d"><p class="cl-03767304"><span class="cl-03724b6c">The preceding item is optional and will be matched at most once</span></p></td><td class="cl-0376944e"><p class="cl-03767304"><span class="cl-03724b6c">walk[a-z]? = walk, walks</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-03769456"><p class="cl-03767304"><span class="cl-03724b6c">*</span></p></td><td class="cl-03769457"><p class="cl-03767304"><span class="cl-03724b6c">The preceding item will be matched zero or more times</span></p></td><td class="cl-03769460"><p class="cl-03767304"><span class="cl-03724b6c">walk[a-z]* = walk, walks, walked, walking</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0376944c"><p class="cl-03767304"><span class="cl-03724b6c">+</span></p></td><td class="cl-0376944d"><p class="cl-03767304"><span class="cl-03724b6c">The preceding item will be matched one or more times</span></p></td><td class="cl-0376944e"><p class="cl-03767304"><span class="cl-03724b6c">walk[a-z]+ = walks, walked, walking</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-03769456"><p class="cl-03767304"><span class="cl-03724b6c">{n}</span></p></td><td class="cl-03769457"><p class="cl-03767304"><span class="cl-03724b6c">The preceding item is matched exactly n times</span></p></td><td class="cl-03769460"><p class="cl-03767304"><span class="cl-03724b6c">walk[a-z]{2} = walked</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0376944c"><p class="cl-03767304"><span class="cl-03724b6c">{n,}</span></p></td><td class="cl-0376944d"><p class="cl-03767304"><span class="cl-03724b6c">The preceding item is matched n or more times</span></p></td><td class="cl-0376944e"><p class="cl-03767304"><span class="cl-03724b6c">walk[a-z]{2,} = walked, walking</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-03769461"><p class="cl-03767304"><span class="cl-03724b6c">{n,m}</span></p></td><td class="cl-03769462"><p class="cl-03767304"><span class="cl-03724b6c">The preceding item is matched at least n times, but not more than m times</span></p></td><td class="cl-0376946a"><p class="cl-03767304"><span class="cl-03724b6c">walk[a-z]{2,3} = walked, walking</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>The regular expressions below show the second type of regular expressions, i.e.&nbsp;regular expressions that stand for classes of symbols.</p>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-0397a1e6{table-layout:auto;width:75%;}.cl-038e1cca{font-family:'Arial';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-038e1cd4{font-family:'Arial';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-03923a3a{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-03925cfe{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-03925d08{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-03925d12{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-03925d13{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-03925d14{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-03925d1c{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-03925d1d{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-03925d1e{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-0397a1e6"><thead><tr style="overflow-wrap:break-word;"><th class="cl-03925cfe"><p class="cl-03923a3a"><span class="cl-038e1cca">RegEx Symbol/Sequence</span></p></th><th class="cl-03925d08"><p class="cl-03923a3a"><span class="cl-038e1cca">Explanation</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-03925d12"><p class="cl-03923a3a"><span class="cl-038e1cd4">[ab]</span></p></td><td class="cl-03925d13"><p class="cl-03923a3a"><span class="cl-038e1cd4">lower case a and b</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-03925d14"><p class="cl-03923a3a"><span class="cl-038e1cd4">[AB]</span></p></td><td class="cl-03925d1c"><p class="cl-03923a3a"><span class="cl-038e1cd4">upper case a and b</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-03925d12"><p class="cl-03923a3a"><span class="cl-038e1cd4">[12]</span></p></td><td class="cl-03925d13"><p class="cl-03923a3a"><span class="cl-038e1cd4">digits 1 and 2</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-03925d14"><p class="cl-03923a3a"><span class="cl-038e1cd4">[:digit:]</span></p></td><td class="cl-03925d1c"><p class="cl-03923a3a"><span class="cl-038e1cd4">digits: 0 1 2 3 4 5 6 7 8 9</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-03925d12"><p class="cl-03923a3a"><span class="cl-038e1cd4">[:lower:]</span></p></td><td class="cl-03925d13"><p class="cl-03923a3a"><span class="cl-038e1cd4">lower case characters: a–z</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-03925d14"><p class="cl-03923a3a"><span class="cl-038e1cd4">[:upper:]</span></p></td><td class="cl-03925d1c"><p class="cl-03923a3a"><span class="cl-038e1cd4">upper case characters: A–Z</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-03925d12"><p class="cl-03923a3a"><span class="cl-038e1cd4">[:alpha:]</span></p></td><td class="cl-03925d13"><p class="cl-03923a3a"><span class="cl-038e1cd4">alphabetic characters: a–z and A–Z</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-03925d14"><p class="cl-03923a3a"><span class="cl-038e1cd4">[:alnum:]</span></p></td><td class="cl-03925d1c"><p class="cl-03923a3a"><span class="cl-038e1cd4">digits and alphabetic characters</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-03925d12"><p class="cl-03923a3a"><span class="cl-038e1cd4">[:punct:]</span></p></td><td class="cl-03925d13"><p class="cl-03923a3a"><span class="cl-038e1cd4">punctuation characters: . , ; etc.</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-03925d14"><p class="cl-03923a3a"><span class="cl-038e1cd4">[:graph:]</span></p></td><td class="cl-03925d1c"><p class="cl-03923a3a"><span class="cl-038e1cd4">graphical characters: [:alnum:] and [:punct:]</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-03925d12"><p class="cl-03923a3a"><span class="cl-038e1cd4">[:blank:]</span></p></td><td class="cl-03925d13"><p class="cl-03923a3a"><span class="cl-038e1cd4">blank characters: Space and tab</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-03925d14"><p class="cl-03923a3a"><span class="cl-038e1cd4">[:space:]</span></p></td><td class="cl-03925d1c"><p class="cl-03923a3a"><span class="cl-038e1cd4">space characters: Space, tab, newline, and other space characters</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-03925d1d"><p class="cl-03923a3a"><span class="cl-038e1cd4">[:print:]</span></p></td><td class="cl-03925d1e"><p class="cl-03923a3a"><span class="cl-038e1cd4">printable characters: [:alnum:], [:punct:] and [:space:]</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>The regular expressions that denote classes of symbols are enclosed in <code>[]</code> and <code>:</code>. The last type of regular expressions, i.e.&nbsp;regular expressions that stand for structural properties are shown below.</p>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-03b4e936{table-layout:auto;width:50%;}.cl-03aa861c{font-family:'Arial';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-03aa8630{font-family:'Arial';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-03aee70c{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-03af1614{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-03af161e{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-03af161f{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-03af1628{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-03af1629{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-03af1632{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-03af1633{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-03af163c{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-03b4e936"><thead><tr style="overflow-wrap:break-word;"><th class="cl-03af1614"><p class="cl-03aee70c"><span class="cl-03aa861c">RegEx Symbol/Sequence</span></p></th><th class="cl-03af161e"><p class="cl-03aee70c"><span class="cl-03aa861c">Explanation</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-03af161f"><p class="cl-03aee70c"><span class="cl-03aa8630">\\w</span></p></td><td class="cl-03af1628"><p class="cl-03aee70c"><span class="cl-03aa8630">Word characters: [[:alnum:]_]</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-03af1629"><p class="cl-03aee70c"><span class="cl-03aa8630">\\W</span></p></td><td class="cl-03af1632"><p class="cl-03aee70c"><span class="cl-03aa8630">No word characters: [^[:alnum:]_]</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-03af161f"><p class="cl-03aee70c"><span class="cl-03aa8630">\\s</span></p></td><td class="cl-03af1628"><p class="cl-03aee70c"><span class="cl-03aa8630">Space characters: [[:blank:]]</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-03af1629"><p class="cl-03aee70c"><span class="cl-03aa8630">\\S</span></p></td><td class="cl-03af1632"><p class="cl-03aee70c"><span class="cl-03aa8630">No space characters: [^[:blank:]]</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-03af161f"><p class="cl-03aee70c"><span class="cl-03aa8630">\\d</span></p></td><td class="cl-03af1628"><p class="cl-03aee70c"><span class="cl-03aa8630">Digits: [[:digit:]]</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-03af1629"><p class="cl-03aee70c"><span class="cl-03aa8630">\\D</span></p></td><td class="cl-03af1632"><p class="cl-03aee70c"><span class="cl-03aa8630">No digits: [^[:digit:]]</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-03af161f"><p class="cl-03aee70c"><span class="cl-03aa8630">\\b</span></p></td><td class="cl-03af1628"><p class="cl-03aee70c"><span class="cl-03aa8630">Word edge</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-03af1629"><p class="cl-03aee70c"><span class="cl-03aa8630">\\B</span></p></td><td class="cl-03af1632"><p class="cl-03aee70c"><span class="cl-03aa8630">No word edge</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-03af161f"><p class="cl-03aee70c"><span class="cl-03aa8630">&lt;</span></p></td><td class="cl-03af1628"><p class="cl-03aee70c"><span class="cl-03aa8630">Word beginning</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-03af1629"><p class="cl-03aee70c"><span class="cl-03aa8630">&gt;</span></p></td><td class="cl-03af1632"><p class="cl-03aee70c"><span class="cl-03aa8630">Word end</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-03af161f"><p class="cl-03aee70c"><span class="cl-03aa8630">^</span></p></td><td class="cl-03af1628"><p class="cl-03aee70c"><span class="cl-03aa8630">Beginning of a string</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-03af1633"><p class="cl-03aee70c"><span class="cl-03aa8630">$</span></p></td><td class="cl-03af163c"><p class="cl-03aee70c"><span class="cl-03aa8630">End of a string</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>To incorporate regular expressions into your KWIC searches, you include them in your search pattern and set the <code>valuetype</code> argument to <code>"regex"</code>. This allows you to specify complex search patterns that go beyond exact word matches.</p>
<p>For example, consider the search pattern <code>"\\balic.*|\\bhatt.*"</code>. In this pattern:</p>
<ul>
<li><code>\\b</code> indicates a word boundary, ensuring that the subsequent characters are at the beginning of a word.</li>
<li><code>alic.*</code> matches any sequence of characters (<code>.*</code>) that begins with <code>alic</code>.</li>
<li><code>hatt.*</code> matches any sequence of characters that begins with <code>hatt</code>.</li>
<li>The <code>|</code> operator functions as an OR operator, allowing the pattern to match either <code>alic.*</code> or <code>hatt.*</code>.</li>
</ul>
<p>As a result, this search pattern retrieves elements that contain <code>alic</code> or <code>hatt</code> followed by any characters, but only where <code>alic</code> and <code>hatt</code> are the first letters of a word. Consequently, words like “malice” or “shatter” would not be retrieved.</p>
<p>By uaing regular expressions in your KWIC searches, you can conduct more nuanced and precise searches, capturing specific patterns or variations within your text data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># define search patterns</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>patterns <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">balic.*|</span><span class="sc">\\</span><span class="st">bhatt.*"</span>)</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>kwic_regex <span class="ot">&lt;-</span> quanteda<span class="sc">::</span><span class="fu">kwic</span>(</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># define text</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>  quanteda<span class="sc">::</span><span class="fu">tokens</span>(text),</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># define search pattern</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>  patterns,</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># define valuetype</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">valuetype =</span> <span class="st">"regex"</span></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># make it a data frame</span></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-03e14102{table-layout:auto;width:95%;}.cl-03d70ea8{font-family:'Arial';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-03d70eb2{font-family:'Arial';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-03da7584{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-03da7598{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-03dacc82{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-03dacc8c{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-03dacc96{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-03dacc97{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-03dacca0{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-03dacca1{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-03daccaa{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-03daccab{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-03daccb4{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-03daccb5{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-03daccbe{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-03daccbf{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-03daccc8{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-03daccc9{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-03daccdc{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-03daccdd{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-03e14102"><thead><tr style="overflow-wrap:break-word;"><th class="cl-03dacc82"><p class="cl-03da7584"><span class="cl-03d70ea8">docname</span></p></th><th class="cl-03dacc8c"><p class="cl-03da7598"><span class="cl-03d70ea8">from</span></p></th><th class="cl-03dacc8c"><p class="cl-03da7598"><span class="cl-03d70ea8">to</span></p></th><th class="cl-03dacc96"><p class="cl-03da7584"><span class="cl-03d70ea8">pre</span></p></th><th class="cl-03dacc96"><p class="cl-03da7584"><span class="cl-03d70ea8">keyword</span></p></th><th class="cl-03dacc96"><p class="cl-03da7584"><span class="cl-03d70ea8">post</span></p></th><th class="cl-03dacc97"><p class="cl-03da7584"><span class="cl-03d70ea8">pattern</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-03dacca0"><p class="cl-03da7584"><span class="cl-03d70eb2">text1</span></p></td><td class="cl-03dacca1"><p class="cl-03da7598"><span class="cl-03d70eb2">4</span></p></td><td class="cl-03dacca1"><p class="cl-03da7598"><span class="cl-03d70eb2">4</span></p></td><td class="cl-03daccaa"><p class="cl-03da7584"><span class="cl-03d70eb2">Down the Rabbit-Hole</span></p></td><td class="cl-03daccaa"><p class="cl-03da7584"><span class="cl-03d70eb2">Alice</span></p></td><td class="cl-03daccaa"><p class="cl-03da7584"><span class="cl-03d70eb2">was beginning to get very</span></p></td><td class="cl-03daccab"><p class="cl-03da7584"><span class="cl-03d70eb2">\balic.*|\bhatt.*</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-03daccb4"><p class="cl-03da7584"><span class="cl-03d70eb2">text1</span></p></td><td class="cl-03daccb5"><p class="cl-03da7598"><span class="cl-03d70eb2">63</span></p></td><td class="cl-03daccb5"><p class="cl-03da7598"><span class="cl-03d70eb2">63</span></p></td><td class="cl-03daccbe"><p class="cl-03da7584"><span class="cl-03d70eb2">a book , ” thought</span></p></td><td class="cl-03daccbe"><p class="cl-03da7584"><span class="cl-03d70eb2">Alice</span></p></td><td class="cl-03daccbe"><p class="cl-03da7584"><span class="cl-03d70eb2">“ without pictures or conversations</span></p></td><td class="cl-03daccbf"><p class="cl-03da7584"><span class="cl-03d70eb2">\balic.*|\bhatt.*</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-03dacca0"><p class="cl-03da7584"><span class="cl-03d70eb2">text1</span></p></td><td class="cl-03dacca1"><p class="cl-03da7598"><span class="cl-03d70eb2">143</span></p></td><td class="cl-03dacca1"><p class="cl-03da7598"><span class="cl-03d70eb2">143</span></p></td><td class="cl-03daccaa"><p class="cl-03da7584"><span class="cl-03d70eb2">in that ; nor did</span></p></td><td class="cl-03daccaa"><p class="cl-03da7584"><span class="cl-03d70eb2">Alice</span></p></td><td class="cl-03daccaa"><p class="cl-03da7584"><span class="cl-03d70eb2">think it so _very_ much</span></p></td><td class="cl-03daccab"><p class="cl-03da7584"><span class="cl-03d70eb2">\balic.*|\bhatt.*</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-03daccb4"><p class="cl-03da7584"><span class="cl-03d70eb2">text1</span></p></td><td class="cl-03daccb5"><p class="cl-03da7598"><span class="cl-03d70eb2">229</span></p></td><td class="cl-03daccb5"><p class="cl-03da7598"><span class="cl-03d70eb2">229</span></p></td><td class="cl-03daccbe"><p class="cl-03da7584"><span class="cl-03d70eb2">and then hurried on ,</span></p></td><td class="cl-03daccbe"><p class="cl-03da7584"><span class="cl-03d70eb2">Alice</span></p></td><td class="cl-03daccbe"><p class="cl-03da7584"><span class="cl-03d70eb2">started to her feet ,</span></p></td><td class="cl-03daccbf"><p class="cl-03da7584"><span class="cl-03d70eb2">\balic.*|\bhatt.*</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-03dacca0"><p class="cl-03da7584"><span class="cl-03d70eb2">text1</span></p></td><td class="cl-03dacca1"><p class="cl-03da7598"><span class="cl-03d70eb2">299</span></p></td><td class="cl-03dacca1"><p class="cl-03da7598"><span class="cl-03d70eb2">299</span></p></td><td class="cl-03daccaa"><p class="cl-03da7584"><span class="cl-03d70eb2">In another moment down went</span></p></td><td class="cl-03daccaa"><p class="cl-03da7584"><span class="cl-03d70eb2">Alice</span></p></td><td class="cl-03daccaa"><p class="cl-03da7584"><span class="cl-03d70eb2">after it , never once</span></p></td><td class="cl-03daccab"><p class="cl-03da7584"><span class="cl-03d70eb2">\balic.*|\bhatt.*</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-03daccb4"><p class="cl-03da7584"><span class="cl-03d70eb2">text1</span></p></td><td class="cl-03daccb5"><p class="cl-03da7598"><span class="cl-03d70eb2">338</span></p></td><td class="cl-03daccb5"><p class="cl-03da7598"><span class="cl-03d70eb2">338</span></p></td><td class="cl-03daccbe"><p class="cl-03da7584"><span class="cl-03d70eb2">down , so suddenly that</span></p></td><td class="cl-03daccbe"><p class="cl-03da7584"><span class="cl-03d70eb2">Alice</span></p></td><td class="cl-03daccbe"><p class="cl-03da7584"><span class="cl-03d70eb2">had not a moment to</span></p></td><td class="cl-03daccbf"><p class="cl-03da7584"><span class="cl-03d70eb2">\balic.*|\bhatt.*</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-03dacca0"><p class="cl-03da7584"><span class="cl-03d70eb2">text1</span></p></td><td class="cl-03dacca1"><p class="cl-03da7598"><span class="cl-03d70eb2">521</span></p></td><td class="cl-03dacca1"><p class="cl-03da7598"><span class="cl-03d70eb2">521</span></p></td><td class="cl-03daccaa"><p class="cl-03da7584"><span class="cl-03d70eb2">“ Well ! ” thought</span></p></td><td class="cl-03daccaa"><p class="cl-03da7584"><span class="cl-03d70eb2">Alice</span></p></td><td class="cl-03daccaa"><p class="cl-03da7584"><span class="cl-03d70eb2">to herself , “ after</span></p></td><td class="cl-03daccab"><p class="cl-03da7584"><span class="cl-03d70eb2">\balic.*|\bhatt.*</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-03daccb4"><p class="cl-03da7584"><span class="cl-03d70eb2">text1</span></p></td><td class="cl-03daccb5"><p class="cl-03da7598"><span class="cl-03d70eb2">647</span></p></td><td class="cl-03daccb5"><p class="cl-03da7598"><span class="cl-03d70eb2">647</span></p></td><td class="cl-03daccbe"><p class="cl-03da7584"><span class="cl-03d70eb2">for , you see ,</span></p></td><td class="cl-03daccbe"><p class="cl-03da7584"><span class="cl-03d70eb2">Alice</span></p></td><td class="cl-03daccbe"><p class="cl-03da7584"><span class="cl-03d70eb2">had learnt several things of</span></p></td><td class="cl-03daccbf"><p class="cl-03da7584"><span class="cl-03d70eb2">\balic.*|\bhatt.*</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-03dacca0"><p class="cl-03da7584"><span class="cl-03d70eb2">text1</span></p></td><td class="cl-03dacca1"><p class="cl-03da7598"><span class="cl-03d70eb2">719</span></p></td><td class="cl-03dacca1"><p class="cl-03da7598"><span class="cl-03d70eb2">719</span></p></td><td class="cl-03daccaa"><p class="cl-03da7584"><span class="cl-03d70eb2">got to ? ” (</span></p></td><td class="cl-03daccaa"><p class="cl-03da7584"><span class="cl-03d70eb2">Alice</span></p></td><td class="cl-03daccaa"><p class="cl-03da7584"><span class="cl-03d70eb2">had no idea what Latitude</span></p></td><td class="cl-03daccab"><p class="cl-03da7584"><span class="cl-03d70eb2">\balic.*|\bhatt.*</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-03daccc8"><p class="cl-03da7584"><span class="cl-03d70eb2">text1</span></p></td><td class="cl-03daccc9"><p class="cl-03da7598"><span class="cl-03d70eb2">910</span></p></td><td class="cl-03daccc9"><p class="cl-03da7598"><span class="cl-03d70eb2">910</span></p></td><td class="cl-03daccdc"><p class="cl-03da7584"><span class="cl-03d70eb2">else to do , so</span></p></td><td class="cl-03daccdc"><p class="cl-03da7584"><span class="cl-03d70eb2">Alice</span></p></td><td class="cl-03daccdc"><p class="cl-03da7584"><span class="cl-03d70eb2">soon began talking again .</span></p></td><td class="cl-03daccdd"><p class="cl-03da7584"><span class="cl-03d70eb2">\balic.*|\bhatt.*</span></p></td></tr></tbody></table></div>
</div>
</div>
<hr>
<div class="warning" style="padding:0.1em; background-color:#51247a; color:#f2f2f2">
<span>
<p style="margin-top:1em; text-align:center">
<b>EXERCISE TIME!</b>
</p>
<p style="margin-left:1em;">
</p>
<p></p>
</span></div>
<div class="question">
<p>`</p>
<ol type="1">
<li>Extract the first 10 concordances for words containing <em>exu</em>.<br></li>
</ol>
<details>
<summary>
Answer
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>kwic_exu <span class="ot">&lt;-</span> quanteda<span class="sc">::</span><span class="fu">kwic</span>(<span class="at">x =</span> quanteda<span class="sc">::</span><span class="fu">tokens</span>(text), <span class="at">pattern =</span> <span class="st">".*exu.*"</span>, <span class="at">valuetype =</span> <span class="st">"regex"</span>)</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>kwic_exu <span class="sc">%&gt;%</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] docname from    to      pre     keyword post    pattern
&lt;0 rows&gt; (or 0-length row.names)</code></pre>
</div>
</div>
</details>
<ol start="2" type="1">
<li>How many instances are there of words beginning with <em>pit</em>?<br></li>
</ol>
<details>
<summary>
Answer
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>quanteda<span class="sc">::</span><span class="fu">kwic</span>(<span class="at">x =</span> quanteda<span class="sc">::</span><span class="fu">tokens</span>(text), <span class="at">pattern =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">bpit.*"</span>, <span class="at">valuetype =</span> <span class="st">"regex"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5</code></pre>
</div>
</div>
</details>
<ol start="3" type="1">
<li>Extract concordances for words ending with <em>ption</em> and show the first 5 concordance lines.<br></li>
</ol>
<details>
<summary>
Answer
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>quanteda<span class="sc">::</span><span class="fu">kwic</span>(<span class="at">x =</span> quanteda<span class="sc">::</span><span class="fu">tokens</span>(text), <span class="at">pattern =</span> <span class="st">"ption</span><span class="sc">\\</span><span class="st">b"</span>, <span class="at">valuetype =</span> <span class="st">"regex"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  docname from   to                         pre  keyword
1   text1 5775 5775 adjourn , for the immediate adoption
                          post  pattern
1 of more energetic remedies — ption\\b</code></pre>
</div>
</div>
</details>
</div>
<hr>
</section>
<section id="concordancing-and-piping" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="concordancing-and-piping">Concordancing and Piping</h2>
<p>Quite often, we want to retrieve patterns only if they occur in a specific context. For instance, we might be interested in instances of “alice”, but only if the preceding word is “poor” or “little”. While such conditional concordances could be extracted using regular expressions, they are more easily retrieved by piping.</p>
<p>Piping is achieved using the <code>%&gt;%</code> function from the <code>dplyr</code> package, and the piping sequence can be interpreted as “and then”. We can then filter those concordances that contain “alice” using the <code>filter</code> function from the <code>dplyr</code> package. Note that the <code>$</code> symbol stands for the end of a string, so “poor$” signifies that “poor” is the last element in the string that precedes the nodeword.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extract KWIC concordances</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>quanteda<span class="sc">::</span><span class="fu">kwic</span>(</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># input  tokenized text</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> quanteda<span class="sc">::</span><span class="fu">tokens</span>(text),</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># define search pattern ("alice")</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">pattern =</span> <span class="st">"alice"</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># pipe (and then)</span></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># convert result to data frame</span></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># filter concordances with "poor" or "little" preceding "alice"</span></span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># save result in object called "kwic_pipe"</span></span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(stringr<span class="sc">::</span><span class="fu">str_detect</span>(pre, <span class="st">"poor$|little$"</span>)) <span class="ot">-&gt;</span> kwic_pipe</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-0443497e{table-layout:auto;width:95%;}.cl-043990a0{font-family:'Arial';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-043990b4{font-family:'Arial';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-043d3e6c{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-043d3e76{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-043d5c30{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-043d5c3a{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-043d5c44{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-043d5c45{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-043d5c4e{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-043d5c4f{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-043d5c58{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-043d5c59{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-043d5c5a{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-043d5c62{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-043d5c63{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-043d5c6c{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-043d5c6d{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-043d5c76{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-043d5c77{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-043d5c78{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-0443497e"><thead><tr style="overflow-wrap:break-word;"><th class="cl-043d5c30"><p class="cl-043d3e6c"><span class="cl-043990a0">docname</span></p></th><th class="cl-043d5c3a"><p class="cl-043d3e76"><span class="cl-043990a0">from</span></p></th><th class="cl-043d5c3a"><p class="cl-043d3e76"><span class="cl-043990a0">to</span></p></th><th class="cl-043d5c44"><p class="cl-043d3e6c"><span class="cl-043990a0">pre</span></p></th><th class="cl-043d5c44"><p class="cl-043d3e6c"><span class="cl-043990a0">keyword</span></p></th><th class="cl-043d5c44"><p class="cl-043d3e6c"><span class="cl-043990a0">post</span></p></th><th class="cl-043d5c45"><p class="cl-043d3e6c"><span class="cl-043990a0">pattern</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-043d5c4e"><p class="cl-043d3e6c"><span class="cl-043990b4">text1</span></p></td><td class="cl-043d5c4f"><p class="cl-043d3e76"><span class="cl-043990b4">1,542</span></p></td><td class="cl-043d5c4f"><p class="cl-043d3e76"><span class="cl-043990b4">1,542</span></p></td><td class="cl-043d5c58"><p class="cl-043d3e6c"><span class="cl-043990b4">through , ” thought poor</span></p></td><td class="cl-043d5c58"><p class="cl-043d3e6c"><span class="cl-043990b4">Alice</span></p></td><td class="cl-043d5c58"><p class="cl-043d3e6c"><span class="cl-043990b4">, “ it would be</span></p></td><td class="cl-043d5c59"><p class="cl-043d3e6c"><span class="cl-043990b4">alice</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-043d5c5a"><p class="cl-043d3e6c"><span class="cl-043990b4">text1</span></p></td><td class="cl-043d5c62"><p class="cl-043d3e76"><span class="cl-043990b4">1,725</span></p></td><td class="cl-043d5c62"><p class="cl-043d3e76"><span class="cl-043990b4">1,725</span></p></td><td class="cl-043d5c63"><p class="cl-043d3e6c"><span class="cl-043990b4">” but the wise little</span></p></td><td class="cl-043d5c63"><p class="cl-043d3e6c"><span class="cl-043990b4">Alice</span></p></td><td class="cl-043d5c63"><p class="cl-043d3e6c"><span class="cl-043990b4">was not going to do</span></p></td><td class="cl-043d5c6c"><p class="cl-043d3e6c"><span class="cl-043990b4">alice</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-043d5c4e"><p class="cl-043d3e6c"><span class="cl-043990b4">text1</span></p></td><td class="cl-043d5c4f"><p class="cl-043d3e76"><span class="cl-043990b4">2,131</span></p></td><td class="cl-043d5c4f"><p class="cl-043d3e76"><span class="cl-043990b4">2,131</span></p></td><td class="cl-043d5c58"><p class="cl-043d3e6c"><span class="cl-043990b4">but , alas for poor</span></p></td><td class="cl-043d5c58"><p class="cl-043d3e6c"><span class="cl-043990b4">Alice</span></p></td><td class="cl-043d5c58"><p class="cl-043d3e6c"><span class="cl-043990b4">! when she got to</span></p></td><td class="cl-043d5c59"><p class="cl-043d3e6c"><span class="cl-043990b4">alice</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-043d5c5a"><p class="cl-043d3e6c"><span class="cl-043990b4">text1</span></p></td><td class="cl-043d5c62"><p class="cl-043d3e76"><span class="cl-043990b4">2,333</span></p></td><td class="cl-043d5c62"><p class="cl-043d3e76"><span class="cl-043990b4">2,333</span></p></td><td class="cl-043d5c63"><p class="cl-043d3e6c"><span class="cl-043990b4">now , ” thought poor</span></p></td><td class="cl-043d5c63"><p class="cl-043d3e6c"><span class="cl-043990b4">Alice</span></p></td><td class="cl-043d5c63"><p class="cl-043d3e6c"><span class="cl-043990b4">, “ to pretend to</span></p></td><td class="cl-043d5c6c"><p class="cl-043d3e6c"><span class="cl-043990b4">alice</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-043d5c4e"><p class="cl-043d3e6c"><span class="cl-043990b4">text1</span></p></td><td class="cl-043d5c4f"><p class="cl-043d3e76"><span class="cl-043990b4">3,605</span></p></td><td class="cl-043d5c4f"><p class="cl-043d3e76"><span class="cl-043990b4">3,605</span></p></td><td class="cl-043d5c58"><p class="cl-043d3e6c"><span class="cl-043990b4">words , ” said poor</span></p></td><td class="cl-043d5c58"><p class="cl-043d3e6c"><span class="cl-043990b4">Alice</span></p></td><td class="cl-043d5c58"><p class="cl-043d3e6c"><span class="cl-043990b4">, and her eyes filled</span></p></td><td class="cl-043d5c59"><p class="cl-043d3e6c"><span class="cl-043990b4">alice</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-043d5c5a"><p class="cl-043d3e6c"><span class="cl-043990b4">text1</span></p></td><td class="cl-043d5c62"><p class="cl-043d3e76"><span class="cl-043990b4">6,877</span></p></td><td class="cl-043d5c62"><p class="cl-043d3e76"><span class="cl-043990b4">6,877</span></p></td><td class="cl-043d5c63"><p class="cl-043d3e6c"><span class="cl-043990b4">it ! ” pleaded poor</span></p></td><td class="cl-043d5c63"><p class="cl-043d3e6c"><span class="cl-043990b4">Alice</span></p></td><td class="cl-043d5c63"><p class="cl-043d3e6c"><span class="cl-043990b4">. “ But you’re so</span></p></td><td class="cl-043d5c6c"><p class="cl-043d3e6c"><span class="cl-043990b4">alice</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-043d5c4e"><p class="cl-043d3e6c"><span class="cl-043990b4">text1</span></p></td><td class="cl-043d5c4f"><p class="cl-043d3e76"><span class="cl-043990b4">7,291</span></p></td><td class="cl-043d5c4f"><p class="cl-043d3e76"><span class="cl-043990b4">7,291</span></p></td><td class="cl-043d5c58"><p class="cl-043d3e6c"><span class="cl-043990b4">! ” And here poor</span></p></td><td class="cl-043d5c58"><p class="cl-043d3e6c"><span class="cl-043990b4">Alice</span></p></td><td class="cl-043d5c58"><p class="cl-043d3e6c"><span class="cl-043990b4">began to cry again ,</span></p></td><td class="cl-043d5c59"><p class="cl-043d3e6c"><span class="cl-043990b4">alice</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-043d5c5a"><p class="cl-043d3e6c"><span class="cl-043990b4">text1</span></p></td><td class="cl-043d5c62"><p class="cl-043d3e76"><span class="cl-043990b4">8,240</span></p></td><td class="cl-043d5c62"><p class="cl-043d3e76"><span class="cl-043990b4">8,240</span></p></td><td class="cl-043d5c63"><p class="cl-043d3e6c"><span class="cl-043990b4">home , ” thought poor</span></p></td><td class="cl-043d5c63"><p class="cl-043d3e6c"><span class="cl-043990b4">Alice</span></p></td><td class="cl-043d5c63"><p class="cl-043d3e6c"><span class="cl-043990b4">, “ when one wasn’t</span></p></td><td class="cl-043d5c6c"><p class="cl-043d3e6c"><span class="cl-043990b4">alice</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-043d5c4e"><p class="cl-043d3e6c"><span class="cl-043990b4">text1</span></p></td><td class="cl-043d5c4f"><p class="cl-043d3e76"><span class="cl-043990b4">11,789</span></p></td><td class="cl-043d5c4f"><p class="cl-043d3e76"><span class="cl-043990b4">11,789</span></p></td><td class="cl-043d5c58"><p class="cl-043d3e6c"><span class="cl-043990b4">it ! ” pleaded poor</span></p></td><td class="cl-043d5c58"><p class="cl-043d3e6c"><span class="cl-043990b4">Alice</span></p></td><td class="cl-043d5c58"><p class="cl-043d3e6c"><span class="cl-043990b4">in a piteous tone .</span></p></td><td class="cl-043d5c59"><p class="cl-043d3e6c"><span class="cl-043990b4">alice</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-043d5c6d"><p class="cl-043d3e6c"><span class="cl-043990b4">text1</span></p></td><td class="cl-043d5c76"><p class="cl-043d3e76"><span class="cl-043990b4">19,142</span></p></td><td class="cl-043d5c76"><p class="cl-043d3e76"><span class="cl-043990b4">19,142</span></p></td><td class="cl-043d5c77"><p class="cl-043d3e6c"><span class="cl-043990b4">This answer so confused poor</span></p></td><td class="cl-043d5c77"><p class="cl-043d3e6c"><span class="cl-043990b4">Alice</span></p></td><td class="cl-043d5c77"><p class="cl-043d3e6c"><span class="cl-043990b4">, that she let the</span></p></td><td class="cl-043d5c78"><p class="cl-043d3e6c"><span class="cl-043990b4">alice</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>In this code:</p>
<ul>
<li><code>quanteda::kwic</code>: This function extracts KWIC concordances from the input text.</li>
<li><code>quanteda::tokens(text)</code>: The input text is tokenized using the <code>tokens</code> function from the <code>quanteda</code> package.</li>
<li><code>pattern = "alice"</code>: Specifies the search pattern as “alice”.</li>
<li><code>%&gt;%</code>: The pipe operator (<code>%&gt;%</code>) chains together multiple operations, passing the result of one operation as the input to the next.</li>
<li><code>as.data.frame()</code>: Converts the resulting concordance object into a data frame.</li>
<li><code>dplyr::filter(...)</code>: Filters the concordances based on the specified condition, which is whether “poor” or “little” precedes “alice”.</li>
</ul>
<p>Piping is an indispensable tool in R, commonly used across various data science domains, including text processing. This powerful function, denoted by <code>%&gt;%</code>, allows for a more streamlined and readable workflow by chaining together multiple operations in a sequential manner.</p>
<p>Instead of nesting functions or creating intermediate variables, piping allows to take an easy-to-understand and more intuitive approach to data manipulation and analysis. With piping, each operation is performed “and then” the next, leading to code that is easier to understand and maintain.</p>
<p>While piping is frequently used in the context of text processing, its versatility extends far beyond. In data wrangling, modeling, visualization, and beyond, piping offers a concise and elegant solution for composing complex workflows.</p>
<p>By leveraging piping, R users can enhance their productivity and efficiency, making their code more expressive and succinct while maintaining clarity and readability. It’s a fundamental tool in the toolkit of every R programmer, empowering them to tackle data science challenges with confidence and ease.</p>
</section>
<section id="ordering-and-arranging-kwics" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="ordering-and-arranging-kwics">Ordering and Arranging KWICs</h2>
<p>When examining concordances, it’s often beneficial to reorder them based on their context rather than the order in which they appeared in the text or texts. This allows for a more organized and structured analysis of the data. To reorder concordances, we can utilize the <code>arrange</code> function from the <code>dplyr</code> package, which takes the column according to which we want to rearrange the data as its main argument.</p>
<section id="ordering-alphabetically" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="ordering-alphabetically">Ordering Alphabetically</h3>
<p>In the example below, we extract all instances of “alice” and then arrange the instances according to the content of the post column in alphabetical order.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extract KWIC concordances</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>quanteda<span class="sc">::</span><span class="fu">kwic</span>(</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># input  tokenized text</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> quanteda<span class="sc">::</span><span class="fu">tokens</span>(text),</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># define search pattern ("alice")</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">pattern =</span> <span class="st">"alice"</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># end function and pipe (and then)</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># convert result to data frame</span></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># arrange concordances based on the content of the "post" column</span></span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># save result in object called "kwic_ordered"</span></span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(post) <span class="ot">-&gt;</span> kwic_ordered</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-0472eb98{table-layout:auto;width:95%;}.cl-0468fe26{font-family:'Arial';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-0468fe3a{font-family:'Arial';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-046c7c68{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-046c7c72{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-046ca40e{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-046ca418{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-046ca419{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-046ca422{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-046ca42c{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-046ca42d{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-046ca436{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-046ca437{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-046ca440{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-046ca441{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-046ca442{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-046ca443{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-046ca44a{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-046ca44b{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-046ca44c{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-046ca454{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-0472eb98"><thead><tr style="overflow-wrap:break-word;"><th class="cl-046ca40e"><p class="cl-046c7c68"><span class="cl-0468fe26">docname</span></p></th><th class="cl-046ca418"><p class="cl-046c7c72"><span class="cl-0468fe26">from</span></p></th><th class="cl-046ca418"><p class="cl-046c7c72"><span class="cl-0468fe26">to</span></p></th><th class="cl-046ca419"><p class="cl-046c7c68"><span class="cl-0468fe26">pre</span></p></th><th class="cl-046ca419"><p class="cl-046c7c68"><span class="cl-0468fe26">keyword</span></p></th><th class="cl-046ca419"><p class="cl-046c7c68"><span class="cl-0468fe26">post</span></p></th><th class="cl-046ca422"><p class="cl-046c7c68"><span class="cl-0468fe26">pattern</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-046ca42c"><p class="cl-046c7c68"><span class="cl-0468fe3a">text1</span></p></td><td class="cl-046ca42d"><p class="cl-046c7c72"><span class="cl-0468fe3a">7,754</span></p></td><td class="cl-046ca42d"><p class="cl-046c7c72"><span class="cl-0468fe3a">7,754</span></p></td><td class="cl-046ca436"><p class="cl-046c7c68"><span class="cl-0468fe3a">happen : “ ‘ Miss</span></p></td><td class="cl-046ca436"><p class="cl-046c7c68"><span class="cl-0468fe3a">Alice</span></p></td><td class="cl-046ca436"><p class="cl-046c7c68"><span class="cl-0468fe3a">! Come here directly ,</span></p></td><td class="cl-046ca437"><p class="cl-046c7c68"><span class="cl-0468fe3a">alice</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-046ca440"><p class="cl-046c7c68"><span class="cl-0468fe3a">text1</span></p></td><td class="cl-046ca441"><p class="cl-046c7c72"><span class="cl-0468fe3a">2,888</span></p></td><td class="cl-046ca441"><p class="cl-046c7c72"><span class="cl-0468fe3a">2,888</span></p></td><td class="cl-046ca442"><p class="cl-046c7c68"><span class="cl-0468fe3a">the garden door . Poor</span></p></td><td class="cl-046ca442"><p class="cl-046c7c68"><span class="cl-0468fe3a">Alice</span></p></td><td class="cl-046ca442"><p class="cl-046c7c68"><span class="cl-0468fe3a">! It was as much</span></p></td><td class="cl-046ca443"><p class="cl-046c7c68"><span class="cl-0468fe3a">alice</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-046ca42c"><p class="cl-046c7c68"><span class="cl-0468fe3a">text1</span></p></td><td class="cl-046ca42d"><p class="cl-046c7c72"><span class="cl-0468fe3a">2,131</span></p></td><td class="cl-046ca42d"><p class="cl-046c7c72"><span class="cl-0468fe3a">2,131</span></p></td><td class="cl-046ca436"><p class="cl-046c7c68"><span class="cl-0468fe3a">but , alas for poor</span></p></td><td class="cl-046ca436"><p class="cl-046c7c68"><span class="cl-0468fe3a">Alice</span></p></td><td class="cl-046ca436"><p class="cl-046c7c68"><span class="cl-0468fe3a">! when she got to</span></p></td><td class="cl-046ca437"><p class="cl-046c7c68"><span class="cl-0468fe3a">alice</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-046ca440"><p class="cl-046c7c68"><span class="cl-0468fe3a">text1</span></p></td><td class="cl-046ca441"><p class="cl-046c7c72"><span class="cl-0468fe3a">30,891</span></p></td><td class="cl-046ca441"><p class="cl-046c7c72"><span class="cl-0468fe3a">30,891</span></p></td><td class="cl-046ca442"><p class="cl-046c7c68"><span class="cl-0468fe3a">voice , the name “</span></p></td><td class="cl-046ca442"><p class="cl-046c7c68"><span class="cl-0468fe3a">Alice</span></p></td><td class="cl-046ca442"><p class="cl-046c7c68"><span class="cl-0468fe3a">! ” CHAPTER XII .</span></p></td><td class="cl-046ca443"><p class="cl-046c7c68"><span class="cl-0468fe3a">alice</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-046ca42c"><p class="cl-046c7c68"><span class="cl-0468fe3a">text1</span></p></td><td class="cl-046ca42d"><p class="cl-046c7c72"><span class="cl-0468fe3a">8,423</span></p></td><td class="cl-046ca42d"><p class="cl-046c7c72"><span class="cl-0468fe3a">8,423</span></p></td><td class="cl-046ca436"><p class="cl-046c7c68"><span class="cl-0468fe3a">“ Oh , you foolish</span></p></td><td class="cl-046ca436"><p class="cl-046c7c68"><span class="cl-0468fe3a">Alice</span></p></td><td class="cl-046ca436"><p class="cl-046c7c68"><span class="cl-0468fe3a">! ” she answered herself</span></p></td><td class="cl-046ca437"><p class="cl-046c7c68"><span class="cl-0468fe3a">alice</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-046ca440"><p class="cl-046c7c68"><span class="cl-0468fe3a">text1</span></p></td><td class="cl-046ca441"><p class="cl-046c7c72"><span class="cl-0468fe3a">2,606</span></p></td><td class="cl-046ca441"><p class="cl-046c7c72"><span class="cl-0468fe3a">2,606</span></p></td><td class="cl-046ca442"><p class="cl-046c7c68"><span class="cl-0468fe3a">and curiouser ! ” cried</span></p></td><td class="cl-046ca442"><p class="cl-046c7c68"><span class="cl-0468fe3a">Alice</span></p></td><td class="cl-046ca442"><p class="cl-046c7c68"><span class="cl-0468fe3a">( she was so much</span></p></td><td class="cl-046ca443"><p class="cl-046c7c68"><span class="cl-0468fe3a">alice</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-046ca42c"><p class="cl-046c7c68"><span class="cl-0468fe3a">text1</span></p></td><td class="cl-046ca42d"><p class="cl-046c7c72"><span class="cl-0468fe3a">25,861</span></p></td><td class="cl-046ca42d"><p class="cl-046c7c72"><span class="cl-0468fe3a">25,861</span></p></td><td class="cl-046ca436"><p class="cl-046c7c68"><span class="cl-0468fe3a">I haven’t , ” said</span></p></td><td class="cl-046ca436"><p class="cl-046c7c68"><span class="cl-0468fe3a">Alice</span></p></td><td class="cl-046ca436"><p class="cl-046c7c68"><span class="cl-0468fe3a">) — “ and perhaps</span></p></td><td class="cl-046ca437"><p class="cl-046c7c68"><span class="cl-0468fe3a">alice</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-046ca440"><p class="cl-046c7c68"><span class="cl-0468fe3a">text1</span></p></td><td class="cl-046ca441"><p class="cl-046c7c72"><span class="cl-0468fe3a">32,275</span></p></td><td class="cl-046ca441"><p class="cl-046c7c72"><span class="cl-0468fe3a">32,275</span></p></td><td class="cl-046ca442"><p class="cl-046c7c68"><span class="cl-0468fe3a">explain it , ” said</span></p></td><td class="cl-046ca442"><p class="cl-046c7c68"><span class="cl-0468fe3a">Alice</span></p></td><td class="cl-046ca442"><p class="cl-046c7c68"><span class="cl-0468fe3a">, ( she had grown</span></p></td><td class="cl-046ca443"><p class="cl-046c7c68"><span class="cl-0468fe3a">alice</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-046ca42c"><p class="cl-046c7c68"><span class="cl-0468fe3a">text1</span></p></td><td class="cl-046ca42d"><p class="cl-046c7c72"><span class="cl-0468fe3a">32,843</span></p></td><td class="cl-046ca42d"><p class="cl-046c7c72"><span class="cl-0468fe3a">32,843</span></p></td><td class="cl-046ca436"><p class="cl-046c7c68"><span class="cl-0468fe3a">for you ? ” said</span></p></td><td class="cl-046ca436"><p class="cl-046c7c68"><span class="cl-0468fe3a">Alice</span></p></td><td class="cl-046ca436"><p class="cl-046c7c68"><span class="cl-0468fe3a">, ( she had grown</span></p></td><td class="cl-046ca437"><p class="cl-046c7c68"><span class="cl-0468fe3a">alice</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-046ca44a"><p class="cl-046c7c68"><span class="cl-0468fe3a">text1</span></p></td><td class="cl-046ca44b"><p class="cl-046c7c72"><span class="cl-0468fe3a">1,678</span></p></td><td class="cl-046ca44b"><p class="cl-046c7c72"><span class="cl-0468fe3a">1,678</span></p></td><td class="cl-046ca44c"><p class="cl-046c7c68"><span class="cl-0468fe3a">here before , ” said</span></p></td><td class="cl-046ca44c"><p class="cl-046c7c68"><span class="cl-0468fe3a">Alice</span></p></td><td class="cl-046ca44c"><p class="cl-046c7c68"><span class="cl-0468fe3a">, ) and round the</span></p></td><td class="cl-046ca454"><p class="cl-046c7c68"><span class="cl-0468fe3a">alice</span></p></td></tr></tbody></table></div>
</div>
</div>
</section>
<section id="ordering-by-co-occurrence-frequency" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="ordering-by-co-occurrence-frequency">Ordering by Co-Occurrence Frequency</h3>
<p>Arranging concordances based on alphabetical properties may not always be the most informative approach. A more insightful option is to arrange concordances according to the frequency of co-occurring terms or collocates. This allows us to identify the most common words that appear alongside our search term, providing valuable insights into its usage patterns.</p>
<p>To accomplish this, we need to follow these steps:</p>
<ol type="1">
<li><p>Create a new variable or column that represents the word that co-occurs with the search term. In the example below, we use the <code>mutate</code> function from the <code>dplyr</code> package to create a new column called <code>post_word</code>. We then use the <code>str_remove_all</code> function from the <code>stringr</code> package to extract the word that immediately follows the search term. This is achieved by removing everything except for the word following the search term (including any white space).</p></li>
<li><p>Group the data by the word that immediately follows the search term.</p></li>
<li><p>Create a new column called <code>post_word_freq</code> that represents the frequencies of all the words that immediately follow the search term.</p></li>
<li><p>Arrange the concordances by the frequency of the collocates in descending order. This is accomplished by using the <code>arrange</code> function and specifying the column <code>post_word_freq</code> in descending order (indicated by the <code>-</code> symbol).</p></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>quanteda<span class="sc">::</span><span class="fu">kwic</span>(</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># define text</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> quanteda<span class="sc">::</span><span class="fu">tokens</span>(text),</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># define search pattern</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">pattern =</span> <span class="st">"alice"</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># make it a data frame</span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># extract word following the nodeword</span></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">post1 =</span> <span class="fu">str_remove_all</span>(post, <span class="st">" .*"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># group following words</span></span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(post1) <span class="sc">%&gt;%</span></span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># extract frequencies of the following words</span></span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">post1_freq =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># arrange/order by the frequency of the following word</span></span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="sc">-</span>post1_freq) <span class="ot">-&gt;</span> kwic_ordered_coll</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-04a7a568{table-layout:auto;width:95%;}.cl-049b6a6e{font-family:'Arial';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-049b6a82{font-family:'Arial';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-049f4e0e{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-049f4e18{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-049f6d62{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-049f6d6c{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-049f6d76{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-049f6d77{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-049f6d80{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-049f6d81{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-049f6d8a{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-049f6d8b{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-049f6d94{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-049f6d95{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-049f6d9e{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-049f6d9f{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-049f6da8{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-049f6da9{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-049f6db2{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-049f6db3{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-04a7a568"><thead><tr style="overflow-wrap:break-word;"><th class="cl-049f6d62"><p class="cl-049f4e0e"><span class="cl-049b6a6e">docname</span></p></th><th class="cl-049f6d6c"><p class="cl-049f4e18"><span class="cl-049b6a6e">from</span></p></th><th class="cl-049f6d6c"><p class="cl-049f4e18"><span class="cl-049b6a6e">to</span></p></th><th class="cl-049f6d76"><p class="cl-049f4e0e"><span class="cl-049b6a6e">pre</span></p></th><th class="cl-049f6d76"><p class="cl-049f4e0e"><span class="cl-049b6a6e">keyword</span></p></th><th class="cl-049f6d76"><p class="cl-049f4e0e"><span class="cl-049b6a6e">post</span></p></th><th class="cl-049f6d76"><p class="cl-049f4e0e"><span class="cl-049b6a6e">pattern</span></p></th><th class="cl-049f6d76"><p class="cl-049f4e0e"><span class="cl-049b6a6e">post1</span></p></th><th class="cl-049f6d77"><p class="cl-049f4e18"><span class="cl-049b6a6e">post1_freq</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-049f6d80"><p class="cl-049f4e0e"><span class="cl-049b6a82">text1</span></p></td><td class="cl-049f6d81"><p class="cl-049f4e18"><span class="cl-049b6a82">1,542</span></p></td><td class="cl-049f6d81"><p class="cl-049f4e18"><span class="cl-049b6a82">1,542</span></p></td><td class="cl-049f6d8a"><p class="cl-049f4e0e"><span class="cl-049b6a82">through , ” thought poor</span></p></td><td class="cl-049f6d8a"><p class="cl-049f4e0e"><span class="cl-049b6a82">Alice</span></p></td><td class="cl-049f6d8a"><p class="cl-049f4e0e"><span class="cl-049b6a82">, “ it would be</span></p></td><td class="cl-049f6d8a"><p class="cl-049f4e0e"><span class="cl-049b6a82">alice</span></p></td><td class="cl-049f6d8a"><p class="cl-049f4e0e"><span class="cl-049b6a82">,</span></p></td><td class="cl-049f6d8b"><p class="cl-049f4e18"><span class="cl-049b6a82">78</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-049f6d94"><p class="cl-049f4e0e"><span class="cl-049b6a82">text1</span></p></td><td class="cl-049f6d95"><p class="cl-049f4e18"><span class="cl-049b6a82">1,678</span></p></td><td class="cl-049f6d95"><p class="cl-049f4e18"><span class="cl-049b6a82">1,678</span></p></td><td class="cl-049f6d9e"><p class="cl-049f4e0e"><span class="cl-049b6a82">here before , ” said</span></p></td><td class="cl-049f6d9e"><p class="cl-049f4e0e"><span class="cl-049b6a82">Alice</span></p></td><td class="cl-049f6d9e"><p class="cl-049f4e0e"><span class="cl-049b6a82">, ) and round the</span></p></td><td class="cl-049f6d9e"><p class="cl-049f4e0e"><span class="cl-049b6a82">alice</span></p></td><td class="cl-049f6d9e"><p class="cl-049f4e0e"><span class="cl-049b6a82">,</span></p></td><td class="cl-049f6d9f"><p class="cl-049f4e18"><span class="cl-049b6a82">78</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-049f6d80"><p class="cl-049f4e0e"><span class="cl-049b6a82">text1</span></p></td><td class="cl-049f6d81"><p class="cl-049f4e18"><span class="cl-049b6a82">2,333</span></p></td><td class="cl-049f6d81"><p class="cl-049f4e18"><span class="cl-049b6a82">2,333</span></p></td><td class="cl-049f6d8a"><p class="cl-049f4e0e"><span class="cl-049b6a82">now , ” thought poor</span></p></td><td class="cl-049f6d8a"><p class="cl-049f4e0e"><span class="cl-049b6a82">Alice</span></p></td><td class="cl-049f6d8a"><p class="cl-049f4e0e"><span class="cl-049b6a82">, “ to pretend to</span></p></td><td class="cl-049f6d8a"><p class="cl-049f4e0e"><span class="cl-049b6a82">alice</span></p></td><td class="cl-049f6d8a"><p class="cl-049f4e0e"><span class="cl-049b6a82">,</span></p></td><td class="cl-049f6d8b"><p class="cl-049f4e18"><span class="cl-049b6a82">78</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-049f6d94"><p class="cl-049f4e0e"><span class="cl-049b6a82">text1</span></p></td><td class="cl-049f6d95"><p class="cl-049f4e18"><span class="cl-049b6a82">2,410</span></p></td><td class="cl-049f6d95"><p class="cl-049f4e18"><span class="cl-049b6a82">2,410</span></p></td><td class="cl-049f6d9e"><p class="cl-049f4e0e"><span class="cl-049b6a82">eat it , ” said</span></p></td><td class="cl-049f6d9e"><p class="cl-049f4e0e"><span class="cl-049b6a82">Alice</span></p></td><td class="cl-049f6d9e"><p class="cl-049f4e0e"><span class="cl-049b6a82">, “ and if it</span></p></td><td class="cl-049f6d9e"><p class="cl-049f4e0e"><span class="cl-049b6a82">alice</span></p></td><td class="cl-049f6d9e"><p class="cl-049f4e0e"><span class="cl-049b6a82">,</span></p></td><td class="cl-049f6d9f"><p class="cl-049f4e18"><span class="cl-049b6a82">78</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-049f6d80"><p class="cl-049f4e0e"><span class="cl-049b6a82">text1</span></p></td><td class="cl-049f6d81"><p class="cl-049f4e18"><span class="cl-049b6a82">2,739</span></p></td><td class="cl-049f6d81"><p class="cl-049f4e18"><span class="cl-049b6a82">2,739</span></p></td><td class="cl-049f6d8a"><p class="cl-049f4e0e"><span class="cl-049b6a82">to them , ” thought</span></p></td><td class="cl-049f6d8a"><p class="cl-049f4e0e"><span class="cl-049b6a82">Alice</span></p></td><td class="cl-049f6d8a"><p class="cl-049f4e0e"><span class="cl-049b6a82">, “ or perhaps they</span></p></td><td class="cl-049f6d8a"><p class="cl-049f4e0e"><span class="cl-049b6a82">alice</span></p></td><td class="cl-049f6d8a"><p class="cl-049f4e0e"><span class="cl-049b6a82">,</span></p></td><td class="cl-049f6d8b"><p class="cl-049f4e18"><span class="cl-049b6a82">78</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-049f6d94"><p class="cl-049f4e0e"><span class="cl-049b6a82">text1</span></p></td><td class="cl-049f6d95"><p class="cl-049f4e18"><span class="cl-049b6a82">2,945</span></p></td><td class="cl-049f6d95"><p class="cl-049f4e18"><span class="cl-049b6a82">2,945</span></p></td><td class="cl-049f6d9e"><p class="cl-049f4e0e"><span class="cl-049b6a82">of yourself , ” said</span></p></td><td class="cl-049f6d9e"><p class="cl-049f4e0e"><span class="cl-049b6a82">Alice</span></p></td><td class="cl-049f6d9e"><p class="cl-049f4e0e"><span class="cl-049b6a82">, “ a great girl</span></p></td><td class="cl-049f6d9e"><p class="cl-049f4e0e"><span class="cl-049b6a82">alice</span></p></td><td class="cl-049f6d9e"><p class="cl-049f4e0e"><span class="cl-049b6a82">,</span></p></td><td class="cl-049f6d9f"><p class="cl-049f4e18"><span class="cl-049b6a82">78</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-049f6d80"><p class="cl-049f4e0e"><span class="cl-049b6a82">text1</span></p></td><td class="cl-049f6d81"><p class="cl-049f4e18"><span class="cl-049b6a82">3,605</span></p></td><td class="cl-049f6d81"><p class="cl-049f4e18"><span class="cl-049b6a82">3,605</span></p></td><td class="cl-049f6d8a"><p class="cl-049f4e0e"><span class="cl-049b6a82">words , ” said poor</span></p></td><td class="cl-049f6d8a"><p class="cl-049f4e0e"><span class="cl-049b6a82">Alice</span></p></td><td class="cl-049f6d8a"><p class="cl-049f4e0e"><span class="cl-049b6a82">, and her eyes filled</span></p></td><td class="cl-049f6d8a"><p class="cl-049f4e0e"><span class="cl-049b6a82">alice</span></p></td><td class="cl-049f6d8a"><p class="cl-049f4e0e"><span class="cl-049b6a82">,</span></p></td><td class="cl-049f6d8b"><p class="cl-049f4e18"><span class="cl-049b6a82">78</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-049f6d94"><p class="cl-049f4e0e"><span class="cl-049b6a82">text1</span></p></td><td class="cl-049f6d95"><p class="cl-049f4e18"><span class="cl-049b6a82">3,751</span></p></td><td class="cl-049f6d95"><p class="cl-049f4e18"><span class="cl-049b6a82">3,751</span></p></td><td class="cl-049f6d9e"><p class="cl-049f4e0e"><span class="cl-049b6a82">oh dear ! ” cried</span></p></td><td class="cl-049f6d9e"><p class="cl-049f4e0e"><span class="cl-049b6a82">Alice</span></p></td><td class="cl-049f6d9e"><p class="cl-049f4e0e"><span class="cl-049b6a82">, with a sudden burst</span></p></td><td class="cl-049f6d9e"><p class="cl-049f4e0e"><span class="cl-049b6a82">alice</span></p></td><td class="cl-049f6d9e"><p class="cl-049f4e0e"><span class="cl-049b6a82">,</span></p></td><td class="cl-049f6d9f"><p class="cl-049f4e18"><span class="cl-049b6a82">78</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-049f6d80"><p class="cl-049f4e0e"><span class="cl-049b6a82">text1</span></p></td><td class="cl-049f6d81"><p class="cl-049f4e18"><span class="cl-049b6a82">3,918</span></p></td><td class="cl-049f6d81"><p class="cl-049f4e18"><span class="cl-049b6a82">3,918</span></p></td><td class="cl-049f6d8a"><p class="cl-049f4e0e"><span class="cl-049b6a82">narrow escape ! ” said</span></p></td><td class="cl-049f6d8a"><p class="cl-049f4e0e"><span class="cl-049b6a82">Alice</span></p></td><td class="cl-049f6d8a"><p class="cl-049f4e0e"><span class="cl-049b6a82">, a good deal frightened</span></p></td><td class="cl-049f6d8a"><p class="cl-049f4e0e"><span class="cl-049b6a82">alice</span></p></td><td class="cl-049f6d8a"><p class="cl-049f4e0e"><span class="cl-049b6a82">,</span></p></td><td class="cl-049f6d8b"><p class="cl-049f4e18"><span class="cl-049b6a82">78</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-049f6da8"><p class="cl-049f4e0e"><span class="cl-049b6a82">text1</span></p></td><td class="cl-049f6da9"><p class="cl-049f4e18"><span class="cl-049b6a82">4,181</span></p></td><td class="cl-049f6da9"><p class="cl-049f4e18"><span class="cl-049b6a82">4,181</span></p></td><td class="cl-049f6db2"><p class="cl-049f4e0e"><span class="cl-049b6a82">so much ! ” said</span></p></td><td class="cl-049f6db2"><p class="cl-049f4e0e"><span class="cl-049b6a82">Alice</span></p></td><td class="cl-049f6db2"><p class="cl-049f4e0e"><span class="cl-049b6a82">, as she swam about</span></p></td><td class="cl-049f6db2"><p class="cl-049f4e0e"><span class="cl-049b6a82">alice</span></p></td><td class="cl-049f6db2"><p class="cl-049f4e0e"><span class="cl-049b6a82">,</span></p></td><td class="cl-049f6db3"><p class="cl-049f4e18"><span class="cl-049b6a82">78</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>In this code:</p>
<ul>
<li><code>mutate</code>: This function from the <code>dplyr</code> package creates a new column in the data frame.</li>
<li><code>str_remove_all</code>: This function from the <code>stringr</code> package removes all occurrences of a specified pattern from a character string.</li>
<li><code>group_by</code>: This function from the <code>dplyr</code> package groups the data by a specified variable.</li>
<li><code>n()</code>: This function from the <code>dplyr</code> package calculates the number of observations in each group.</li>
<li><code>arrange</code>: This function from the <code>dplyr</code> package arranges the rows of a data frame based on the values of one or more columns.</li>
</ul>
<p>We add more columns according to which we could arrange the concordance following the same schema. For example, we could add another column that represented the frequency of words that immediately preceded the search term and then arrange according to this column.</p>
</section>
</section>
<section id="ordering-by-multiple-co-occurrence-frequencies" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="ordering-by-multiple-co-occurrence-frequencies">Ordering by Multiple Co-Occurrence Frequencies</h2>
<p>In this section, we extract the three words preceding and following the nodeword “alice” from the concordance data and organize the results by the frequencies of the following words (you can also order by the preceding words which is why we also extract them).</p>
<p>We begin by iterating through each row of the concordance data using <code>rowwise()</code>. Then, we extract the three words following the nodeword (“alice”) and the three words preceding it from the <code>post</code> and <code>pre</code> columns, respectively. These words are split using the <code>strsplit</code> function and stored in separate columns (<code>post1</code>, <code>post2</code>, <code>post3</code>, <code>pre1</code>, <code>pre2</code>, <code>pre3</code>).</p>
<p>Next, we group the data by each of the following words (<code>post1</code>, <code>post2</code>, <code>post3</code>, <code>pre1</code>, <code>pre2</code>, <code>pre3</code>) and calculate the frequency of each word using the <code>n()</code> function within each group. This allows us to determine how often each word occurs in relation to the nodeword “alice”.</p>
<p>Finally, we arrange the concordances based on the frequencies of the following words (<code>post1</code>, <code>post2</code>, <code>post3</code>) in descending order using the <code>arrange()</code> function, storing the result in the <code>mykwic_following</code> data frame.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>mykwic <span class="sc">%&gt;%</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rowwise</span>() <span class="sc">%&gt;%</span> <span class="co"># Row-wise operation for each entry</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extract words preceding and following the node word</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extracting the first word following the node word</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">post1 =</span> <span class="fu">unlist</span>(<span class="fu">strsplit</span>(post, <span class="st">" "</span>))[<span class="dv">1</span>],</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Extracting the second word following the node word</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">post2 =</span> <span class="fu">unlist</span>(<span class="fu">strsplit</span>(post, <span class="st">" "</span>))[<span class="dv">2</span>],</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Extracting the third word following the node word</span></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">post3 =</span> <span class="fu">unlist</span>(<span class="fu">strsplit</span>(post, <span class="st">" "</span>))[<span class="dv">3</span>],</span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Extracting the last word preceding the node word</span></span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">pre1 =</span> <span class="fu">unlist</span>(<span class="fu">strsplit</span>(pre, <span class="st">" "</span>))[<span class="fu">length</span>(<span class="fu">unlist</span>(<span class="fu">strsplit</span>(pre, <span class="st">" "</span>)))],</span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Extracting the second-to-last word preceding the node word</span></span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">pre2 =</span> <span class="fu">unlist</span>(<span class="fu">strsplit</span>(pre, <span class="st">" "</span>))[<span class="fu">length</span>(<span class="fu">unlist</span>(<span class="fu">strsplit</span>(pre, <span class="st">" "</span>))) <span class="sc">-</span> <span class="dv">1</span>],</span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Extracting the third-to-last word preceding the node word</span></span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">pre3 =</span> <span class="fu">unlist</span>(<span class="fu">strsplit</span>(pre, <span class="st">" "</span>))[<span class="fu">length</span>(<span class="fu">unlist</span>(<span class="fu">strsplit</span>(pre, <span class="st">" "</span>))) <span class="sc">-</span> <span class="dv">2</span>]</span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extract frequencies of the words around the node word</span></span>
<span id="cb37-19"><a href="#cb37-19" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Grouping by the first word following the node word and counting its frequency</span></span>
<span id="cb37-20"><a href="#cb37-20" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(post1) <span class="sc">%&gt;%</span></span>
<span id="cb37-21"><a href="#cb37-21" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">npost1 =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb37-22"><a href="#cb37-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Grouping by the second word following the node word and counting its frequency</span></span>
<span id="cb37-23"><a href="#cb37-23" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(post2) <span class="sc">%&gt;%</span></span>
<span id="cb37-24"><a href="#cb37-24" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">npost2 =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb37-25"><a href="#cb37-25" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Grouping by the third word following the node word and counting its frequency</span></span>
<span id="cb37-26"><a href="#cb37-26" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(post3) <span class="sc">%&gt;%</span></span>
<span id="cb37-27"><a href="#cb37-27" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">npost3 =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb37-28"><a href="#cb37-28" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Grouping by the last word preceding the node word and counting its frequency</span></span>
<span id="cb37-29"><a href="#cb37-29" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(pre1) <span class="sc">%&gt;%</span></span>
<span id="cb37-30"><a href="#cb37-30" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">npre1 =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb37-31"><a href="#cb37-31" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Grouping by the second-to-last word preceding the node word and counting its frequency</span></span>
<span id="cb37-32"><a href="#cb37-32" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(pre2) <span class="sc">%&gt;%</span></span>
<span id="cb37-33"><a href="#cb37-33" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">npre2 =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb37-34"><a href="#cb37-34" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Grouping by the third-to-last word preceding the node word and counting its frequency</span></span>
<span id="cb37-35"><a href="#cb37-35" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(pre3) <span class="sc">%&gt;%</span></span>
<span id="cb37-36"><a href="#cb37-36" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">npre3 =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb37-37"><a href="#cb37-37" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Arranging the results</span></span>
<span id="cb37-38"><a href="#cb37-38" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Arranging in descending order of frequencies of words following the node word</span></span>
<span id="cb37-39"><a href="#cb37-39" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="sc">-</span>npost1, <span class="sc">-</span>npost2, <span class="sc">-</span>npost3) <span class="ot">-&gt;</span> mykwic_following</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-05050bf4{table-layout:auto;width:95%;}.cl-04f34770{font-family:'Arial';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-04f3477a{font-family:'Arial';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-04fa9d86{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-04fa9d9a{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-04fadf62{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-04fadf6c{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-04fadf76{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-04fadf77{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-04fadf8a{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-04fadf8b{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-04fadf9e{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-04fadfa8{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-04fadfb2{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-04fadfbc{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-04fadfc6{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-04fadfd0{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-04fadfd1{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-04fadfda{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-04fadfe4{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-04fadfe5{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-05050bf4"><thead><tr style="overflow-wrap:break-word;"><th class="cl-04fadf62"><p class="cl-04fa9d86"><span class="cl-04f34770">docname</span></p></th><th class="cl-04fadf6c"><p class="cl-04fa9d9a"><span class="cl-04f34770">from</span></p></th><th class="cl-04fadf6c"><p class="cl-04fa9d9a"><span class="cl-04f34770">to</span></p></th><th class="cl-04fadf76"><p class="cl-04fa9d86"><span class="cl-04f34770">pre</span></p></th><th class="cl-04fadf76"><p class="cl-04fa9d86"><span class="cl-04f34770">keyword</span></p></th><th class="cl-04fadf76"><p class="cl-04fa9d86"><span class="cl-04f34770">post</span></p></th><th class="cl-04fadf76"><p class="cl-04fa9d86"><span class="cl-04f34770">pattern</span></p></th><th class="cl-04fadf76"><p class="cl-04fa9d86"><span class="cl-04f34770">post1</span></p></th><th class="cl-04fadf76"><p class="cl-04fa9d86"><span class="cl-04f34770">post2</span></p></th><th class="cl-04fadf76"><p class="cl-04fa9d86"><span class="cl-04f34770">post3</span></p></th><th class="cl-04fadf76"><p class="cl-04fa9d86"><span class="cl-04f34770">pre1</span></p></th><th class="cl-04fadf76"><p class="cl-04fa9d86"><span class="cl-04f34770">pre2</span></p></th><th class="cl-04fadf76"><p class="cl-04fa9d86"><span class="cl-04f34770">pre3</span></p></th><th class="cl-04fadf6c"><p class="cl-04fa9d9a"><span class="cl-04f34770">npost1</span></p></th><th class="cl-04fadf6c"><p class="cl-04fa9d9a"><span class="cl-04f34770">npost2</span></p></th><th class="cl-04fadf6c"><p class="cl-04fa9d9a"><span class="cl-04f34770">npost3</span></p></th><th class="cl-04fadf6c"><p class="cl-04fa9d9a"><span class="cl-04f34770">npre1</span></p></th><th class="cl-04fadf6c"><p class="cl-04fa9d9a"><span class="cl-04f34770">npre2</span></p></th><th class="cl-04fadf77"><p class="cl-04fa9d9a"><span class="cl-04f34770">npre3</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-04fadf8a"><p class="cl-04fa9d86"><span class="cl-04f3477a">text1</span></p></td><td class="cl-04fadf8b"><p class="cl-04fa9d9a"><span class="cl-04f3477a">2,945</span></p></td><td class="cl-04fadf8b"><p class="cl-04fa9d9a"><span class="cl-04f3477a">2,945</span></p></td><td class="cl-04fadf9e"><p class="cl-04fa9d86"><span class="cl-04f3477a">of yourself , ” said</span></p></td><td class="cl-04fadf9e"><p class="cl-04fa9d86"><span class="cl-04f3477a">Alice</span></p></td><td class="cl-04fadf9e"><p class="cl-04fa9d86"><span class="cl-04f3477a">, “ a great girl</span></p></td><td class="cl-04fadf9e"><p class="cl-04fa9d86"><span class="cl-04f3477a">Alice</span></p></td><td class="cl-04fadf9e"><p class="cl-04fa9d86"><span class="cl-04f3477a">,</span></p></td><td class="cl-04fadf9e"><p class="cl-04fa9d86"><span class="cl-04f3477a">“</span></p></td><td class="cl-04fadf9e"><p class="cl-04fa9d86"><span class="cl-04f3477a">a</span></p></td><td class="cl-04fadf9e"><p class="cl-04fa9d86"><span class="cl-04f3477a">said</span></p></td><td class="cl-04fadf9e"><p class="cl-04fa9d86"><span class="cl-04f3477a">”</span></p></td><td class="cl-04fadf9e"><p class="cl-04fa9d86"><span class="cl-04f3477a">,</span></p></td><td class="cl-04fadf8b"><p class="cl-04fa9d9a"><span class="cl-04f3477a">78</span></p></td><td class="cl-04fadf8b"><p class="cl-04fa9d9a"><span class="cl-04f3477a">89</span></p></td><td class="cl-04fadf8b"><p class="cl-04fa9d9a"><span class="cl-04f3477a">13</span></p></td><td class="cl-04fadf8b"><p class="cl-04fa9d9a"><span class="cl-04f3477a">115</span></p></td><td class="cl-04fadf8b"><p class="cl-04fa9d9a"><span class="cl-04f3477a">164</span></p></td><td class="cl-04fadfa8"><p class="cl-04fa9d9a"><span class="cl-04f3477a">106</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-04fadfb2"><p class="cl-04fa9d86"><span class="cl-04f3477a">text1</span></p></td><td class="cl-04fadfbc"><p class="cl-04fa9d9a"><span class="cl-04f3477a">2,410</span></p></td><td class="cl-04fadfbc"><p class="cl-04fa9d9a"><span class="cl-04f3477a">2,410</span></p></td><td class="cl-04fadfc6"><p class="cl-04fa9d86"><span class="cl-04f3477a">eat it , ” said</span></p></td><td class="cl-04fadfc6"><p class="cl-04fa9d86"><span class="cl-04f3477a">Alice</span></p></td><td class="cl-04fadfc6"><p class="cl-04fa9d86"><span class="cl-04f3477a">, “ and if it</span></p></td><td class="cl-04fadfc6"><p class="cl-04fa9d86"><span class="cl-04f3477a">Alice</span></p></td><td class="cl-04fadfc6"><p class="cl-04fa9d86"><span class="cl-04f3477a">,</span></p></td><td class="cl-04fadfc6"><p class="cl-04fa9d86"><span class="cl-04f3477a">“</span></p></td><td class="cl-04fadfc6"><p class="cl-04fa9d86"><span class="cl-04f3477a">and</span></p></td><td class="cl-04fadfc6"><p class="cl-04fa9d86"><span class="cl-04f3477a">said</span></p></td><td class="cl-04fadfc6"><p class="cl-04fa9d86"><span class="cl-04f3477a">”</span></p></td><td class="cl-04fadfc6"><p class="cl-04fa9d86"><span class="cl-04f3477a">,</span></p></td><td class="cl-04fadfbc"><p class="cl-04fa9d9a"><span class="cl-04f3477a">78</span></p></td><td class="cl-04fadfbc"><p class="cl-04fa9d9a"><span class="cl-04f3477a">89</span></p></td><td class="cl-04fadfbc"><p class="cl-04fa9d9a"><span class="cl-04f3477a">9</span></p></td><td class="cl-04fadfbc"><p class="cl-04fa9d9a"><span class="cl-04f3477a">115</span></p></td><td class="cl-04fadfbc"><p class="cl-04fa9d9a"><span class="cl-04f3477a">164</span></p></td><td class="cl-04fadfd0"><p class="cl-04fa9d9a"><span class="cl-04f3477a">106</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-04fadf8a"><p class="cl-04fa9d86"><span class="cl-04f3477a">text1</span></p></td><td class="cl-04fadf8b"><p class="cl-04fa9d9a"><span class="cl-04f3477a">6,525</span></p></td><td class="cl-04fadf8b"><p class="cl-04fa9d9a"><span class="cl-04f3477a">6,525</span></p></td><td class="cl-04fadf9e"><p class="cl-04fa9d86"><span class="cl-04f3477a">you know , ” said</span></p></td><td class="cl-04fadf9e"><p class="cl-04fa9d86"><span class="cl-04f3477a">Alice</span></p></td><td class="cl-04fadf9e"><p class="cl-04fa9d86"><span class="cl-04f3477a">, “ and why it</span></p></td><td class="cl-04fadf9e"><p class="cl-04fa9d86"><span class="cl-04f3477a">Alice</span></p></td><td class="cl-04fadf9e"><p class="cl-04fa9d86"><span class="cl-04f3477a">,</span></p></td><td class="cl-04fadf9e"><p class="cl-04fa9d86"><span class="cl-04f3477a">“</span></p></td><td class="cl-04fadf9e"><p class="cl-04fa9d86"><span class="cl-04f3477a">and</span></p></td><td class="cl-04fadf9e"><p class="cl-04fa9d86"><span class="cl-04f3477a">said</span></p></td><td class="cl-04fadf9e"><p class="cl-04fa9d86"><span class="cl-04f3477a">”</span></p></td><td class="cl-04fadf9e"><p class="cl-04fa9d86"><span class="cl-04f3477a">,</span></p></td><td class="cl-04fadf8b"><p class="cl-04fa9d9a"><span class="cl-04f3477a">78</span></p></td><td class="cl-04fadf8b"><p class="cl-04fa9d9a"><span class="cl-04f3477a">89</span></p></td><td class="cl-04fadf8b"><p class="cl-04fa9d9a"><span class="cl-04f3477a">9</span></p></td><td class="cl-04fadf8b"><p class="cl-04fa9d9a"><span class="cl-04f3477a">115</span></p></td><td class="cl-04fadf8b"><p class="cl-04fa9d9a"><span class="cl-04f3477a">164</span></p></td><td class="cl-04fadfa8"><p class="cl-04fa9d9a"><span class="cl-04f3477a">106</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-04fadfb2"><p class="cl-04fa9d86"><span class="cl-04f3477a">text1</span></p></td><td class="cl-04fadfbc"><p class="cl-04fa9d9a"><span class="cl-04f3477a">28,751</span></p></td><td class="cl-04fadfbc"><p class="cl-04fa9d9a"><span class="cl-04f3477a">28,751</span></p></td><td class="cl-04fadfc6"><p class="cl-04fa9d86"><span class="cl-04f3477a">the jury-box , ” thought</span></p></td><td class="cl-04fadfc6"><p class="cl-04fa9d86"><span class="cl-04f3477a">Alice</span></p></td><td class="cl-04fadfc6"><p class="cl-04fa9d86"><span class="cl-04f3477a">, “ and those twelve</span></p></td><td class="cl-04fadfc6"><p class="cl-04fa9d86"><span class="cl-04f3477a">Alice</span></p></td><td class="cl-04fadfc6"><p class="cl-04fa9d86"><span class="cl-04f3477a">,</span></p></td><td class="cl-04fadfc6"><p class="cl-04fa9d86"><span class="cl-04f3477a">“</span></p></td><td class="cl-04fadfc6"><p class="cl-04fa9d86"><span class="cl-04f3477a">and</span></p></td><td class="cl-04fadfc6"><p class="cl-04fa9d86"><span class="cl-04f3477a">thought</span></p></td><td class="cl-04fadfc6"><p class="cl-04fa9d86"><span class="cl-04f3477a">”</span></p></td><td class="cl-04fadfc6"><p class="cl-04fa9d86"><span class="cl-04f3477a">,</span></p></td><td class="cl-04fadfbc"><p class="cl-04fa9d9a"><span class="cl-04f3477a">78</span></p></td><td class="cl-04fadfbc"><p class="cl-04fa9d9a"><span class="cl-04f3477a">89</span></p></td><td class="cl-04fadfbc"><p class="cl-04fa9d9a"><span class="cl-04f3477a">9</span></p></td><td class="cl-04fadfbc"><p class="cl-04fa9d9a"><span class="cl-04f3477a">26</span></p></td><td class="cl-04fadfbc"><p class="cl-04fa9d9a"><span class="cl-04f3477a">164</span></p></td><td class="cl-04fadfd0"><p class="cl-04fa9d9a"><span class="cl-04f3477a">106</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-04fadf8a"><p class="cl-04fa9d86"><span class="cl-04f3477a">text1</span></p></td><td class="cl-04fadf8b"><p class="cl-04fa9d9a"><span class="cl-04f3477a">2,333</span></p></td><td class="cl-04fadf8b"><p class="cl-04fa9d9a"><span class="cl-04f3477a">2,333</span></p></td><td class="cl-04fadf9e"><p class="cl-04fa9d86"><span class="cl-04f3477a">now , ” thought poor</span></p></td><td class="cl-04fadf9e"><p class="cl-04fa9d86"><span class="cl-04f3477a">Alice</span></p></td><td class="cl-04fadf9e"><p class="cl-04fa9d86"><span class="cl-04f3477a">, “ to pretend to</span></p></td><td class="cl-04fadf9e"><p class="cl-04fa9d86"><span class="cl-04f3477a">Alice</span></p></td><td class="cl-04fadf9e"><p class="cl-04fa9d86"><span class="cl-04f3477a">,</span></p></td><td class="cl-04fadf9e"><p class="cl-04fa9d86"><span class="cl-04f3477a">“</span></p></td><td class="cl-04fadf9e"><p class="cl-04fa9d86"><span class="cl-04f3477a">to</span></p></td><td class="cl-04fadf9e"><p class="cl-04fa9d86"><span class="cl-04f3477a">poor</span></p></td><td class="cl-04fadf9e"><p class="cl-04fa9d86"><span class="cl-04f3477a">thought</span></p></td><td class="cl-04fadf9e"><p class="cl-04fa9d86"><span class="cl-04f3477a">”</span></p></td><td class="cl-04fadf8b"><p class="cl-04fa9d9a"><span class="cl-04f3477a">78</span></p></td><td class="cl-04fadf8b"><p class="cl-04fa9d9a"><span class="cl-04f3477a">89</span></p></td><td class="cl-04fadf8b"><p class="cl-04fa9d9a"><span class="cl-04f3477a">7</span></p></td><td class="cl-04fadf8b"><p class="cl-04fa9d9a"><span class="cl-04f3477a">10</span></p></td><td class="cl-04fadf8b"><p class="cl-04fa9d9a"><span class="cl-04f3477a">3</span></p></td><td class="cl-04fadfa8"><p class="cl-04fa9d9a"><span class="cl-04f3477a">9</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-04fadfb2"><p class="cl-04fa9d86"><span class="cl-04f3477a">text1</span></p></td><td class="cl-04fadfbc"><p class="cl-04fa9d9a"><span class="cl-04f3477a">4,312</span></p></td><td class="cl-04fadfbc"><p class="cl-04fa9d9a"><span class="cl-04f3477a">4,312</span></p></td><td class="cl-04fadfc6"><p class="cl-04fa9d86"><span class="cl-04f3477a">, now , ” thought</span></p></td><td class="cl-04fadfc6"><p class="cl-04fa9d86"><span class="cl-04f3477a">Alice</span></p></td><td class="cl-04fadfc6"><p class="cl-04fa9d86"><span class="cl-04f3477a">, “ to speak to</span></p></td><td class="cl-04fadfc6"><p class="cl-04fa9d86"><span class="cl-04f3477a">Alice</span></p></td><td class="cl-04fadfc6"><p class="cl-04fa9d86"><span class="cl-04f3477a">,</span></p></td><td class="cl-04fadfc6"><p class="cl-04fa9d86"><span class="cl-04f3477a">“</span></p></td><td class="cl-04fadfc6"><p class="cl-04fa9d86"><span class="cl-04f3477a">to</span></p></td><td class="cl-04fadfc6"><p class="cl-04fa9d86"><span class="cl-04f3477a">thought</span></p></td><td class="cl-04fadfc6"><p class="cl-04fa9d86"><span class="cl-04f3477a">”</span></p></td><td class="cl-04fadfc6"><p class="cl-04fa9d86"><span class="cl-04f3477a">,</span></p></td><td class="cl-04fadfbc"><p class="cl-04fa9d9a"><span class="cl-04f3477a">78</span></p></td><td class="cl-04fadfbc"><p class="cl-04fa9d9a"><span class="cl-04f3477a">89</span></p></td><td class="cl-04fadfbc"><p class="cl-04fa9d9a"><span class="cl-04f3477a">7</span></p></td><td class="cl-04fadfbc"><p class="cl-04fa9d9a"><span class="cl-04f3477a">26</span></p></td><td class="cl-04fadfbc"><p class="cl-04fa9d9a"><span class="cl-04f3477a">164</span></p></td><td class="cl-04fadfd0"><p class="cl-04fa9d9a"><span class="cl-04f3477a">106</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-04fadf8a"><p class="cl-04fa9d86"><span class="cl-04f3477a">text1</span></p></td><td class="cl-04fadf8b"><p class="cl-04fa9d9a"><span class="cl-04f3477a">1,542</span></p></td><td class="cl-04fadf8b"><p class="cl-04fa9d9a"><span class="cl-04f3477a">1,542</span></p></td><td class="cl-04fadf9e"><p class="cl-04fa9d86"><span class="cl-04f3477a">through , ” thought poor</span></p></td><td class="cl-04fadf9e"><p class="cl-04fa9d86"><span class="cl-04f3477a">Alice</span></p></td><td class="cl-04fadf9e"><p class="cl-04fa9d86"><span class="cl-04f3477a">, “ it would be</span></p></td><td class="cl-04fadf9e"><p class="cl-04fa9d86"><span class="cl-04f3477a">Alice</span></p></td><td class="cl-04fadf9e"><p class="cl-04fa9d86"><span class="cl-04f3477a">,</span></p></td><td class="cl-04fadf9e"><p class="cl-04fa9d86"><span class="cl-04f3477a">“</span></p></td><td class="cl-04fadf9e"><p class="cl-04fa9d86"><span class="cl-04f3477a">it</span></p></td><td class="cl-04fadf9e"><p class="cl-04fa9d86"><span class="cl-04f3477a">poor</span></p></td><td class="cl-04fadf9e"><p class="cl-04fa9d86"><span class="cl-04f3477a">thought</span></p></td><td class="cl-04fadf9e"><p class="cl-04fa9d86"><span class="cl-04f3477a">”</span></p></td><td class="cl-04fadf8b"><p class="cl-04fa9d9a"><span class="cl-04f3477a">78</span></p></td><td class="cl-04fadf8b"><p class="cl-04fa9d9a"><span class="cl-04f3477a">89</span></p></td><td class="cl-04fadf8b"><p class="cl-04fa9d9a"><span class="cl-04f3477a">5</span></p></td><td class="cl-04fadf8b"><p class="cl-04fa9d9a"><span class="cl-04f3477a">10</span></p></td><td class="cl-04fadf8b"><p class="cl-04fa9d9a"><span class="cl-04f3477a">3</span></p></td><td class="cl-04fadfa8"><p class="cl-04fa9d9a"><span class="cl-04f3477a">9</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-04fadfb2"><p class="cl-04fa9d86"><span class="cl-04f3477a">text1</span></p></td><td class="cl-04fadfbc"><p class="cl-04fa9d9a"><span class="cl-04f3477a">16,113</span></p></td><td class="cl-04fadfbc"><p class="cl-04fa9d9a"><span class="cl-04f3477a">16,113</span></p></td><td class="cl-04fadfc6"><p class="cl-04fa9d86"><span class="cl-04f3477a">very much , ” said</span></p></td><td class="cl-04fadfc6"><p class="cl-04fa9d86"><span class="cl-04f3477a">Alice</span></p></td><td class="cl-04fadfc6"><p class="cl-04fa9d86"><span class="cl-04f3477a">, “ but I haven’t</span></p></td><td class="cl-04fadfc6"><p class="cl-04fa9d86"><span class="cl-04f3477a">Alice</span></p></td><td class="cl-04fadfc6"><p class="cl-04fa9d86"><span class="cl-04f3477a">,</span></p></td><td class="cl-04fadfc6"><p class="cl-04fa9d86"><span class="cl-04f3477a">“</span></p></td><td class="cl-04fadfc6"><p class="cl-04fa9d86"><span class="cl-04f3477a">but</span></p></td><td class="cl-04fadfc6"><p class="cl-04fa9d86"><span class="cl-04f3477a">said</span></p></td><td class="cl-04fadfc6"><p class="cl-04fa9d86"><span class="cl-04f3477a">”</span></p></td><td class="cl-04fadfc6"><p class="cl-04fa9d86"><span class="cl-04f3477a">,</span></p></td><td class="cl-04fadfbc"><p class="cl-04fa9d9a"><span class="cl-04f3477a">78</span></p></td><td class="cl-04fadfbc"><p class="cl-04fa9d9a"><span class="cl-04f3477a">89</span></p></td><td class="cl-04fadfbc"><p class="cl-04fa9d9a"><span class="cl-04f3477a">4</span></p></td><td class="cl-04fadfbc"><p class="cl-04fa9d9a"><span class="cl-04f3477a">115</span></p></td><td class="cl-04fadfbc"><p class="cl-04fa9d9a"><span class="cl-04f3477a">164</span></p></td><td class="cl-04fadfd0"><p class="cl-04fa9d9a"><span class="cl-04f3477a">106</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-04fadf8a"><p class="cl-04fa9d86"><span class="cl-04f3477a">text1</span></p></td><td class="cl-04fadf8b"><p class="cl-04fa9d9a"><span class="cl-04f3477a">26,693</span></p></td><td class="cl-04fadf8b"><p class="cl-04fa9d9a"><span class="cl-04f3477a">26,693</span></p></td><td class="cl-04fadf9e"><p class="cl-04fa9d86"><span class="cl-04f3477a">“ Yes , ” said</span></p></td><td class="cl-04fadf9e"><p class="cl-04fa9d86"><span class="cl-04f3477a">Alice</span></p></td><td class="cl-04fadf9e"><p class="cl-04fa9d86"><span class="cl-04f3477a">, “ I’ve often seen</span></p></td><td class="cl-04fadf9e"><p class="cl-04fa9d86"><span class="cl-04f3477a">Alice</span></p></td><td class="cl-04fadf9e"><p class="cl-04fa9d86"><span class="cl-04f3477a">,</span></p></td><td class="cl-04fadf9e"><p class="cl-04fa9d86"><span class="cl-04f3477a">“</span></p></td><td class="cl-04fadf9e"><p class="cl-04fa9d86"><span class="cl-04f3477a">I’ve</span></p></td><td class="cl-04fadf9e"><p class="cl-04fa9d86"><span class="cl-04f3477a">said</span></p></td><td class="cl-04fadf9e"><p class="cl-04fa9d86"><span class="cl-04f3477a">”</span></p></td><td class="cl-04fadf9e"><p class="cl-04fa9d86"><span class="cl-04f3477a">,</span></p></td><td class="cl-04fadf8b"><p class="cl-04fa9d9a"><span class="cl-04f3477a">78</span></p></td><td class="cl-04fadf8b"><p class="cl-04fa9d9a"><span class="cl-04f3477a">89</span></p></td><td class="cl-04fadf8b"><p class="cl-04fa9d9a"><span class="cl-04f3477a">4</span></p></td><td class="cl-04fadf8b"><p class="cl-04fa9d9a"><span class="cl-04f3477a">115</span></p></td><td class="cl-04fadf8b"><p class="cl-04fa9d9a"><span class="cl-04f3477a">164</span></p></td><td class="cl-04fadfa8"><p class="cl-04fa9d9a"><span class="cl-04f3477a">106</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-04fadfd1"><p class="cl-04fa9d86"><span class="cl-04f3477a">text1</span></p></td><td class="cl-04fadfda"><p class="cl-04fa9d9a"><span class="cl-04f3477a">22,354</span></p></td><td class="cl-04fadfda"><p class="cl-04fa9d9a"><span class="cl-04f3477a">22,354</span></p></td><td class="cl-04fadfe4"><p class="cl-04fa9d86"><span class="cl-04f3477a">matter much , ” thought</span></p></td><td class="cl-04fadfe4"><p class="cl-04fa9d86"><span class="cl-04f3477a">Alice</span></p></td><td class="cl-04fadfe4"><p class="cl-04fa9d86"><span class="cl-04f3477a">, “ as all the</span></p></td><td class="cl-04fadfe4"><p class="cl-04fa9d86"><span class="cl-04f3477a">Alice</span></p></td><td class="cl-04fadfe4"><p class="cl-04fa9d86"><span class="cl-04f3477a">,</span></p></td><td class="cl-04fadfe4"><p class="cl-04fa9d86"><span class="cl-04f3477a">“</span></p></td><td class="cl-04fadfe4"><p class="cl-04fa9d86"><span class="cl-04f3477a">as</span></p></td><td class="cl-04fadfe4"><p class="cl-04fa9d86"><span class="cl-04f3477a">thought</span></p></td><td class="cl-04fadfe4"><p class="cl-04fa9d86"><span class="cl-04f3477a">”</span></p></td><td class="cl-04fadfe4"><p class="cl-04fa9d86"><span class="cl-04f3477a">,</span></p></td><td class="cl-04fadfda"><p class="cl-04fa9d9a"><span class="cl-04f3477a">78</span></p></td><td class="cl-04fadfda"><p class="cl-04fa9d9a"><span class="cl-04f3477a">89</span></p></td><td class="cl-04fadfda"><p class="cl-04fa9d9a"><span class="cl-04f3477a">2</span></p></td><td class="cl-04fadfda"><p class="cl-04fa9d9a"><span class="cl-04f3477a">26</span></p></td><td class="cl-04fadfda"><p class="cl-04fa9d9a"><span class="cl-04f3477a">164</span></p></td><td class="cl-04fadfe5"><p class="cl-04fa9d9a"><span class="cl-04f3477a">106</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>The updated concordance now presents the arrangement based on the frequency of words following the node word. This means that the words occurring most frequently immediately after the keyword “alice” are listed first, followed by less frequent ones.</p>
<p>It’s essential to note that the arrangement can be customized by modifying the arguments within the <code>dplyr::arrange</code> function. By altering the order and content of these arguments, you can adjust the sorting criteria. For instance, if you want to prioritize the frequency of words preceding the node word instead, you can simply rearrange the arguments accordingly. This flexibility empowers users to tailor the arrangement to suit their specific analysis goals and preferences.</p>
</section>
<section id="concordances-from-transcriptions" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="concordances-from-transcriptions">Concordances from Transcriptions</h2>
<p>Since many analyses rely on transcripts as their main data source, and transcripts often require additional processing due to their specific features, we will now demonstrate concordancing using transcripts. To begin, we will load five example transcripts representing the first five files from the Irish component of the <a href="https://www.ice-corpora.uzh.ch/en.html">International Corpus of English</a><a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>. These transcripts will serve as our dataset for conducting concordance analysis.</p>
<p>We first load these files so that we can process them and extract KWICs. To load the files, the code below dynamically generates URLs for a series of text files, then reads the content of each file into R, storing the text data in the transcripts object. This is a common procedure when working with multiple text files or when the filenames follow a consistent pattern.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># define corpus files</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>files <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"tutorials/kwics/data/ICEIrelandSample/S1A-00"</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="st">".txt"</span>, <span class="at">sep =</span> <span class="st">""</span>)</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="co"># load corpus files</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>transcripts <span class="ot">&lt;-</span> <span class="fu">sapply</span>(files, <span class="cf">function</span>(x) {</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">readLines</span>(x)</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-052590cc{table-layout:auto;width:95%;}.cl-051b6cdc{font-family:'Arial';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-051b6ce6{font-family:'Arial';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-051ee5a6{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-051f1e5e{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-051f1e68{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-051f1e72{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-051f1e73{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-052590cc"><thead><tr style="overflow-wrap:break-word;"><th class="cl-051f1e5e"><p class="cl-051ee5a6"><span class="cl-051b6cdc">.</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-051f1e68"><p class="cl-051ee5a6"><span class="cl-051b6ce6">&lt;S1A-001 Riding&gt;</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-051f1e72"><p class="cl-051ee5a6"><span class="cl-051b6ce6"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-051f1e68"><p class="cl-051ee5a6"><span class="cl-051b6ce6">&lt;I&gt;</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-051f1e72"><p class="cl-051ee5a6"><span class="cl-051b6ce6">&lt;S1A-001$A&gt; &lt;#&gt; Well how did the riding go tonight</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-051f1e68"><p class="cl-051ee5a6"><span class="cl-051b6ce6">&lt;S1A-001$B&gt; &lt;#&gt; It was good so it was &lt;#&gt; Just I I couldn't believe that she was going to let me jump &lt;,&gt; that was only the fourth time you know &lt;#&gt; It was great &lt;&amp;&gt; laughter &lt;/&amp;&gt;</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-051f1e72"><p class="cl-051ee5a6"><span class="cl-051b6ce6">&lt;S1A-001$A&gt; &lt;#&gt; What did you call your horse</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-051f1e68"><p class="cl-051ee5a6"><span class="cl-051b6ce6">&lt;S1A-001$B&gt; &lt;#&gt; I can't remember &lt;#&gt; Oh Mary 's Town &lt;,&gt; oh</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-051f1e72"><p class="cl-051ee5a6"><span class="cl-051b6ce6">&lt;S1A-001$A&gt; &lt;#&gt; And how did Mabel do</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-051f1e68"><p class="cl-051ee5a6"><span class="cl-051b6ce6">&lt;S1A-001$B&gt; &lt;#&gt; Did you not see her whenever she was going over the jumps &lt;#&gt; There was one time her horse refused and it refused three times &lt;#&gt; And then &lt;,&gt; she got it round and she just lined it up straight and she just kicked it and she hit it with the whip &lt;,&gt; and over it went the last time you know &lt;#&gt; And Stephanie told her she was very determined and very well-ridden &lt;&amp;&gt; laughter &lt;/&amp;&gt; because it had refused the other times you know &lt;#&gt; But Stephanie wouldn't let her give up on it &lt;#&gt; She made her keep coming back and keep coming back &lt;,&gt; until &lt;,&gt; it jumped it you know &lt;#&gt; It was good</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-051f1e73"><p class="cl-051ee5a6"><span class="cl-051b6ce6">&lt;S1A-001$A&gt; &lt;#&gt; Yeah I 'm not so sure her jumping 's improving that much &lt;#&gt; She uh &lt;,&gt; seemed to be holding the reins very tight</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>The first ten lines shown above let us know that, after the header (<code>&lt;S1A-001 Riding&gt;</code>) and the symbol which indicates the start of the transcript (<code>&lt;I&gt;</code>), each utterance is preceded by a sequence which indicates the section, file, and speaker (e.g.&nbsp;<code>&lt;S1A-001$A&gt;</code>). The first utterance is thus uttered by speaker <code>A</code> in file <code>001</code> of section <code>S1A</code>. In addition, there are several sequences that provide meta-linguistic information which indicate the beginning of a speech unit (<code>&lt;#&gt;</code>), pauses (<code>&lt;,&gt;</code>), and laughter (<code>&lt;&amp;&gt; laughter &lt;/&amp;&gt;</code>).</p>
<p>To perform the concordancing, we need to change the format of the transcripts because the <code>kwic</code> function only works on character, corpus, tokens object- in their present form, the transcripts represent a list which contains vectors of strings. To change the format, we collapse the individual utterances into a single character vector for each transcript.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>transcripts_collapsed <span class="ot">&lt;-</span> <span class="fu">sapply</span>(files, <span class="cf">function</span>(x) {</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># read-in text</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">readLines</span>(x)</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># paste all lines together</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">paste0</span>(x, <span class="at">collapse =</span> <span class="st">" "</span>)</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># remove superfluous white spaces</span></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">str_squish</span>(x)</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-05425c0c{table-layout:auto;width:95%;}.cl-0538115c{font-family:'Arial';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-05381166{font-family:'Arial';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-053bd1de{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-053beaca{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-053bead4{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-053beade{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-053beadf{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-05425c0c"><thead><tr style="overflow-wrap:break-word;"><th class="cl-053beaca"><p class="cl-053bd1de"><span class="cl-0538115c">.</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-053bead4"><p class="cl-053bd1de"><span class="cl-05381166">&lt;S1A-001 Riding&gt; &lt;I&gt; &lt;S1A-001$A&gt; &lt;#&gt; Well how did the riding go tonight &lt;S1A-001$B&gt; &lt;#&gt; It was good so it was &lt;#&gt; Just I I couldn't believe that she was going to let me jump &lt;,&gt; that was only the fourth time you know &lt;#&gt; It was great &lt;&amp;&gt; laughter &lt;/&amp;&gt; &lt;S1A-001$A&gt; &lt;#&gt; What did you call your horse &lt;S1A-001$B&gt; &lt;#&gt; I can't remember &lt;#&gt; Oh Mary 's Town &lt;,&gt; oh &lt;S1A-001$A&gt; &lt;#&gt; And how did Mabel do &lt;S1A-001$B&gt; &lt;#&gt; Did you not see her whenever she was going over the jumps &lt;#&gt; There was one time her horse</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-053beade"><p class="cl-053bd1de"><span class="cl-05381166">&lt;S1A-002 Dinner chat 1&gt; &lt;I&gt; &lt;S1A-002$A&gt; &lt;#&gt; He 's been married for three years and is now &lt;{&gt; &lt;[&gt; getting divorced &lt;/[&gt; &lt;S1A-002$B&gt; &lt;#&gt; &lt;[&gt; No no &lt;/[&gt; &lt;/{&gt; he 's got married last year and he 's getting &lt;{&gt; &lt;[&gt; divorced &lt;/[&gt; &lt;S1A-002$A&gt; &lt;#&gt; &lt;[&gt; He 's now &lt;/[&gt; &lt;/{&gt; getting divorced &lt;S1A-002$C&gt; &lt;#&gt; Just right &lt;S1A-002$D&gt; &lt;#&gt; A wee girl of her age like &lt;S1A-002$E&gt; &lt;#&gt; Well there was a guy &lt;S1A-002$C&gt; &lt;#&gt; How long did she try it for &lt;#&gt; An hour a a year &lt;S1A-002$B&gt; &lt;#&gt; Mhm &lt;{&gt; &lt;[&gt; mhm &lt;/[&gt; &lt;S1A-002$E</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-053bead4"><p class="cl-053bd1de"><span class="cl-05381166">&lt;S1A-003 Dinner chat 2&gt; &lt;I&gt; &lt;S1A-003$A&gt; &lt;#&gt; I &lt;.&gt; wa &lt;/.&gt; I want to go to Peru but uh &lt;S1A-003$B&gt; &lt;#&gt; Do you &lt;S1A-003$A&gt; &lt;#&gt; Oh aye &lt;S1A-003$B&gt; &lt;#&gt; I 'd love to go to Peru &lt;S1A-003$A&gt; &lt;#&gt; I want I want to go up the Machu Picchu before it falls off the edge of the mountain &lt;S1A-003$B&gt; &lt;#&gt; Lima 's supposed to be a bit dodgy &lt;S1A-003$A&gt; &lt;#&gt; Mm &lt;S1A-003$B&gt; &lt;#&gt; Bet it would be &lt;S1A-003$B&gt; &lt;#&gt; Mm &lt;S1A-003$A&gt; &lt;#&gt; But I I just I I would like &lt;,&gt; Machu Picchu is collapsing &lt;S1A-003$B&gt; &lt;#&gt; I don't know wh</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-053beade"><p class="cl-053bd1de"><span class="cl-05381166">&lt;S1A-004 Nursing home 1&gt; &lt;I&gt; &lt;S1A-004$A&gt; &lt;#&gt; Honest to God &lt;,&gt; I think the young ones &lt;#&gt; Sure they 're flying on Monday in I think it 's Shannon &lt;#&gt; This is from Texas &lt;S1A-004$B&gt; &lt;#&gt; This English girl &lt;S1A-004$A&gt; &lt;#&gt; The youngest one &lt;,&gt; the dentist &lt;,&gt; she 's married to the dentist &lt;#&gt; Herself and her husband &lt;,&gt; three children and she 's six months pregnant &lt;S1A-004$C&gt; &lt;#&gt; Oh God &lt;S1A-004$B&gt; &lt;#&gt; And where are they going &lt;S1A-004$A&gt; &lt;#&gt; Coming to Dublin to the mother &lt;{&gt; &lt;[&gt; or &lt;unclear&gt; 3 sy</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-053beadf"><p class="cl-053bd1de"><span class="cl-05381166">&lt;S1A-005 Masons&gt; &lt;I&gt; &lt;S1A-005$A&gt; &lt;#&gt; Right shall we risk another beer or shall we try and &lt;,&gt; &lt;{&gt; &lt;[&gt; ride the bikes down there or do something like that &lt;/[&gt; &lt;S1A-005$B&gt; &lt;#&gt; &lt;[&gt; Well &lt;,&gt; what about the &lt;/[&gt; &lt;/{&gt; provisions &lt;#&gt; What time &lt;{&gt; &lt;[&gt; &lt;unclear&gt; 4 sylls &lt;/unclear&gt; &lt;/[&gt; &lt;S1A-005$C&gt; &lt;#&gt; &lt;[&gt; Is is your &lt;/[&gt; &lt;/{&gt; man coming here &lt;S1A-005$B&gt; &lt;#&gt; &lt;{&gt; &lt;[&gt; Yeah &lt;/[&gt; &lt;S1A-005$A&gt; &lt;#&gt; &lt;[&gt; He said &lt;/[&gt; &lt;/{&gt; he would meet us here &lt;S1A-005$B&gt; &lt;#&gt; Just the boat 's arriving you know a few minutes ' wa</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>We now move on to extracting concordances. We begin by splitting the text simply by white space. This ensures that tags and markup remain intact, preventing accidental splitting. Additionally, we extend the context surrounding our target word or phrase. While the default is five tokens before and after the keyword, we opt to widen this context to 10 tokens. Furthermore, for improved organization and readability, we refine the file names. Instead of using the full path, we extract only the name of the text. This simplifies the presentation of results and enhances clarity when navigating through the corpus.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>kwic_trans <span class="ot">&lt;-</span> quanteda<span class="sc">::</span><span class="fu">kwic</span>(</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># tokenize transcripts</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  quanteda<span class="sc">::</span><span class="fu">tokens</span>(transcripts_collapsed, <span class="at">what =</span> <span class="st">"fasterword"</span>),</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># define search pattern</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">pattern =</span> <span class="fu">phrase</span>(<span class="st">"you know"</span>),</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># extend context</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">window =</span> <span class="dv">10</span></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># make it a data frame</span></span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># clean docnames / filenames / text names</span></span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">docname =</span> <span class="fu">str_replace_all</span>(docname, <span class="st">".*/(.*?).txt"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">1"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-0572fbdc{table-layout:auto;width:95%;}.cl-0564ef2e{font-family:'Arial';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-0564ef42{font-family:'Arial';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-056a55a4{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-056a55ae{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-056a9884{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-056a988e{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-056a9898{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-056a98a2{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-056a98a3{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-056a98ac{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-056a98b6{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-056a98c0{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-056a98c1{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-056a98c2{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-056a98ca{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-056a98d4{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-056a98de{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-056a98df{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-056a98e0{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-056a98e8{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-0572fbdc"><thead><tr style="overflow-wrap:break-word;"><th class="cl-056a9884"><p class="cl-056a55a4"><span class="cl-0564ef2e">docname</span></p></th><th class="cl-056a988e"><p class="cl-056a55ae"><span class="cl-0564ef2e">from</span></p></th><th class="cl-056a988e"><p class="cl-056a55ae"><span class="cl-0564ef2e">to</span></p></th><th class="cl-056a9898"><p class="cl-056a55a4"><span class="cl-0564ef2e">pre</span></p></th><th class="cl-056a9898"><p class="cl-056a55a4"><span class="cl-0564ef2e">keyword</span></p></th><th class="cl-056a9898"><p class="cl-056a55a4"><span class="cl-0564ef2e">post</span></p></th><th class="cl-056a98a2"><p class="cl-056a55a4"><span class="cl-0564ef2e">pattern</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-056a98a3"><p class="cl-056a55a4"><span class="cl-0564ef42">S1A-001</span></p></td><td class="cl-056a98ac"><p class="cl-056a55ae"><span class="cl-0564ef42">42</span></p></td><td class="cl-056a98ac"><p class="cl-056a55ae"><span class="cl-0564ef42">43</span></p></td><td class="cl-056a98b6"><p class="cl-056a55a4"><span class="cl-0564ef42">let me jump &lt;,&gt; that was only the fourth time</span></p></td><td class="cl-056a98b6"><p class="cl-056a55a4"><span class="cl-0564ef42">you know</span></p></td><td class="cl-056a98b6"><p class="cl-056a55a4"><span class="cl-0564ef42">&lt;#&gt; It was great &lt;&amp;&gt; laughter &lt;/&amp;&gt; &lt;S1A-001$A&gt; &lt;#&gt; What</span></p></td><td class="cl-056a98c0"><p class="cl-056a55a4"><span class="cl-0564ef42">you know</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-056a98c1"><p class="cl-056a55a4"><span class="cl-0564ef42">S1A-001</span></p></td><td class="cl-056a98c2"><p class="cl-056a55ae"><span class="cl-0564ef42">140</span></p></td><td class="cl-056a98c2"><p class="cl-056a55ae"><span class="cl-0564ef42">141</span></p></td><td class="cl-056a98ca"><p class="cl-056a55a4"><span class="cl-0564ef42">the whip &lt;,&gt; and over it went the last time</span></p></td><td class="cl-056a98ca"><p class="cl-056a55a4"><span class="cl-0564ef42">you know</span></p></td><td class="cl-056a98ca"><p class="cl-056a55a4"><span class="cl-0564ef42">&lt;#&gt; And Stephanie told her she was very determined and</span></p></td><td class="cl-056a98d4"><p class="cl-056a55a4"><span class="cl-0564ef42">you know</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-056a98a3"><p class="cl-056a55a4"><span class="cl-0564ef42">S1A-001</span></p></td><td class="cl-056a98ac"><p class="cl-056a55ae"><span class="cl-0564ef42">164</span></p></td><td class="cl-056a98ac"><p class="cl-056a55ae"><span class="cl-0564ef42">165</span></p></td><td class="cl-056a98b6"><p class="cl-056a55a4"><span class="cl-0564ef42">&lt;&amp;&gt; laughter &lt;/&amp;&gt; because it had refused the other times</span></p></td><td class="cl-056a98b6"><p class="cl-056a55a4"><span class="cl-0564ef42">you know</span></p></td><td class="cl-056a98b6"><p class="cl-056a55a4"><span class="cl-0564ef42">&lt;#&gt; But Stephanie wouldn't let her give up on it</span></p></td><td class="cl-056a98c0"><p class="cl-056a55a4"><span class="cl-0564ef42">you know</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-056a98c1"><p class="cl-056a55a4"><span class="cl-0564ef42">S1A-001</span></p></td><td class="cl-056a98c2"><p class="cl-056a55ae"><span class="cl-0564ef42">193</span></p></td><td class="cl-056a98c2"><p class="cl-056a55ae"><span class="cl-0564ef42">194</span></p></td><td class="cl-056a98ca"><p class="cl-056a55a4"><span class="cl-0564ef42">and keep coming back &lt;,&gt; until &lt;,&gt; it jumped it</span></p></td><td class="cl-056a98ca"><p class="cl-056a55a4"><span class="cl-0564ef42">you know</span></p></td><td class="cl-056a98ca"><p class="cl-056a55a4"><span class="cl-0564ef42">&lt;#&gt; It was good &lt;S1A-001$A&gt; &lt;#&gt; Yeah I 'm not</span></p></td><td class="cl-056a98d4"><p class="cl-056a55a4"><span class="cl-0564ef42">you know</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-056a98a3"><p class="cl-056a55a4"><span class="cl-0564ef42">S1A-001</span></p></td><td class="cl-056a98ac"><p class="cl-056a55ae"><span class="cl-0564ef42">402</span></p></td><td class="cl-056a98ac"><p class="cl-056a55ae"><span class="cl-0564ef42">403</span></p></td><td class="cl-056a98b6"><p class="cl-056a55a4"><span class="cl-0564ef42">'d be far better waiting &lt;,&gt; for that one &lt;,&gt;</span></p></td><td class="cl-056a98b6"><p class="cl-056a55a4"><span class="cl-0564ef42">you know</span></p></td><td class="cl-056a98b6"><p class="cl-056a55a4"><span class="cl-0564ef42">and starting anew fresh &lt;S1A-001$A&gt; &lt;#&gt; Yeah but I mean</span></p></td><td class="cl-056a98c0"><p class="cl-056a55a4"><span class="cl-0564ef42">you know</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-056a98c1"><p class="cl-056a55a4"><span class="cl-0564ef42">S1A-001</span></p></td><td class="cl-056a98c2"><p class="cl-056a55ae"><span class="cl-0564ef42">443</span></p></td><td class="cl-056a98c2"><p class="cl-056a55ae"><span class="cl-0564ef42">444</span></p></td><td class="cl-056a98ca"><p class="cl-056a55a4"><span class="cl-0564ef42">the best goes top of the league &lt;,&gt; &lt;{&gt; &lt;[&gt;</span></p></td><td class="cl-056a98ca"><p class="cl-056a55a4"><span class="cl-0564ef42">you know</span></p></td><td class="cl-056a98ca"><p class="cl-056a55a4"><span class="cl-0564ef42">&lt;/[&gt; &lt;S1A-001$A&gt; &lt;#&gt; &lt;[&gt; So &lt;/[&gt; &lt;/{&gt; it 's like</span></p></td><td class="cl-056a98d4"><p class="cl-056a55a4"><span class="cl-0564ef42">you know</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-056a98a3"><p class="cl-056a55a4"><span class="cl-0564ef42">S1A-001</span></p></td><td class="cl-056a98ac"><p class="cl-056a55ae"><span class="cl-0564ef42">484</span></p></td><td class="cl-056a98ac"><p class="cl-056a55ae"><span class="cl-0564ef42">485</span></p></td><td class="cl-056a98b6"><p class="cl-056a55a4"><span class="cl-0564ef42">I 'm not sure now &lt;#&gt; We didn't discuss it</span></p></td><td class="cl-056a98b6"><p class="cl-056a55a4"><span class="cl-0564ef42">you know</span></p></td><td class="cl-056a98b6"><p class="cl-056a55a4"><span class="cl-0564ef42">&lt;S1A-001$A&gt; &lt;#&gt; Well it sounds like more money &lt;S1A-001$B&gt; &lt;#&gt;</span></p></td><td class="cl-056a98c0"><p class="cl-056a55a4"><span class="cl-0564ef42">you know</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-056a98c1"><p class="cl-056a55a4"><span class="cl-0564ef42">S1A-001</span></p></td><td class="cl-056a98c2"><p class="cl-056a55ae"><span class="cl-0564ef42">598</span></p></td><td class="cl-056a98c2"><p class="cl-056a55ae"><span class="cl-0564ef42">599</span></p></td><td class="cl-056a98ca"><p class="cl-056a55a4"><span class="cl-0564ef42">on Monday and do without her lesson on Tuesday &lt;,&gt;</span></p></td><td class="cl-056a98ca"><p class="cl-056a55a4"><span class="cl-0564ef42">you know</span></p></td><td class="cl-056a98ca"><p class="cl-056a55a4"><span class="cl-0564ef42">&lt;#&gt; But I was keeping her going cos I says</span></p></td><td class="cl-056a98d4"><p class="cl-056a55a4"><span class="cl-0564ef42">you know</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-056a98a3"><p class="cl-056a55a4"><span class="cl-0564ef42">S1A-001</span></p></td><td class="cl-056a98ac"><p class="cl-056a55ae"><span class="cl-0564ef42">727</span></p></td><td class="cl-056a98ac"><p class="cl-056a55ae"><span class="cl-0564ef42">728</span></p></td><td class="cl-056a98b6"><p class="cl-056a55a4"><span class="cl-0564ef42">to take it tomorrow &lt;,&gt; that she could take her</span></p></td><td class="cl-056a98b6"><p class="cl-056a55a4"><span class="cl-0564ef42">you know</span></p></td><td class="cl-056a98b6"><p class="cl-056a55a4"><span class="cl-0564ef42">the wee shoulder bag she has &lt;S1A-001$A&gt; &lt;#&gt; Mhm &lt;S1A-001$B&gt;</span></p></td><td class="cl-056a98c0"><p class="cl-056a55a4"><span class="cl-0564ef42">you know</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-056a98de"><p class="cl-056a55a4"><span class="cl-0564ef42">S1A-001</span></p></td><td class="cl-056a98df"><p class="cl-056a55ae"><span class="cl-0564ef42">808</span></p></td><td class="cl-056a98df"><p class="cl-056a55ae"><span class="cl-0564ef42">809</span></p></td><td class="cl-056a98e0"><p class="cl-056a55a4"><span class="cl-0564ef42">&lt;,&gt; and &lt;,&gt; sort of show them around &lt;,&gt; uhm</span></p></td><td class="cl-056a98e0"><p class="cl-056a55a4"><span class="cl-0564ef42">you know</span></p></td><td class="cl-056a98e0"><p class="cl-056a55a4"><span class="cl-0564ef42">their timetable and &lt;,&gt; give them their timetable and show</span></p></td><td class="cl-056a98e8"><p class="cl-056a55a4"><span class="cl-0564ef42">you know</span></p></td></tr></tbody></table></div>
</div>
</div>
</section>
<section id="custom-concordances" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="custom-concordances">Custom Concordances</h2>
<p>As R represents a fully-fledged programming environment, we can, of course, also write our own, customized concordance function. The code below shows how you could go about doing so. Note, however, that this function only works if you enter more than a single file.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>mykwic <span class="ot">&lt;-</span> <span class="cf">function</span>(txts, pattern, context) {</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># activate packages</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">require</span>(stringr)</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># list files</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>  txts <span class="ot">&lt;-</span> txts[stringr<span class="sc">::</span><span class="fu">str_detect</span>(txts, pattern)]</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>  conc <span class="ot">&lt;-</span> <span class="fu">sapply</span>(txts, <span class="cf">function</span>(x) {</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># determine length of text</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>    lngth <span class="ot">&lt;-</span> <span class="fu">as.vector</span>(<span class="fu">unlist</span>(<span class="fu">nchar</span>(x)))</span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># determine position of hits</span></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>    idx <span class="ot">&lt;-</span> <span class="fu">str_locate_all</span>(x, pattern)</span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>    idx <span class="ot">&lt;-</span> idx[[<span class="dv">1</span>]]</span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ifelse</span>(<span class="fu">nrow</span>(idx) <span class="sc">&gt;=</span> <span class="dv">1</span>, idx <span class="ot">&lt;-</span> idx, <span class="fu">return</span>(<span class="cn">NA</span>))</span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># define start position of hit</span></span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a>    token.start <span class="ot">&lt;-</span> idx[, <span class="dv">1</span>]</span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># define end position of hit</span></span>
<span id="cb41-16"><a href="#cb41-16" aria-hidden="true" tabindex="-1"></a>    token.end <span class="ot">&lt;-</span> idx[, <span class="dv">2</span>]</span>
<span id="cb41-17"><a href="#cb41-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># define start position of preceding context</span></span>
<span id="cb41-18"><a href="#cb41-18" aria-hidden="true" tabindex="-1"></a>    pre.start <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(token.start <span class="sc">-</span> context <span class="sc">&lt;</span> <span class="dv">1</span>, <span class="dv">1</span>, token.start <span class="sc">-</span> context)</span>
<span id="cb41-19"><a href="#cb41-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># define end position of preceding context</span></span>
<span id="cb41-20"><a href="#cb41-20" aria-hidden="true" tabindex="-1"></a>    pre.end <span class="ot">&lt;-</span> token.start <span class="sc">-</span> <span class="dv">1</span></span>
<span id="cb41-21"><a href="#cb41-21" aria-hidden="true" tabindex="-1"></a>    <span class="co"># define start position of subsequent context</span></span>
<span id="cb41-22"><a href="#cb41-22" aria-hidden="true" tabindex="-1"></a>    post.start <span class="ot">&lt;-</span> token.end <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb41-23"><a href="#cb41-23" aria-hidden="true" tabindex="-1"></a>    <span class="co"># define end position of subsequent context</span></span>
<span id="cb41-24"><a href="#cb41-24" aria-hidden="true" tabindex="-1"></a>    post.end <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(token.end <span class="sc">+</span> context <span class="sc">&gt;</span> lngth, lngth, token.end <span class="sc">+</span> context)</span>
<span id="cb41-25"><a href="#cb41-25" aria-hidden="true" tabindex="-1"></a>    <span class="co"># extract the texts defined by the positions</span></span>
<span id="cb41-26"><a href="#cb41-26" aria-hidden="true" tabindex="-1"></a>    PreceedingContext <span class="ot">&lt;-</span> <span class="fu">substring</span>(x, pre.start, pre.end)</span>
<span id="cb41-27"><a href="#cb41-27" aria-hidden="true" tabindex="-1"></a>    Token <span class="ot">&lt;-</span> <span class="fu">substring</span>(x, token.start, token.end)</span>
<span id="cb41-28"><a href="#cb41-28" aria-hidden="true" tabindex="-1"></a>    SubsequentContext <span class="ot">&lt;-</span> <span class="fu">substring</span>(x, post.start, post.end)</span>
<span id="cb41-29"><a href="#cb41-29" aria-hidden="true" tabindex="-1"></a>    Id <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(Token)</span>
<span id="cb41-30"><a href="#cb41-30" aria-hidden="true" tabindex="-1"></a>    conc <span class="ot">&lt;-</span> <span class="fu">cbind</span>(Id, PreceedingContext, Token, SubsequentContext)</span>
<span id="cb41-31"><a href="#cb41-31" aria-hidden="true" tabindex="-1"></a>    <span class="co"># return concordance</span></span>
<span id="cb41-32"><a href="#cb41-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(conc)</span>
<span id="cb41-33"><a href="#cb41-33" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb41-34"><a href="#cb41-34" aria-hidden="true" tabindex="-1"></a>  concdf <span class="ot">&lt;-</span> <span class="fu">do.call</span>(rbind, conc) <span class="sc">%&gt;%</span></span>
<span id="cb41-35"><a href="#cb41-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.data.frame</span>()</span>
<span id="cb41-36"><a href="#cb41-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(concdf)</span>
<span id="cb41-37"><a href="#cb41-37" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can now try if this function works by searching for the sequence <em>you know</em> in the transcripts that we have loaded earlier. One difference between the <code>kwic</code> function provided by the <code>quanteda</code> package and the customized concordance function used here is that the <code>kwic</code> function uses the number of words to define the context window, while the <code>mykwic</code> function uses the number of characters or symbols instead (which is why we use a notably higher number to define the context window).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>kwic_youknow <span class="ot">&lt;-</span> <span class="fu">mykwic</span>(transcripts_collapsed, <span class="st">"you know"</span>, <span class="dv">50</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-05a660da{table-layout:auto;width:95%;}.cl-05982e34{font-family:'Arial';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-05982e3e{font-family:'Arial';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-059d9e28{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-059dd4d8{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-059dd4e2{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-059dd4ec{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-059dd4f6{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-059dd4f7{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-059dd500{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-059dd501{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-059dd50a{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-059dd514{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-059dd515{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-059dd516{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-059dd51e{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-05a660da"><thead><tr style="overflow-wrap:break-word;"><th class="cl-059dd4d8"><p class="cl-059d9e28"><span class="cl-05982e34">Id</span></p></th><th class="cl-059dd4e2"><p class="cl-059d9e28"><span class="cl-05982e34">PreceedingContext</span></p></th><th class="cl-059dd4e2"><p class="cl-059d9e28"><span class="cl-05982e34">Token</span></p></th><th class="cl-059dd4ec"><p class="cl-059d9e28"><span class="cl-05982e34">SubsequentContext</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-059dd4f6"><p class="cl-059d9e28"><span class="cl-05982e3e">1</span></p></td><td class="cl-059dd4f7"><p class="cl-059d9e28"><span class="cl-05982e3e"> to let me jump &lt;,&gt; that was only the fourth time </span></p></td><td class="cl-059dd4f7"><p class="cl-059d9e28"><span class="cl-05982e3e">you know</span></p></td><td class="cl-059dd500"><p class="cl-059d9e28"><span class="cl-05982e3e"> &lt;#&gt; It was great &lt;&amp;&gt; laughter &lt;/&amp;&gt; &lt;S1A-001$A&gt; &lt;#</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-059dd501"><p class="cl-059d9e28"><span class="cl-05982e3e">2</span></p></td><td class="cl-059dd50a"><p class="cl-059d9e28"><span class="cl-05982e3e"> with the whip &lt;,&gt; and over it went the last time </span></p></td><td class="cl-059dd50a"><p class="cl-059d9e28"><span class="cl-05982e3e">you know</span></p></td><td class="cl-059dd514"><p class="cl-059d9e28"><span class="cl-05982e3e"> &lt;#&gt; And Stephanie told her she was very determine</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-059dd4f6"><p class="cl-059d9e28"><span class="cl-05982e3e">3</span></p></td><td class="cl-059dd4f7"><p class="cl-059d9e28"><span class="cl-05982e3e">ghter &lt;/&amp;&gt; because it had refused the other times </span></p></td><td class="cl-059dd4f7"><p class="cl-059d9e28"><span class="cl-05982e3e">you know</span></p></td><td class="cl-059dd500"><p class="cl-059d9e28"><span class="cl-05982e3e"> &lt;#&gt; But Stephanie wouldn't let her give up on it </span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-059dd501"><p class="cl-059d9e28"><span class="cl-05982e3e">4</span></p></td><td class="cl-059dd50a"><p class="cl-059d9e28"><span class="cl-05982e3e">k and keep coming back &lt;,&gt; until &lt;,&gt; it jumped it </span></p></td><td class="cl-059dd50a"><p class="cl-059d9e28"><span class="cl-05982e3e">you know</span></p></td><td class="cl-059dd514"><p class="cl-059d9e28"><span class="cl-05982e3e"> &lt;#&gt; It was good &lt;S1A-001$A&gt; &lt;#&gt; Yeah I 'm not so </span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-059dd4f6"><p class="cl-059d9e28"><span class="cl-05982e3e">5</span></p></td><td class="cl-059dd4f7"><p class="cl-059d9e28"><span class="cl-05982e3e">she 'd be far better waiting &lt;,&gt; for that one &lt;,&gt; </span></p></td><td class="cl-059dd4f7"><p class="cl-059d9e28"><span class="cl-05982e3e">you know</span></p></td><td class="cl-059dd500"><p class="cl-059d9e28"><span class="cl-05982e3e"> and starting anew fresh &lt;S1A-001$A&gt; &lt;#&gt; Yeah but </span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-059dd515"><p class="cl-059d9e28"><span class="cl-05982e3e">6</span></p></td><td class="cl-059dd516"><p class="cl-059d9e28"><span class="cl-05982e3e">er 's the best goes top of the league &lt;,&gt; &lt;{&gt; &lt;[&gt; </span></p></td><td class="cl-059dd516"><p class="cl-059d9e28"><span class="cl-05982e3e">you know</span></p></td><td class="cl-059dd51e"><p class="cl-059d9e28"><span class="cl-05982e3e"> &lt;/[&gt; &lt;S1A-001$A&gt; &lt;#&gt; &lt;[&gt; So &lt;/[&gt; &lt;/{&gt; it 's like </span></p></td></tr></tbody></table></div>
</div>
</div>
<p>As this concordance function only works for more than one text, we split the text into chapters and assign each section a name.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># read in text</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>text_split <span class="ot">&lt;-</span> text <span class="sc">%&gt;%</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_squish</span>() <span class="sc">%&gt;%</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_split</span>(<span class="st">"[CHAPTER]{7,7} [XVI]{1,7}</span><span class="sc">\\</span><span class="st">. "</span>) <span class="sc">%&gt;%</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unlist</span>()</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>text_split <span class="ot">&lt;-</span> text_split[<span class="fu">which</span>(<span class="fu">nchar</span>(text_split) <span class="sc">&gt;</span> <span class="dv">2000</span>)]</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a><span class="co"># add names</span></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(text_split) <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"text"</span>, <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(text_split))</span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect data</span></span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a><span class="fu">nchar</span>(text_split)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> text1  text2  text3  text4  text5  text6  text7  text8  text9 text10 text11 
 11331  10888   9137  13830  11767  13730  12563  13585  12527  11287  10292 
text12 
 11564 </code></pre>
</div>
</div>
<p>Now that we have named elements, we can search for the pattern <em>poor alice</em>. We also need to clean the concordance as some sections do not contain any instances of the search pattern. To clean the data, we select only the columns <code>File</code>, <code>PreceedingContext</code>, <code>Token</code>, and <code>SubsequentContext</code> and then remove all rows where information is missing.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>mykwic_pooralice <span class="ot">&lt;-</span> <span class="fu">mykwic</span>(text_split, <span class="st">"poor Alice"</span>, <span class="dv">50</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-05d1b0e6{table-layout:auto;width:95%;}.cl-05c5a134{font-family:'Arial';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-05c5a152{font-family:'Arial';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-05ca3744{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-05ca53e6{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-05ca53e7{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-05ca53f0{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-05ca53fa{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-05ca53fb{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-05ca5404{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-05ca5405{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-05ca540e{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-05ca540f{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-05ca5410{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-05ca5418{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-05ca5419{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-05d1b0e6"><thead><tr style="overflow-wrap:break-word;"><th class="cl-05ca53e6"><p class="cl-05ca3744"><span class="cl-05c5a134">Id</span></p></th><th class="cl-05ca53e7"><p class="cl-05ca3744"><span class="cl-05c5a134">PreceedingContext</span></p></th><th class="cl-05ca53e7"><p class="cl-05ca3744"><span class="cl-05c5a134">Token</span></p></th><th class="cl-05ca53f0"><p class="cl-05ca3744"><span class="cl-05c5a134">SubsequentContext</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-05ca53fa"><p class="cl-05ca3744"><span class="cl-05c5a152">1</span></p></td><td class="cl-05ca53fb"><p class="cl-05ca3744"><span class="cl-05c5a152">; “and even if my head would go through,” thought </span></p></td><td class="cl-05ca53fb"><p class="cl-05ca3744"><span class="cl-05c5a152">poor Alice</span></p></td><td class="cl-05ca5404"><p class="cl-05ca3744"><span class="cl-05c5a152">, “it would be of very little use without my shoul</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-05ca5405"><p class="cl-05ca3744"><span class="cl-05c5a152">2</span></p></td><td class="cl-05ca540e"><p class="cl-05ca3744"><span class="cl-05c5a152">d on going into the garden at once; but, alas for </span></p></td><td class="cl-05ca540e"><p class="cl-05ca3744"><span class="cl-05c5a152">poor Alice</span></p></td><td class="cl-05ca540f"><p class="cl-05ca3744"><span class="cl-05c5a152">! when she got to the door, she found she had forg</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-05ca53fa"><p class="cl-05ca3744"><span class="cl-05c5a152">3</span></p></td><td class="cl-05ca53fb"><p class="cl-05ca3744"><span class="cl-05c5a152"> to be two people. “But it’s no use now,” thought </span></p></td><td class="cl-05ca53fb"><p class="cl-05ca3744"><span class="cl-05c5a152">poor Alice</span></p></td><td class="cl-05ca5404"><p class="cl-05ca3744"><span class="cl-05c5a152">, “to pretend to be two people! Why, there’s hardl</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-05ca5405"><p class="cl-05ca3744"><span class="cl-05c5a152">1</span></p></td><td class="cl-05ca540e"><p class="cl-05ca3744"><span class="cl-05c5a152">!” “I’m sure those are not the right words,” said </span></p></td><td class="cl-05ca540e"><p class="cl-05ca3744"><span class="cl-05c5a152">poor Alice</span></p></td><td class="cl-05ca540f"><p class="cl-05ca3744"><span class="cl-05c5a152">, and her eyes filled with tears again as she went</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-05ca53fa"><p class="cl-05ca3744"><span class="cl-05c5a152">1</span></p></td><td class="cl-05ca53fb"><p class="cl-05ca3744"><span class="cl-05c5a152">lking such nonsense!” “I didn’t mean it!” pleaded </span></p></td><td class="cl-05ca53fb"><p class="cl-05ca3744"><span class="cl-05c5a152">poor Alice</span></p></td><td class="cl-05ca5404"><p class="cl-05ca3744"><span class="cl-05c5a152">. “But you’re so easily offended, you know!” The M</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-05ca5410"><p class="cl-05ca3744"><span class="cl-05c5a152">2</span></p></td><td class="cl-05ca5418"><p class="cl-05ca3744"><span class="cl-05c5a152">onder if I shall ever see you any more!” And here </span></p></td><td class="cl-05ca5418"><p class="cl-05ca3744"><span class="cl-05c5a152">poor Alice</span></p></td><td class="cl-05ca5419"><p class="cl-05ca3744"><span class="cl-05c5a152"> began to cry again, for she felt very lonely and </span></p></td></tr></tbody></table></div>
</div>
</div>
<p>You can go ahead and modify the customized concordance function to suit your needs.</p>
</section>
</section>
<section id="citation-session-info" class="level1 unnumbered">
<h1 class="unnumbered">Citation &amp; Session Info</h1>
<p>Schweinberger, Martin. 2024. <em>Concordancing with R</em>. Brisbane: The Language Technology and Data Analysis Laboratory (LADAL). url: tutorials/kwics.html (Version 2024.05.07).</p>
<pre><code>@manual{schweinberger2024kwics,
  author = {Schweinberger, Martin},
  title = {Concordancing with R},
  note = {tutorials/kwics/kwics.html},
  year = {2024},
  organization = {The Language Technology and Data Analysis Laboratory (LADAL)},
  address = {Brisbane},
  edition = {2024.05.07}
}</code></pre>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sessionInfo</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>R version 4.4.2 (2024-10-31 ucrt)
Platform: x86_64-w64-mingw32/x64
Running under: Windows 11 x64 (build 26100)

Matrix products: default


locale:
[1] LC_COLLATE=English_United States.utf8 
[2] LC_CTYPE=English_United States.utf8   
[3] LC_MONETARY=English_United States.utf8
[4] LC_NUMERIC=C                          
[5] LC_TIME=English_United States.utf8    

time zone: Australia/Brisbane
tzcode source: internal

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] flextable_0.9.7 here_1.0.1      writexl_1.5.1   stringr_1.5.1  
[5] dplyr_1.1.4     quanteda_4.2.0 

loaded via a namespace (and not attached):
 [1] generics_0.1.3          fontLiberation_0.1.0    xml2_1.3.6             
 [4] stringi_1.8.4           lattice_0.22-6          digest_0.6.37          
 [7] magrittr_2.0.3          evaluate_1.0.3          grid_4.4.2             
[10] fastmap_1.2.0           rprojroot_2.0.4         jsonlite_1.8.9         
[13] Matrix_1.7-1            zip_2.3.2               stopwords_2.3          
[16] fontBitstreamVera_0.1.1 klippy_0.0.0.9500       textshaping_1.0.0      
[19] cli_3.6.4               rlang_1.1.5             fontquiver_0.2.1       
[22] withr_3.0.2             yaml_2.3.10             gdtools_0.4.1          
[25] tools_4.4.2             officer_0.6.7           uuid_1.2-1             
[28] fastmatch_1.1-6         assertthat_0.2.1        vctrs_0.6.5            
[31] R6_2.6.1                lifecycle_1.0.4         htmlwidgets_1.6.4      
[34] ragg_1.3.3              pkgconfig_2.0.3         pillar_1.10.1          
[37] data.table_1.16.4       glue_1.8.0              Rcpp_1.0.14            
[40] systemfonts_1.2.1       xfun_0.50               tibble_3.2.1           
[43] tidyselect_1.2.1        rstudioapi_0.17.1       knitr_1.49             
[46] htmltools_0.5.8.1       rmarkdown_2.29          compiler_4.4.2         
[49] askpass_1.2.1           openssl_2.3.2          </code></pre>
</div>
</div>
<hr>
<p><a href="#introduction">Back to top</a></p>
<p><a href="../..">Back to HOME</a></p>
<hr>
</section>
<section id="references" class="level1 unnumbered">




</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-anthony2004antconc" class="csl-entry" role="listitem">
Anthony, Laurence. <span>“AntConc: A Learner and Classroom Friendly, Multi-Platform Corpus Analysis Toolkit.”</span> <em>Proceedings of IWLeL</em>, 7–13.
</div>
<div id="ref-fivethirtyeight2018replication" class="csl-entry" role="listitem">
Aschwanden, Christie. <span>“Psychology’s Replication Crisis Has Made the Field Better.”</span> <a href="https://fivethirtyeight.com/features/psychologys-replication-crisis-has-made-the-field-better/">https://fivethirtyeight.com/features/psychologys-replication-crisis-has-made-the-field-better/</a>.
</div>
<div id="ref-barlow1999monoconc" class="csl-entry" role="listitem">
Barlow, Michael. <span>“Monoconc 1.5 and Paraconc.”</span> <em>International Journal of Corpus Linguistics</em>, 173–84.
</div>
<div id="ref-barlow2002paraconc" class="csl-entry" role="listitem">
———. <span>“ParaConc: Concordance Software for Multilingual Parallel Corpora.”</span> In <em>Proceedings of the Third International Conference on Language Resources and Evaluation. Workshop on Language Resources in Translation Work and Research</em>, 20–24.
</div>
<div id="ref-quanteda2018package" class="csl-entry" role="listitem">
Benoit, Kenneth, Kohei Watanabe, Haiyan Wang, Paul Nulty, Adam Obeng, Stefan Müller, and Akitaka Matsuo. 2018. <span>“Quanteda: An r Package for the Quantitative Analysis of Textual Data.”</span> <em>Journal of Open Source Software</em> 3 (30): 774. <a href="https://doi.org/10.21105/joss.00774">https://doi.org/10.21105/joss.00774</a>.
</div>
<div id="ref-corpusmate" class="csl-entry" role="listitem">
Crosthwaite, Peter, and Vít Baisa. 2024. <span>“A User-Friendly Corpus Tool for Disciplinary Data-Driven Learning: Introducing CorpusMate.”</span> <em>International Journal of Corpus Linguistics</em>, April. <a href="https://doi.org/10.1075/ijcl.23056.cro">https://doi.org/10.1075/ijcl.23056.cro</a>.
</div>
<div id="ref-noba2019replication" class="csl-entry" role="listitem">
Diener, Edward, and Robert Biswas-Diener. <span>“The Replication Crisis in Psychology.”</span> <a href="https://nobaproject.com/modules/the-replication-crisis-in-psychology">https://nobaproject.com/modules/the-replication-crisis-in-psychology</a>.
</div>
<div id="ref-fanelli2009fraud" class="csl-entry" role="listitem">
Fanelli, Daniele. <span>“How Many Scientists Fabricate and Falsify Research? A Systematic Review and Meta-Analysis of Survey Data.”</span> <em>PLoS One</em>, e5738.
</div>
<div id="ref-kilgarriff2004itri" class="csl-entry" role="listitem">
Kilgarriff, Adam, Pavel Rychly, Pavel Smrz, and David Tugwell. <span>“Itri-04-08 the Sketch Engine.”</span> <em>Information Technology</em>.
</div>
<div id="ref-lindquist2009corpus" class="csl-entry" role="listitem">
Lindquist, Hans. <em>Corpus Linguistics and the Description of English</em>. Edinburgh: Edinburgh University Press.
</div>
<div id="ref-sciencealert2018replication" class="csl-entry" role="listitem">
McRae, Mike. <span>“Science’s ’Replication Crisis’ Has Reached Even the Most Respectable Journals, Report Shows.”</span> <a href="https://www.sciencealert.com/replication-results-reproducibility-crisis-science-nature-journals">https://www.sciencealert.com/replication-results-reproducibility-crisis-science-nature-journals</a>.
</div>
<div id="ref-stafanowitsch2020corpus" class="csl-entry" role="listitem">
Stefanowitsch, Anatol. <em>Corpus Linguistics. A Guide to the Methodology</em>. Textbooks in Language Sciences. Berlin: Language Science Press.
</div>
<div id="ref-physorg2018replication" class="csl-entry" role="listitem">
Velasco, Emily. <span>“Researcher Discusses the the Science Replication Crisis.”</span> <a href="https://phys.org/news/2018-11-discusses-science-replication-crisis.html">https://phys.org/news/2018-11-discusses-science-replication-crisis.html</a>.
</div>
<div id="ref-atlantic2018psychology" class="csl-entry" role="listitem">
Yong, Ed. <span>“Psychology’s Replication Crisis Is Running Out of Excuses. Another Big Project Has Found That Only Half of Studies Can Be Repeated. And This Time, the Usual Explanations Fall Flat.”</span> <a href="https://www.theatlantic.com/science/archive/2018/11/psychologys-replication-crisis-real/576223/">https://www.theatlantic.com/science/archive/2018/11/psychologys-replication-crisis-real/576223/</a>.
</div>
</div></section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>If you want to render the R Notebook on your machine, i.e.&nbsp;knitting the document to html or a pdf, you need to make sure that you have R and RStudio installed and you also need to download the <a href="../..\assets/bibliography.bib"><strong>bibliography file</strong></a> and store it in the same folder where you store the Rmd file.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>This data is freely available after registration. To get access to the data represented in the Irish Component of the International Corpus of Eng;lish (or any other component), you or your institution will need a valid licence. You need to send your request from an academic edu e-mail to proof your educational status. To get an academic licence with download access please fill in <a href="https://www.ice-corpora.uzh.ch/dam/jcr:7ae594b2-ee97-4935-8022-7d2d91b60be4/ICElicence_UZH.pdf">the licence form (PDF, 82 KB)</a> and send it to <code>ice@es.uzh.ch</code>. You should get the credentials for downloading <a href="https://www.ice-corpora.uzh.ch/en/access/corpus-download.html">here</a> and unpacking the corpora within about 10 working days.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




<script src="../../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>