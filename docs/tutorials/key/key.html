<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Martin Schweinberger">

<title>Keyness and Keyword Analysis in R – Language Technology and Data Analysis Laboratory (LADAL)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-c00ead3b610a61ca0c1a529afe17c12f.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-VSGK4KYDQZ"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-VSGK4KYDQZ', { 'anonymize_ip': true});
</script>
<style>html{ scroll-behavior: smooth; }</style>
<script>
    // Wait for the document to be fully loaded
    document.addEventListener("DOMContentLoaded", function () {
        // Create a new div element to hold the dynamic content
        var newContainer = document.createElement("div");
        newContainer.classList.add("custom-banner");  // You can assign a class to the new container for styling

        // You can also add content inside the new container
        newContainer.innerHTML = `
          <div class="banner">
              <img src="/images/ladal_icon_white.png" alt="Icon" class="banner-icon">
              <span class="banner-text">Language Technology and Data Analysis Laboratory</span>
          </div>
      `

        // Select the header element
        var header = document.getElementById("quarto-header");

        // Select the nav element inside the header to place the new container just above it
        var navbar = header.querySelector("nav");

        // Insert the new container before the navbar element
        header.insertBefore(newContainer, navbar);
    });
</script>
<script src="../../site_libs/clipboard-1.7.1/clipboard.min.js"></script>
<link href="../../site_libs/primer-tooltips-1.4.0/build.css" rel="stylesheet">
<link href="../../site_libs/klippy-0.0.0.9500/css/klippy.min.css" rel="stylesheet">
<script src="../../site_libs/klippy-0.0.0.9500/js/klippy.min.js"></script>
<link href="../../site_libs/tabwid-1.1.3/tabwid.css" rel="stylesheet">
<script src="../../site_libs/tabwid-1.1.3/tabwid.js"></script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../css/styles.css">
</head>

<body class="floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Language Technology and Data Analysis Laboratory (LADAL)</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">HOME</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">ABOUT</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../events.html"> 
<span class="menu-text">EVENTS</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../tutorials.html"> 
<span class="menu-text">TUTORIALS</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../tools.html"> 
<span class="menu-text">TOOLS</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../resources.html"> 
<span class="menu-text">RESOURCES</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../contact.html"> 
<span class="menu-text">CONTACT</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul class="collapse">
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#keywords" id="toc-keywords" class="nav-link" data-scroll-target="#keywords">Keywords</a>
  <ul class="collapse">
  <li><a href="#dimensions-of-keyness" id="toc-dimensions-of-keyness" class="nav-link" data-scroll-target="#dimensions-of-keyness">Dimensions of keyness</a></li>
  <li><a href="#identifying-keywords" id="toc-identifying-keywords" class="nav-link" data-scroll-target="#identifying-keywords">Identifying keywords</a></li>
  <li><a href="#visualising-keywords" id="toc-visualising-keywords" class="nav-link" data-scroll-target="#visualising-keywords">Visualising keywords</a></li>
  <li><a href="#comparative-wordclouds" id="toc-comparative-wordclouds" class="nav-link" data-scroll-target="#comparative-wordclouds">Comparative wordclouds</a></li>
  </ul></li>
  <li><a href="#citation-session-info" id="toc-citation-session-info" class="nav-link" data-scroll-target="#citation-session-info">Citation &amp; Session Info</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Keyness and Keyword Analysis in R</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Martin Schweinberger </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<p><img src="../../images/uq1.jpg" class="img-fluid" style="width:100.0%"></p>
<section id="introduction" class="level1 unnumbered">
<h1 class="unnumbered">Introduction</h1>
<p>This tutorial introduces keyness and keyword analysis with R and shows how to extract and visualize keywords.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<p><img src="../../images/gy_chili.png" class="img-fluid" style="float:right; padding:10px;width:15.0%"></p>
<p>This tutorial is aimed at beginners and intermediate users of R with the aim of showcasing how to extract keywords from and analyze keywords in textual data using R. The aim is not to provide a fully-fledged analysis but rather to show and exemplify selected useful methods associated with keyness and keyword analysis.</p>
<div class="warning" style="padding:0.1em; background-color:#f2f2f2; color:#51247a">
<span>
<p style="margin-top:1em; text-align:center">
To be able to follow this tutorial, we suggest you check out and familiarize yourself with the content of the following <strong>R Basics</strong> tutorials:<br>
</p>
<p style="margin-top:1em; text-align:left">
</p><ul>
<li>
<a href="tutorials/intror.html">Getting started with R</a>
</li>
<li>
<a href="tutorials/load.html">Loading, saving, and generating data in R</a>
</li>
<li>
<a href="tutorials/string.html">String Processing in R</a>
</li>
<li>
<a href="tutorials/regex.html">Regular Expressions in R</a>
</li>
</ul>
<p></p>
<p style="margin-top:1em; text-align:center">
Click <a href="tutorials/coll/coll.qmd">here</a><a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> to download the <strong>entire R Notebook</strong> for this tutorial.
</p>
<div class="text-center">
<p><a href="https://binderhub.atap-binder.cloud.edu.au/v2/gh/SLCLADAL/interactive-notebooks-environment/main?urlpath=git-pull%3Frepo=https://github.com/SLCLADAL/interactive-notebooks%26urlpath=lab/tree/interactive-notebooks/notebooks/key_cb.ipynb%26branch=main"><img src="https://mybinder.org/badge_logo.svg" class="img-fluid"></a></p>
<p>Click <a href="https://binderhub.atap-binder.cloud.edu.au/v2/gh/SLCLADAL/interactive-notebooks-environment/main?urlpath=git-pull%3Frepo=https://github.com/SLCLADAL/interactive-notebooks%26urlpath=lab/tree/interactive-notebooks/notebooks/key_cb.ipynb%26branch=main"><strong>here</strong></a> to open an interactive Jupyter notebook that allows you execute, change, and edit the code as well as upload your own data.</p>
</div>
<p style="margin-left:1em;">
</p>
<p></p>
</span></div>
<p><br></p>
<div class="warning" style="padding:0.1em; background-color:#51247a; color:#f2f2f2">
<span>
<p style="margin-top:1em; text-align:center">
<strong>KEYWORD TOOL</strong>
</p>
<p style="margin-top:1em; text-align:center">
</p>
<div class="text-center">
<p><a href="https://binderhub.atap-binder.cloud.edu.au/v2/gh/SLCLADAL/interactive-notebooks-environment/main?urlpath=git-pull%3Frepo=https://github.com/SLCLADAL/interactive-notebooks%26urlpath=lab/tree/interactive-notebooks/notebooks/keytool.ipynb%26branch=main"><img src="https://mybinder.org/badge_logo.svg" class="img-fluid"></a></p>
<p>Click <a href="https://binderhub.atap-binder.cloud.edu.au/v2/gh/SLCLADAL/interactive-notebooks-environment/main?urlpath=git-pull%3Frepo=https://github.com/SLCLADAL/interactive-notebooks%26urlpath=lab/tree/interactive-notebooks/notebooks/keytool.ipynb%26branch=main"><strong>here</strong></a> to to open an notebook-based tool <br>that <b>calculates keyness statistics</b> and allows you to download the results.</p>
</div>
<p style="margin-left:1em;">
</p>
<p></p>
</span></div>
<p><br></p>
<p><br></p>
<div class="warning" style="padding:0.1em; background-color:#f2f2f2; color:#51247a">
<span>
<p style="margin-top:1em; text-align:center">
<b> How can you detect keywords, i.e.&nbsp;words that are characteristic of a text (or a collection of texts)?</b><br>
</p>
<p style="margin-left:1em;">
</p>
<p></p>
</span></div>
<p><br></p>
<p>This tutorial aims to show how you can answer this question.</p>
<p><strong>Preparation and session set up</strong></p>
<p>This tutorial is based on R. If you have not installed R or are new to it, you will find an introduction to and more information how to use R <a href="tutorials/intror/intror.html">here</a>. For this tutorials, we need to install certain <em>packages</em> from an R <em>library</em> so that the scripts shown below are executed without errors. Before turning to the code below, please install the packages by running the code below this paragraph. If you have already installed the packages mentioned below, then you can skip ahead and ignore this section. To install the necessary packages, simply run the following code - it may take some time (between 1 and 5 minutes to install all of the libraries so you do not need to worry if it takes some time).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># set options</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">stringsAsFactors =</span> F)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">scipen =</span> <span class="dv">999</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">max.print =</span> <span class="dv">1000</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co"># install packages</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"flextable"</span>)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"Matrix"</span>)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"quanteda"</span>)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"quanteda.textstats"</span>)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"quanteda.textplots"</span>)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"dplyr"</span>)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"stringr"</span>)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"tm"</span>)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"sna"</span>)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"tidytext"</span>)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"ggplot2"</span>)</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="co"># install klippy for copy-to-clipboard button in code chunks</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"remotes"</span>)</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">"rlesur/klippy"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Next, we load the packages.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load packages</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(flextable)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(Matrix)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textstats)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tm)</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sna)</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="co"># activate klippy for copy-to-clipboard button</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>klippy<span class="sc">::</span><span class="fu">klippy</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<script>
  addClassKlippyTo("pre.r, pre.markdown");
  addKlippy('left', 'top', 'auto', '1', 'Copy code', 'Copied!');
</script>
</div>
</div>
</section>
<section id="keywords" class="level1 unnumbered">
<h1 class="unnumbered">Keywords</h1>
<p>Keywords play a pivotal role in text analysis, serving as distinctive terms that hold particular significance within a given text, context, or collection. These words stand out due to their heightened frequency in a specific text or context, setting them apart from their occurrence in another. In essence, keywords are linguistic markers that encapsulate the essence or topical focus of a document or dataset. The process of identifying keywords involves a methodology akin to the one employed for detecting collocations using kwics. This entails comparing the use of a particular word in corpus A, against its use in corpus B. By discerning the frequency disparities, we gain valuable insights into the salient terms that contribute significantly to the unique character and thematic emphasis of a given text or context.</p>
<div class="warning" style="padding:0.1em; background-color:#51247a; color:#f2f2f2">
<span>
<p style="margin-top:1em; text-align:center">
<strong>LADAL TOOL</strong>
</p>
<p style="margin-top:1em; text-align:center">
</p>
<div class="text-center">
<p><a href="https://binderhub.atap-binder.cloud.edu.au/v2/gh/SLCLADAL/interactive-notebooks-environment/main?urlpath=git-pull%3Frepo=https://github.com/SLCLADAL/interactive-notebooks%26urlpath=lab/tree/interactive-notebooks/notebooks/keytool.ipynb%26branch=main"><img src="https://mybinder.org/badge_logo.svg" class="img-fluid"></a></p>
<p>Click <a href="https://binderhub.atap-binder.cloud.edu.au/v2/gh/SLCLADAL/interactive-notebooks-environment/main?urlpath=git-pull%3Frepo=https://github.com/SLCLADAL/interactive-notebooks%26urlpath=lab/tree/interactive-notebooks/notebooks/keytool.ipynb%26branch=main"><strong>here</strong></a> to to open an notebook-based tool <br>that <b>calculates keyness statistics</b> and allows you to download the results.</p>
</div>
<p style="margin-left:1em;">
</p>
<p></p>
</span></div>
<p><br></p>
<section id="dimensions-of-keyness" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="dimensions-of-keyness">Dimensions of keyness</h2>
<p>Before we start with the practical part of this tutorial, it is important to talk about the different dimensions of keyness <span class="citation" data-cites="soenning2023key">(see <a href="#ref-soenning2023key" role="doc-biblioref">Sönning 2023</a>)</span>.</p>
<p>Keyness analysis identifies typical items in a discourse domain, where typicalness traditionally relates to frequency of occurrence. The emphasis is on items used more frequently in the target corpus compared to a reference corpus. <span class="citation" data-cites="egbert2019incorporating">Egbert and Biber (<a href="#ref-egbert2019incorporating" role="doc-biblioref">2019</a>)</span> expanded this notion, highlighting two criteria for typicalness: <em>content-distinctiveness</em> and <em>content-generalizability</em>.</p>
<ul>
<li><p>Content-distinctiveness refers to an item’s association with the domain and its topical relevance.</p></li>
<li><p>Content-generalizability pertains to an item’s widespread usage across various texts within the domain.</p></li>
</ul>
<p>These criteria bridge traditional keyness approaches with broader linguistic perspectives, emphasizing both the distinctiveness and generalizability of key items within a corpus.</p>
<p>Following <span class="citation" data-cites="soenning2023key">Sönning (<a href="#ref-soenning2023key" role="doc-biblioref">2023</a>)</span>, we adopt <span class="citation" data-cites="egbert2019incorporating">Egbert and Biber (<a href="#ref-egbert2019incorporating" role="doc-biblioref">2019</a>)</span> keyness criteria, distinguishing between frequency-oriented and dispersion-oriented approaches to assess keyness. These perspectives capture distinct, linguistically meaningful attributes of typicalness. We also differentiate between keyness features inherent to the target variety and those that emerge from comparing it to a reference variety. This four-way classification, detailed in the table below, links methodological choices to the linguistic meaning conveyed by quantitative measures. Typical items exhibit a sufficiently high occurrence rate to be discernible in the target variety, with discernibility measured solely within the target corpus. Key items are also distinct, being used more frequently than in reference domains of language use. While discernibility and distinctiveness both rely on frequency, they measure different aspects of typicalness.</p>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-a77be490{table-layout:auto;width:75%;}.cl-a776002a{font-family:'DejaVu Sans';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-a776003e{font-family:'DejaVu Sans';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-a778735a{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-a77889e4{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a77889ee{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a77889ef{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a77889f8{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a77889f9{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a77889fa{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a7788a02{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a7788a03{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a7788a04{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-a77be490"><thead><tr style="overflow-wrap:break-word;"><th class="cl-a77889e4"><p class="cl-a778735a"><span class="cl-a776002a">Analysis</span></p></th><th class="cl-a77889ee"><p class="cl-a778735a"><span class="cl-a776002a">Frequency.oriented</span></p></th><th class="cl-a77889ef"><p class="cl-a778735a"><span class="cl-a776002a">Dispersion.oriented</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-a77889f8"><p class="cl-a778735a"><span class="cl-a776003e">Target variety in isolation</span></p></td><td class="cl-a77889f9"><p class="cl-a778735a"><span class="cl-a776003e">Discernibility of item in the target variety</span></p></td><td class="cl-a77889fa"><p class="cl-a778735a"><span class="cl-a776003e">Generality across texts in the target variety</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-a7788a02"><p class="cl-a778735a"><span class="cl-a776003e">Comparison to reference variety</span></p></td><td class="cl-a7788a03"><p class="cl-a778735a"><span class="cl-a776003e">Distinctiveness relative to the reference variety</span></p></td><td class="cl-a7788a04"><p class="cl-a778735a"><span class="cl-a776003e">Comparative generality relative to the reference variety</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>The second aspect of keyness involves an item’s dispersion across texts in the target domain, indicating its widespread use. A typical item should appear evenly across various texts within the target domain, reflecting its generality. This breadth of usage can be compared to its occurrence in the reference domain, termed as comparative generality. Therefore, a key item should exhibit greater prevalence across target texts compared to those in the reference domain.</p>
</section>
<section id="identifying-keywords" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="identifying-keywords">Identifying keywords</h2>
<p>Here, we focus on a frequency-based approach that assesses distinctiveness relative to the reference variety. To identify these keywords, we can follow the procedure we have used to identify collocations using kwics - the idea is essentially identical: we compare the use of a word in a <em>target</em> corpus A to its use in a <em>reference</em> corpus.</p>
<p>To determine if a token is a keyword and if it occurs significantly more frequently in a target corpus compared to a reference corpus, we use the following information (that is provided by the table above):</p>
<ul>
<li><p>O11 = Number of times word<sub>x</sub> occurs in <code>target corpus</code></p></li>
<li><p>O12 = Number of times word<sub>x</sub> occurs in <code>reference corpus</code> (without <code>target corpus</code>)</p></li>
<li><p>O21 = Number of times other words occur in <code>target corpus</code></p></li>
<li><p>O22 = Number of times other words occur in <code>reference corpus</code></p></li>
</ul>
<p>Example:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: center;">target corpus</th>
<th style="text-align: right;">reference corpus</th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>token</strong></td>
<td style="text-align: center;">O<sub>11</sub></td>
<td style="text-align: right;">O<sub>12</sub></td>
<td>= R<sub>1</sub></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>other tokens</strong></td>
<td style="text-align: center;">O<sub>21</sub></td>
<td style="text-align: right;">O<sub>22</sub></td>
<td>= R<sub>2</sub></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: center;">= C<sub>1</sub></td>
<td style="text-align: right;">= C<sub>2</sub></td>
<td>= N</td>
</tr>
</tbody>
</table>
<p>We begin with loading two texts (text1 is our <em>target</em> and text2 is our <em>reference</em>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load data</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>text1 <span class="ot">&lt;-</span> base<span class="sc">::</span><span class="fu">readRDS</span>(<span class="st">"tutorials/key/data/orwell.rda"</span>, <span class="st">"rb"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(<span class="at">collapse =</span> <span class="st">" "</span>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>text2 <span class="ot">&lt;-</span> base<span class="sc">::</span><span class="fu">readRDS</span>(<span class="st">"tutorials/key/data/melville.rda"</span>, <span class="st">"rb"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(<span class="at">collapse =</span> <span class="st">" "</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-a7997dfc{table-layout:auto;width:95%;}.cl-a795048e{font-family:'DejaVu Sans';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-a7950498{font-family:'DejaVu Sans';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-a796f01e{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-a7970248{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a7970249{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-a7997dfc"><thead><tr style="overflow-wrap:break-word;"><th class="cl-a7970248"><p class="cl-a796f01e"><span class="cl-a795048e">.</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-a7970249"><p class="cl-a796f01e"><span class="cl-a7950498">1984 George Orwell Part 1, Chapter 1 It was a bright cold day in April, and the clocks were striking thirteen. Winston Smith, his chin nuzzled into his breast in an effort to escape the vile wind, sli</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>As you can see, text1 is George Orwell’s <em>1984</em>.</p>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-a7a636b4{table-layout:auto;width:95%;}.cl-a7a19a28{font-family:'DejaVu Sans';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-a7a19a3c{font-family:'DejaVu Sans';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-a7a3bb14{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-a7a3cdca{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a7a3cdcb{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-a7a636b4"><thead><tr style="overflow-wrap:break-word;"><th class="cl-a7a3cdca"><p class="cl-a7a3bb14"><span class="cl-a7a19a28">.</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-a7a3cdcb"><p class="cl-a7a3bb14"><span class="cl-a7a19a3c">MOBY-DICK; or, THE WHALE. By Herman Melville CHAPTER 1. Loomings. Call me Ishmael. Some years ago—never mind how long precisely—having little or no money in my purse, and nothing particular to interes</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>The table shows that text2 is Herman Melville’s <em>Moby Dick</em>.</p>
<p>After loading the two texts, we create a frequency table of first text.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>text1_words <span class="ot">&lt;-</span> text1 <span class="sc">%&gt;%</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># remove non-word characters</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    stringr<span class="sc">::</span><span class="fu">str_remove_all</span>(<span class="st">"[^[:alpha:] ]"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># convert to lower</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tolower</span>() <span class="sc">%&gt;%</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># tokenize the corpus files</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    quanteda<span class="sc">::</span><span class="fu">tokens</span>(</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">remove_punct =</span> T,</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">remove_symbols =</span> T,</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">remove_numbers =</span> T</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># unlist the tokens to create a data frame</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unlist</span>() <span class="sc">%&gt;%</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># rename the column to 'token'</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">token =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># group by 'token' and count the occurrences</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(token) <span class="sc">%&gt;%</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># add column stating where the frequency list is 'from'</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">type =</span> <span class="st">"text1"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now, we create a frequency table of second text.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>text2_words <span class="ot">&lt;-</span> text2 <span class="sc">%&gt;%</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># remove non-word characters</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    stringr<span class="sc">::</span><span class="fu">str_remove_all</span>(<span class="st">"[^[:alpha:] ]"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># convert to lower</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tolower</span>() <span class="sc">%&gt;%</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># tokenize the corpus files</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    quanteda<span class="sc">::</span><span class="fu">tokens</span>(</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">remove_punct =</span> T,</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">remove_symbols =</span> T,</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">remove_numbers =</span> T</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># unlist the tokens to create a data frame</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unlist</span>() <span class="sc">%&gt;%</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># rename the column to 'token'</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">token =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># group by 'token' and count the occurrences</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(token) <span class="sc">%&gt;%</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># add column stating where the frequency list is 'from'</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">type =</span> <span class="st">"text2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In a next step, we combine the tables.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>texts_df <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">left_join</span>(text1_words, text2_words, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"token"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># rename columns and select relevant columns</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">rename</span>(</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">text1 =</span> n.x,</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">text2 =</span> n.y</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>type.x, <span class="sc">-</span>type.y) <span class="sc">%&gt;%</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># replace NA values with 0 in 'corpus' and 'kwic' columns</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    tidyr<span class="sc">::</span><span class="fu">replace_na</span>(<span class="fu">list</span>(<span class="at">text1 =</span> <span class="dv">0</span>, <span class="at">text2 =</span> <span class="dv">0</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-a8701bb4{table-layout:auto;width:95%;}.cl-a86a38fc{font-family:'DejaVu Sans';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-a86a3906{font-family:'DejaVu Sans';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-a86ca95c{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-a86ca966{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-a86cc2b6{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a86cc2b7{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a86cc2c0{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a86cc2ca{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a86cc2cb{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a86cc2cc{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a86cc2d4{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a86cc2d5{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a86cc2d6{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a86cc2de{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a86cc2df{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a86cc2e8{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-a8701bb4"><thead><tr style="overflow-wrap:break-word;"><th class="cl-a86cc2b6"><p class="cl-a86ca95c"><span class="cl-a86a38fc">token</span></p></th><th class="cl-a86cc2b7"><p class="cl-a86ca966"><span class="cl-a86a38fc">text1</span></p></th><th class="cl-a86cc2c0"><p class="cl-a86ca966"><span class="cl-a86a38fc">text2</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-a86cc2ca"><p class="cl-a86ca95c"><span class="cl-a86a3906">a</span></p></td><td class="cl-a86cc2cb"><p class="cl-a86ca966"><span class="cl-a86a3906">2,390</span></p></td><td class="cl-a86cc2cc"><p class="cl-a86ca966"><span class="cl-a86a3906">4,536</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-a86cc2d4"><p class="cl-a86ca95c"><span class="cl-a86a3906">aaronson</span></p></td><td class="cl-a86cc2d5"><p class="cl-a86ca966"><span class="cl-a86a3906">8</span></p></td><td class="cl-a86cc2d6"><p class="cl-a86ca966"><span class="cl-a86a3906">0</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-a86cc2ca"><p class="cl-a86ca95c"><span class="cl-a86a3906">aback</span></p></td><td class="cl-a86cc2cb"><p class="cl-a86ca966"><span class="cl-a86a3906">2</span></p></td><td class="cl-a86cc2cc"><p class="cl-a86ca966"><span class="cl-a86a3906">2</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-a86cc2d4"><p class="cl-a86ca95c"><span class="cl-a86a3906">abandon</span></p></td><td class="cl-a86cc2d5"><p class="cl-a86ca966"><span class="cl-a86a3906">3</span></p></td><td class="cl-a86cc2d6"><p class="cl-a86ca966"><span class="cl-a86a3906">3</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-a86cc2ca"><p class="cl-a86ca95c"><span class="cl-a86a3906">abandoned</span></p></td><td class="cl-a86cc2cb"><p class="cl-a86ca966"><span class="cl-a86a3906">4</span></p></td><td class="cl-a86cc2cc"><p class="cl-a86ca966"><span class="cl-a86a3906">7</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-a86cc2d4"><p class="cl-a86ca95c"><span class="cl-a86a3906">abashed</span></p></td><td class="cl-a86cc2d5"><p class="cl-a86ca966"><span class="cl-a86a3906">1</span></p></td><td class="cl-a86cc2d6"><p class="cl-a86ca966"><span class="cl-a86a3906">2</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-a86cc2ca"><p class="cl-a86ca95c"><span class="cl-a86a3906">abbreviated</span></p></td><td class="cl-a86cc2cb"><p class="cl-a86ca966"><span class="cl-a86a3906">1</span></p></td><td class="cl-a86cc2cc"><p class="cl-a86ca966"><span class="cl-a86a3906">0</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-a86cc2d4"><p class="cl-a86ca95c"><span class="cl-a86a3906">abiding</span></p></td><td class="cl-a86cc2d5"><p class="cl-a86ca966"><span class="cl-a86a3906">1</span></p></td><td class="cl-a86cc2d6"><p class="cl-a86ca966"><span class="cl-a86a3906">1</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-a86cc2ca"><p class="cl-a86ca95c"><span class="cl-a86a3906">ability</span></p></td><td class="cl-a86cc2cb"><p class="cl-a86ca966"><span class="cl-a86a3906">1</span></p></td><td class="cl-a86cc2cc"><p class="cl-a86ca966"><span class="cl-a86a3906">1</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-a86cc2de"><p class="cl-a86ca95c"><span class="cl-a86a3906">abject</span></p></td><td class="cl-a86cc2df"><p class="cl-a86ca966"><span class="cl-a86a3906">3</span></p></td><td class="cl-a86cc2e8"><p class="cl-a86ca966"><span class="cl-a86a3906">0</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>We now calculate the frequencies of the observed and expected frequencies as well as the row and column totals.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>texts_df <span class="sc">%&gt;%</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">text1 =</span> <span class="fu">as.numeric</span>(text1),</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">text2 =</span> <span class="fu">as.numeric</span>(text2)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">C1 =</span> <span class="fu">sum</span>(text1),</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">C2 =</span> <span class="fu">sum</span>(text2),</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">N =</span> C1 <span class="sc">+</span> C2</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">rowwise</span>() <span class="sc">%&gt;%</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">R1 =</span> text1 <span class="sc">+</span> text2,</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">R2 =</span> N <span class="sc">-</span> R1,</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">O11 =</span> text1,</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">O11 =</span> <span class="fu">ifelse</span>(O11 <span class="sc">==</span> <span class="dv">0</span>, O11 <span class="sc">+</span> <span class="fl">0.1</span>, O11),</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">O12 =</span> R1 <span class="sc">-</span> O11,</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">O21 =</span> C1 <span class="sc">-</span> O11,</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">O22 =</span> C2 <span class="sc">-</span> O12</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">E11 =</span> (R1 <span class="sc">*</span> C1) <span class="sc">/</span> N,</span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">E12 =</span> (R1 <span class="sc">*</span> C2) <span class="sc">/</span> N,</span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">E21 =</span> (R2 <span class="sc">*</span> C1) <span class="sc">/</span> N,</span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">E22 =</span> (R2 <span class="sc">*</span> C2) <span class="sc">/</span> N</span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>text1, <span class="sc">-</span>text2) <span class="ot">-&gt;</span> stats_tb2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-a8d35922{table-layout:auto;width:95%;}.cl-a8cdb83c{font-family:'DejaVu Sans';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-a8cdb850{font-family:'DejaVu Sans';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-a8cffa02{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-a8cffa0c{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-a8d01050{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a8d01051{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a8d01052{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a8d0105a{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a8d0105b{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a8d0105c{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a8d01064{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a8d01065{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a8d01066{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a8d0106e{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a8d0106f{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a8d01078{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-a8d35922"><thead><tr style="overflow-wrap:break-word;"><th class="cl-a8d01050"><p class="cl-a8cffa02"><span class="cl-a8cdb83c">token</span></p></th><th class="cl-a8d01051"><p class="cl-a8cffa0c"><span class="cl-a8cdb83c">C1</span></p></th><th class="cl-a8d01051"><p class="cl-a8cffa0c"><span class="cl-a8cdb83c">C2</span></p></th><th class="cl-a8d01051"><p class="cl-a8cffa0c"><span class="cl-a8cdb83c">N</span></p></th><th class="cl-a8d01051"><p class="cl-a8cffa0c"><span class="cl-a8cdb83c">R1</span></p></th><th class="cl-a8d01051"><p class="cl-a8cffa0c"><span class="cl-a8cdb83c">R2</span></p></th><th class="cl-a8d01051"><p class="cl-a8cffa0c"><span class="cl-a8cdb83c">O11</span></p></th><th class="cl-a8d01051"><p class="cl-a8cffa0c"><span class="cl-a8cdb83c">O12</span></p></th><th class="cl-a8d01051"><p class="cl-a8cffa0c"><span class="cl-a8cdb83c">O21</span></p></th><th class="cl-a8d01051"><p class="cl-a8cffa0c"><span class="cl-a8cdb83c">O22</span></p></th><th class="cl-a8d01051"><p class="cl-a8cffa0c"><span class="cl-a8cdb83c">E11</span></p></th><th class="cl-a8d01051"><p class="cl-a8cffa0c"><span class="cl-a8cdb83c">E12</span></p></th><th class="cl-a8d01051"><p class="cl-a8cffa0c"><span class="cl-a8cdb83c">E21</span></p></th><th class="cl-a8d01052"><p class="cl-a8cffa0c"><span class="cl-a8cdb83c">E22</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-a8d0105a"><p class="cl-a8cffa02"><span class="cl-a8cdb850">a</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">94,677</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">169,163</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">263,840</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">6,926</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">256,914</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">2,390</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">4,536</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">92,287</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">164,627</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">2,485.3430185</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">4,440.6569815</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">92,191.66</span></p></td><td class="cl-a8d0105c"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">164,722.3</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-a8d01064"><p class="cl-a8cffa02"><span class="cl-a8cdb850">aaronson</span></p></td><td class="cl-a8d01065"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">94,677</span></p></td><td class="cl-a8d01065"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">169,163</span></p></td><td class="cl-a8d01065"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">263,840</span></p></td><td class="cl-a8d01065"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">8</span></p></td><td class="cl-a8d01065"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">263,832</span></p></td><td class="cl-a8d01065"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">8</span></p></td><td class="cl-a8d01065"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">0</span></p></td><td class="cl-a8d01065"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">94,669</span></p></td><td class="cl-a8d01065"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">169,163</span></p></td><td class="cl-a8d01065"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">2.8707398</span></p></td><td class="cl-a8d01065"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">5.1292602</span></p></td><td class="cl-a8d01065"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">94,674.13</span></p></td><td class="cl-a8d01066"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">169,157.9</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-a8d0105a"><p class="cl-a8cffa02"><span class="cl-a8cdb850">aback</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">94,677</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">169,163</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">263,840</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">4</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">263,836</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">2</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">2</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">94,675</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">169,161</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">1.4353699</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">2.5646301</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">94,675.56</span></p></td><td class="cl-a8d0105c"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">169,160.4</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-a8d01064"><p class="cl-a8cffa02"><span class="cl-a8cdb850">abandon</span></p></td><td class="cl-a8d01065"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">94,677</span></p></td><td class="cl-a8d01065"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">169,163</span></p></td><td class="cl-a8d01065"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">263,840</span></p></td><td class="cl-a8d01065"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">6</span></p></td><td class="cl-a8d01065"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">263,834</span></p></td><td class="cl-a8d01065"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">3</span></p></td><td class="cl-a8d01065"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">3</span></p></td><td class="cl-a8d01065"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">94,674</span></p></td><td class="cl-a8d01065"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">169,160</span></p></td><td class="cl-a8d01065"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">2.1530549</span></p></td><td class="cl-a8d01065"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">3.8469451</span></p></td><td class="cl-a8d01065"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">94,674.85</span></p></td><td class="cl-a8d01066"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">169,159.2</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-a8d0105a"><p class="cl-a8cffa02"><span class="cl-a8cdb850">abandoned</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">94,677</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">169,163</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">263,840</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">11</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">263,829</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">4</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">7</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">94,673</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">169,156</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">3.9472673</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">7.0527327</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">94,673.05</span></p></td><td class="cl-a8d0105c"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">169,155.9</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-a8d01064"><p class="cl-a8cffa02"><span class="cl-a8cdb850">abashed</span></p></td><td class="cl-a8d01065"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">94,677</span></p></td><td class="cl-a8d01065"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">169,163</span></p></td><td class="cl-a8d01065"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">263,840</span></p></td><td class="cl-a8d01065"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">3</span></p></td><td class="cl-a8d01065"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">263,837</span></p></td><td class="cl-a8d01065"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">1</span></p></td><td class="cl-a8d01065"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">2</span></p></td><td class="cl-a8d01065"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">94,676</span></p></td><td class="cl-a8d01065"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">169,161</span></p></td><td class="cl-a8d01065"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">1.0765274</span></p></td><td class="cl-a8d01065"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">1.9234726</span></p></td><td class="cl-a8d01065"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">94,675.92</span></p></td><td class="cl-a8d01066"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">169,161.1</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-a8d0105a"><p class="cl-a8cffa02"><span class="cl-a8cdb850">abbreviated</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">94,677</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">169,163</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">263,840</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">1</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">263,839</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">1</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">0</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">94,676</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">169,163</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">0.3588425</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">0.6411575</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">94,676.64</span></p></td><td class="cl-a8d0105c"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">169,162.4</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-a8d01064"><p class="cl-a8cffa02"><span class="cl-a8cdb850">abiding</span></p></td><td class="cl-a8d01065"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">94,677</span></p></td><td class="cl-a8d01065"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">169,163</span></p></td><td class="cl-a8d01065"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">263,840</span></p></td><td class="cl-a8d01065"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">2</span></p></td><td class="cl-a8d01065"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">263,838</span></p></td><td class="cl-a8d01065"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">1</span></p></td><td class="cl-a8d01065"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">1</span></p></td><td class="cl-a8d01065"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">94,676</span></p></td><td class="cl-a8d01065"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">169,162</span></p></td><td class="cl-a8d01065"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">0.7176850</span></p></td><td class="cl-a8d01065"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">1.2823150</span></p></td><td class="cl-a8d01065"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">94,676.28</span></p></td><td class="cl-a8d01066"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">169,161.7</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-a8d0105a"><p class="cl-a8cffa02"><span class="cl-a8cdb850">ability</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">94,677</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">169,163</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">263,840</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">2</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">263,838</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">1</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">1</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">94,676</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">169,162</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">0.7176850</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">1.2823150</span></p></td><td class="cl-a8d0105b"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">94,676.28</span></p></td><td class="cl-a8d0105c"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">169,161.7</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-a8d0106e"><p class="cl-a8cffa02"><span class="cl-a8cdb850">abject</span></p></td><td class="cl-a8d0106f"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">94,677</span></p></td><td class="cl-a8d0106f"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">169,163</span></p></td><td class="cl-a8d0106f"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">263,840</span></p></td><td class="cl-a8d0106f"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">3</span></p></td><td class="cl-a8d0106f"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">263,837</span></p></td><td class="cl-a8d0106f"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">3</span></p></td><td class="cl-a8d0106f"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">0</span></p></td><td class="cl-a8d0106f"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">94,674</span></p></td><td class="cl-a8d0106f"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">169,163</span></p></td><td class="cl-a8d0106f"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">1.0765274</span></p></td><td class="cl-a8d0106f"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">1.9234726</span></p></td><td class="cl-a8d0106f"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">94,675.92</span></p></td><td class="cl-a8d01078"><p class="cl-a8cffa0c"><span class="cl-a8cdb850">169,161.1</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>We can now calculate the keyness measures.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>stats_tb2 <span class="sc">%&gt;%</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># determine number of rows</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">Rws =</span> <span class="fu">nrow</span>(.)) <span class="sc">%&gt;%</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># work row-wise</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">rowwise</span>() <span class="sc">%&gt;%</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># calculate fishers' exact test</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">p =</span> <span class="fu">as.vector</span>(<span class="fu">unlist</span>(<span class="fu">fisher.test</span>(<span class="fu">matrix</span>(<span class="fu">c</span>(O11, O12, O21, O22),</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">byrow =</span> T</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    ))[<span class="dv">1</span>]))) <span class="sc">%&gt;%</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># extract descriptives</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">ptw_target =</span> O11 <span class="sc">/</span> C1 <span class="sc">*</span> <span class="dv">1000</span>,</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">ptw_ref =</span> O12 <span class="sc">/</span> C2 <span class="sc">*</span> <span class="dv">1000</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># extract x2 statistics</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">X2 =</span> (O11 <span class="sc">-</span> E11)<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> E11 <span class="sc">+</span> (O12 <span class="sc">-</span> E12)<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> E12 <span class="sc">+</span> (O21 <span class="sc">-</span> E21)<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> E21 <span class="sc">+</span> (O22 <span class="sc">-</span> E22)<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> E22) <span class="sc">%&gt;%</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># extract keyness measures</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">phi =</span> <span class="fu">sqrt</span>((X2 <span class="sc">/</span> N)),</span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">MI =</span> <span class="fu">log2</span>(O11 <span class="sc">/</span> E11),</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">t.score =</span> (O11 <span class="sc">-</span> E11) <span class="sc">/</span> <span class="fu">sqrt</span>(O11),</span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">PMI =</span> <span class="fu">log2</span>((O11 <span class="sc">/</span> N) <span class="sc">/</span> ((O11 <span class="sc">+</span> O12) <span class="sc">/</span> N) <span class="sc">*</span></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>            ((O11 <span class="sc">+</span> O21) <span class="sc">/</span> N)),</span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">DeltaP =</span> (O11 <span class="sc">/</span> R1) <span class="sc">-</span> (O21 <span class="sc">/</span> R2),</span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">LogOddsRatio =</span> <span class="fu">log</span>(((O11 <span class="sc">+</span> <span class="fl">0.5</span>) <span class="sc">*</span> (O22 <span class="sc">+</span> <span class="fl">0.5</span>)) <span class="sc">/</span> ((O12 <span class="sc">+</span> <span class="fl">0.5</span>) <span class="sc">*</span> (O21 <span class="sc">+</span> <span class="fl">0.5</span>))),</span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>        <span class="at">G2 =</span> <span class="dv">2</span> <span class="sc">*</span> ((O11 <span class="sc">+</span> <span class="fl">0.001</span>) <span class="sc">*</span> <span class="fu">log</span>((O11 <span class="sc">+</span> <span class="fl">0.001</span>) <span class="sc">/</span> E11) <span class="sc">+</span> (O12 <span class="sc">+</span> <span class="fl">0.001</span>) <span class="sc">*</span> <span class="fu">log</span>((O12 <span class="sc">+</span> <span class="fl">0.001</span>) <span class="sc">/</span> E12) <span class="sc">+</span> O21 <span class="sc">*</span> <span class="fu">log</span>(O21 <span class="sc">/</span> E21) <span class="sc">+</span> O22 <span class="sc">*</span> <span class="fu">log</span>(O22 <span class="sc">/</span> E22)),</span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>        <span class="co"># traditional keyness measures</span></span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>        <span class="at">RateRatio =</span> ((O11 <span class="sc">+</span> <span class="fl">0.001</span>) <span class="sc">/</span> (C1 <span class="sc">*</span> <span class="dv">1000</span>)) <span class="sc">/</span> ((O12 <span class="sc">+</span> <span class="fl">0.001</span>) <span class="sc">/</span> (C2 <span class="sc">*</span> <span class="dv">1000</span>)),</span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a>        <span class="at">RateDifference =</span> (O11 <span class="sc">/</span> (C1 <span class="sc">*</span> <span class="dv">1000</span>)) <span class="sc">-</span> (O12 <span class="sc">/</span> (C2 <span class="sc">*</span> <span class="dv">1000</span>)),</span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a>        <span class="at">DifferenceCoefficient =</span> RateDifference <span class="sc">/</span> <span class="fu">sum</span>((O11 <span class="sc">/</span> (C1 <span class="sc">*</span> <span class="dv">1000</span>)), (O12 <span class="sc">/</span> (C2 <span class="sc">*</span> <span class="dv">1000</span>))),</span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a>        <span class="at">OddsRatio =</span> ((O11 <span class="sc">+</span> <span class="fl">0.5</span>) <span class="sc">*</span> (O22 <span class="sc">+</span> <span class="fl">0.5</span>)) <span class="sc">/</span> ((O12 <span class="sc">+</span> <span class="fl">0.5</span>) <span class="sc">*</span> (O21 <span class="sc">+</span> <span class="fl">0.5</span>)),</span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a>        <span class="at">LLR =</span> <span class="dv">2</span> <span class="sc">*</span> (O11 <span class="sc">*</span> (<span class="fu">log</span>((O11 <span class="sc">/</span> E11)))),</span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a>        <span class="at">RDF =</span> <span class="fu">abs</span>((O11 <span class="sc">/</span> C1) <span class="sc">-</span> (O12 <span class="sc">/</span> C2)),</span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a>        <span class="at">PDiff =</span> <span class="fu">abs</span>(ptw_target <span class="sc">-</span> ptw_ref) <span class="sc">/</span> ((ptw_target <span class="sc">+</span> ptw_ref) <span class="sc">/</span> <span class="dv">2</span>) <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a>        <span class="at">SignedDKL =</span> <span class="fu">sum</span>(<span class="fu">ifelse</span>(O11 <span class="sc">&gt;</span> <span class="dv">0</span>, O11 <span class="sc">*</span> <span class="fu">log</span>(O11 <span class="sc">/</span> ((O11 <span class="sc">+</span> O12) <span class="sc">/</span> <span class="dv">2</span>)), <span class="dv">0</span>) <span class="sc">-</span> <span class="fu">ifelse</span>(O12 <span class="sc">&gt;</span> <span class="dv">0</span>, O12 <span class="sc">*</span> <span class="fu">log</span>(O12 <span class="sc">/</span> ((O11 <span class="sc">+</span> O12) <span class="sc">/</span> <span class="dv">2</span>)), <span class="dv">0</span>))</span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb8-38"><a href="#cb8-38" aria-hidden="true" tabindex="-1"></a>    <span class="co"># determine Bonferroni corrected significance</span></span>
<span id="cb8-39"><a href="#cb8-39" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">Sig_corrected =</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb8-40"><a href="#cb8-40" aria-hidden="true" tabindex="-1"></a>        p <span class="sc">/</span> Rws <span class="sc">&gt;</span> .<span class="dv">05</span> <span class="sc">~</span> <span class="st">"n.s."</span>,</span>
<span id="cb8-41"><a href="#cb8-41" aria-hidden="true" tabindex="-1"></a>        p <span class="sc">/</span> Rws <span class="sc">&gt;</span> .<span class="dv">01</span> <span class="sc">~</span> <span class="st">"p &lt; .05*"</span>,</span>
<span id="cb8-42"><a href="#cb8-42" aria-hidden="true" tabindex="-1"></a>        p <span class="sc">/</span> Rws <span class="sc">&gt;</span> .<span class="dv">001</span> <span class="sc">~</span> <span class="st">"p &lt; .01**"</span>,</span>
<span id="cb8-43"><a href="#cb8-43" aria-hidden="true" tabindex="-1"></a>        p <span class="sc">/</span> Rws <span class="sc">&lt;=</span> .<span class="dv">001</span> <span class="sc">~</span> <span class="st">"p &lt; .001***"</span>,</span>
<span id="cb8-44"><a href="#cb8-44" aria-hidden="true" tabindex="-1"></a>        T <span class="sc">~</span> <span class="st">"N.A."</span></span>
<span id="cb8-45"><a href="#cb8-45" aria-hidden="true" tabindex="-1"></a>    )) <span class="sc">%&gt;%</span></span>
<span id="cb8-46"><a href="#cb8-46" aria-hidden="true" tabindex="-1"></a>    <span class="co"># round p-value</span></span>
<span id="cb8-47"><a href="#cb8-47" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb8-48"><a href="#cb8-48" aria-hidden="true" tabindex="-1"></a>        <span class="at">p =</span> <span class="fu">round</span>(p, <span class="dv">5</span>),</span>
<span id="cb8-49"><a href="#cb8-49" aria-hidden="true" tabindex="-1"></a>        <span class="at">type =</span> <span class="fu">ifelse</span>(E11 <span class="sc">&gt;</span> O11, <span class="st">"antitype"</span>, <span class="st">"type"</span>),</span>
<span id="cb8-50"><a href="#cb8-50" aria-hidden="true" tabindex="-1"></a>        <span class="at">phi =</span> <span class="fu">ifelse</span>(E11 <span class="sc">&gt;</span> O11, <span class="sc">-</span>phi, phi),</span>
<span id="cb8-51"><a href="#cb8-51" aria-hidden="true" tabindex="-1"></a>        <span class="at">G2 =</span> <span class="fu">ifelse</span>(E11 <span class="sc">&gt;</span> O11, <span class="sc">-</span>G2, G2)</span>
<span id="cb8-52"><a href="#cb8-52" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb8-53"><a href="#cb8-53" aria-hidden="true" tabindex="-1"></a>    <span class="co"># filter out non significant results</span></span>
<span id="cb8-54"><a href="#cb8-54" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(Sig_corrected <span class="sc">!=</span> <span class="st">"n.s."</span>) <span class="sc">%&gt;%</span></span>
<span id="cb8-55"><a href="#cb8-55" aria-hidden="true" tabindex="-1"></a>    <span class="co"># arrange by G2</span></span>
<span id="cb8-56"><a href="#cb8-56" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="sc">-</span>G2) <span class="sc">%&gt;%</span></span>
<span id="cb8-57"><a href="#cb8-57" aria-hidden="true" tabindex="-1"></a>    <span class="co"># remove superfluous columns</span></span>
<span id="cb8-58"><a href="#cb8-58" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">any_of</span>(<span class="fu">c</span>(</span>
<span id="cb8-59"><a href="#cb8-59" aria-hidden="true" tabindex="-1"></a>        <span class="st">"TermCoocFreq"</span>, <span class="st">"AllFreq"</span>, <span class="st">"NRows"</span>,</span>
<span id="cb8-60"><a href="#cb8-60" aria-hidden="true" tabindex="-1"></a>        <span class="st">"R1"</span>, <span class="st">"R2"</span>, <span class="st">"C1"</span>, <span class="st">"C2"</span>, <span class="st">"E12"</span>, <span class="st">"E21"</span>,</span>
<span id="cb8-61"><a href="#cb8-61" aria-hidden="true" tabindex="-1"></a>        <span class="st">"E22"</span>, <span class="st">"upp"</span>, <span class="st">"low"</span>, <span class="st">"op"</span>, <span class="st">"t.score"</span>, <span class="st">"z.score"</span>, <span class="st">"Rws"</span></span>
<span id="cb8-62"><a href="#cb8-62" aria-hidden="true" tabindex="-1"></a>    ))) <span class="sc">%&gt;%</span></span>
<span id="cb8-63"><a href="#cb8-63" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">relocate</span>(<span class="fu">any_of</span>(<span class="fu">c</span>(</span>
<span id="cb8-64"><a href="#cb8-64" aria-hidden="true" tabindex="-1"></a>        <span class="st">"token"</span>, <span class="st">"type"</span>, <span class="st">"Sig_corrected"</span>, <span class="st">"O11"</span>, <span class="st">"O12"</span>,</span>
<span id="cb8-65"><a href="#cb8-65" aria-hidden="true" tabindex="-1"></a>        <span class="st">"ptw_target"</span>, <span class="st">"ptw_ref"</span>, <span class="st">"G2"</span>, <span class="st">"RDF"</span>, <span class="st">"RateRatio"</span>,</span>
<span id="cb8-66"><a href="#cb8-66" aria-hidden="true" tabindex="-1"></a>        <span class="st">"RateDifference"</span>, <span class="st">"DifferenceCoefficient"</span>, <span class="st">"LLR"</span>, <span class="st">"SignedDKL"</span>,</span>
<span id="cb8-67"><a href="#cb8-67" aria-hidden="true" tabindex="-1"></a>        <span class="st">"PDiff"</span>, <span class="st">"LogOddsRatio"</span>, <span class="st">"MI"</span>, <span class="st">"PMI"</span>, <span class="st">"phi"</span>, <span class="st">"X2"</span>,</span>
<span id="cb8-68"><a href="#cb8-68" aria-hidden="true" tabindex="-1"></a>        <span class="st">"OddsRatio"</span>, <span class="st">"DeltaP"</span>, <span class="st">"p"</span>, <span class="st">"E11"</span>, <span class="st">"O21"</span>, <span class="st">"O22"</span></span>
<span id="cb8-69"><a href="#cb8-69" aria-hidden="true" tabindex="-1"></a>    ))) <span class="ot">-&gt;</span> assoc_tb3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-ac25a88c{table-layout:auto;width:95%;}.cl-ac1f0aae{font-family:'DejaVu Sans';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-ac1f0ab8{font-family:'DejaVu Sans';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-ac216c86{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-ac216c9a{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-ac2184f0{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ac2184f1{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ac2184fa{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ac2184fb{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ac2184fc{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ac2184fd{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ac2184fe{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ac218504{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ac21850e{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ac21850f{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ac218510{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ac218518{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ac218519{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ac21851a{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ac21851b{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ac218522{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-ac25a88c"><thead><tr style="overflow-wrap:break-word;"><th class="cl-ac2184f0"><p class="cl-ac216c86"><span class="cl-ac1f0aae">token</span></p></th><th class="cl-ac2184f1"><p class="cl-ac216c86"><span class="cl-ac1f0aae">type</span></p></th><th class="cl-ac2184f1"><p class="cl-ac216c86"><span class="cl-ac1f0aae">Sig_corrected</span></p></th><th class="cl-ac2184fa"><p class="cl-ac216c9a"><span class="cl-ac1f0aae">O11</span></p></th><th class="cl-ac2184fa"><p class="cl-ac216c9a"><span class="cl-ac1f0aae">O12</span></p></th><th class="cl-ac2184fa"><p class="cl-ac216c9a"><span class="cl-ac1f0aae">ptw_target</span></p></th><th class="cl-ac2184fa"><p class="cl-ac216c9a"><span class="cl-ac1f0aae">ptw_ref</span></p></th><th class="cl-ac2184fa"><p class="cl-ac216c9a"><span class="cl-ac1f0aae">G2</span></p></th><th class="cl-ac2184fa"><p class="cl-ac216c9a"><span class="cl-ac1f0aae">RDF</span></p></th><th class="cl-ac2184fa"><p class="cl-ac216c9a"><span class="cl-ac1f0aae">RateRatio</span></p></th><th class="cl-ac2184fa"><p class="cl-ac216c9a"><span class="cl-ac1f0aae">RateDifference</span></p></th><th class="cl-ac2184fa"><p class="cl-ac216c9a"><span class="cl-ac1f0aae">DifferenceCoefficient</span></p></th><th class="cl-ac2184fa"><p class="cl-ac216c9a"><span class="cl-ac1f0aae">LLR</span></p></th><th class="cl-ac2184fa"><p class="cl-ac216c9a"><span class="cl-ac1f0aae">SignedDKL</span></p></th><th class="cl-ac2184fa"><p class="cl-ac216c9a"><span class="cl-ac1f0aae">PDiff</span></p></th><th class="cl-ac2184fa"><p class="cl-ac216c9a"><span class="cl-ac1f0aae">LogOddsRatio</span></p></th><th class="cl-ac2184fa"><p class="cl-ac216c9a"><span class="cl-ac1f0aae">MI</span></p></th><th class="cl-ac2184fa"><p class="cl-ac216c9a"><span class="cl-ac1f0aae">PMI</span></p></th><th class="cl-ac2184fa"><p class="cl-ac216c9a"><span class="cl-ac1f0aae">phi</span></p></th><th class="cl-ac2184fa"><p class="cl-ac216c9a"><span class="cl-ac1f0aae">X2</span></p></th><th class="cl-ac2184fa"><p class="cl-ac216c9a"><span class="cl-ac1f0aae">OddsRatio</span></p></th><th class="cl-ac2184fa"><p class="cl-ac216c9a"><span class="cl-ac1f0aae">DeltaP</span></p></th><th class="cl-ac2184fa"><p class="cl-ac216c9a"><span class="cl-ac1f0aae">p</span></p></th><th class="cl-ac2184fa"><p class="cl-ac216c9a"><span class="cl-ac1f0aae">E11</span></p></th><th class="cl-ac2184fa"><p class="cl-ac216c9a"><span class="cl-ac1f0aae">O21</span></p></th><th class="cl-ac2184fa"><p class="cl-ac216c9a"><span class="cl-ac1f0aae">O22</span></p></th><th class="cl-ac2184fb"><p class="cl-ac216c9a"><span class="cl-ac1f0aae">N</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-ac2184fc"><p class="cl-ac216c86"><span class="cl-ac1f0ab8">winston</span></p></td><td class="cl-ac2184fd"><p class="cl-ac216c86"><span class="cl-ac1f0ab8">type</span></p></td><td class="cl-ac2184fd"><p class="cl-ac216c86"><span class="cl-ac1f0ab8">p &lt; .001***</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">440</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">4.6473800</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.00000000</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">903.1799</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.0046473800</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">786,166.536360</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.0000046473800</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">1.0000000</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">901.8871</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">304.98476</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">200.00000</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">7.3661051</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">1.4785774</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">-1.478577</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.05463223</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">787.4780</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">1,581.462194</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.6422285</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">157.89069</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">94,237</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">169,163</span></p></td><td class="cl-ac218504"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">263,840</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ac21850e"><p class="cl-ac216c86"><span class="cl-ac1f0ab8">was</span></p></td><td class="cl-ac21850f"><p class="cl-ac216c86"><span class="cl-ac1f0ab8">type</span></p></td><td class="cl-ac21850f"><p class="cl-ac216c86"><span class="cl-ac1f0ab8">p &lt; .001***</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">2,146</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">1,618</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">22.6665399</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">9.56473933</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">703.9743</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.0131018006</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">2.369802</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.0000131018006</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.4064933</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">1,987.1753</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">526.25807</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">81.29867</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.8760446</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.6679609</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">-2.289194</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.05299452</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">740.9733</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">2.401383</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.2143537</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">1,350.68310</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">92,531</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">167,545</span></p></td><td class="cl-ac218518"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">263,840</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ac2184fc"><p class="cl-ac216c86"><span class="cl-ac1f0ab8">had</span></p></td><td class="cl-ac2184fd"><p class="cl-ac216c86"><span class="cl-ac1f0ab8">type</span></p></td><td class="cl-ac2184fd"><p class="cl-ac216c86"><span class="cl-ac1f0ab8">p &lt; .001***</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">1,268</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">765</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">13.3929043</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">4.52226551</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">591.3677</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.0088706388</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">2.961546</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.0000088706388</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.4951468</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">1,401.9010</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">497.77101</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">99.02936</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">1.0944013</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.7975219</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">-2.159633</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.04865982</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">624.7146</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">2.987394</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.2669231</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">729.52676</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">93,409</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">168,398</span></p></td><td class="cl-ac218504"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">263,840</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ac21850e"><p class="cl-ac216c86"><span class="cl-ac1f0ab8">party</span></p></td><td class="cl-ac21850f"><p class="cl-ac216c86"><span class="cl-ac1f0ab8">type</span></p></td><td class="cl-ac21850f"><p class="cl-ac216c86"><span class="cl-ac1f0ab8">p &lt; .001***</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">250</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">9</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">2.6405568</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.05320312</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">442.6871</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.0025873537</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">49.626297</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.0000025873537</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.9604990</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">494.7523</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">188.44312</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">192.09980</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">3.8551473</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">1.4275534</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">-1.529601</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.03962998</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">414.3699</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">47.235573</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.6070044</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">92.94020</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">94,427</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">169,154</span></p></td><td class="cl-ac218518"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">263,840</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ac2184fc"><p class="cl-ac216c86"><span class="cl-ac1f0ab8">he</span></p></td><td class="cl-ac2184fd"><p class="cl-ac216c86"><span class="cl-ac1f0ab8">type</span></p></td><td class="cl-ac2184fd"><p class="cl-ac216c86"><span class="cl-ac1f0ab8">p &lt; .001***</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">1,889</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">1,729</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">19.9520475</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">10.22091119</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">406.2806</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.0097311363</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">1.952081</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.0000097311363</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.3225118</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">1,416.7423</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">159.94782</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">64.50237</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.6787494</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.5410077</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">-2.416147</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.04013583</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">425.0158</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">1.971411</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.1655392</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">1,298.29209</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">92,788</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">167,434</span></p></td><td class="cl-ac218504"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">263,840</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ac21850e"><p class="cl-ac216c86"><span class="cl-ac1f0ab8">obrien</span></p></td><td class="cl-ac21850f"><p class="cl-ac216c86"><span class="cl-ac1f0ab8">type</span></p></td><td class="cl-ac21850f"><p class="cl-ac216c86"><span class="cl-ac1f0ab8">p &lt; .001***</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">178</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">1.8800765</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.00000000</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">365.0499</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.0018800765</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">318,041.162722</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.0000018800765</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">1.0000000</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">364.8543</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">123.38020</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">200.00000</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">6.4600069</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">1.4785774</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">-1.478577</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.03473095</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">318.2541</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">639.065492</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.6415904</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">63.87396</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">94,499</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">169,163</span></p></td><td class="cl-ac218518"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">263,840</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ac2184fc"><p class="cl-ac216c86"><span class="cl-ac1f0ab8">she</span></p></td><td class="cl-ac2184fd"><p class="cl-ac216c86"><span class="cl-ac1f0ab8">type</span></p></td><td class="cl-ac2184fd"><p class="cl-ac216c86"><span class="cl-ac1f0ab8">p &lt; .001***</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">378</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">110</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">3.9925219</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.65026040</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">352.4095</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.0033422615</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">6.139842</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.0000033422615</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.7198833</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">581.7046</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">253.09608</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">143.97666</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">1.8149399</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">1.1100825</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">-1.847072</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.03731102</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">367.2949</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">6.140707</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.4165181</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">175.11513</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">94,299</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">169,053</span></p></td><td class="cl-ac218504"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">263,840</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ac21850e"><p class="cl-ac216c86"><span class="cl-ac1f0ab8">you</span></p></td><td class="cl-ac21850f"><p class="cl-ac216c86"><span class="cl-ac1f0ab8">type</span></p></td><td class="cl-ac21850f"><p class="cl-ac216c86"><span class="cl-ac1f0ab8">p &lt; .001***</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">950</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">851</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">10.0341160</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">5.03065091</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">214.0251</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.0050034651</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">1.994596</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.0000050034651</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.3321303</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">731.9492</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">98.95010</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">66.42605</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.6954194</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.5557786</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">-2.401376</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.02914781</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">224.1572</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">2.004550</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.1698013</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">646.27531</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">93,727</span></p></td><td class="cl-ac218510"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">168,312</span></p></td><td class="cl-ac218518"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">263,840</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ac2184fc"><p class="cl-ac216c86"><span class="cl-ac1f0ab8">could</span></p></td><td class="cl-ac2184fd"><p class="cl-ac216c86"><span class="cl-ac1f0ab8">type</span></p></td><td class="cl-ac2184fd"><p class="cl-ac216c86"><span class="cl-ac1f0ab8">p &lt; .001***</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">378</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">211</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">3.9925219</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">1.24731768</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">194.3144</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.0027452043</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">3.200880</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.0000027452043</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.5239100</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">439.4929</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">164.70635</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">104.78200</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">1.1651328</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.8386960</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">-2.118459</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.02790018</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">205.3783</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">3.206349</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.2835562</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">211.35822</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">94,299</span></p></td><td class="cl-ac2184fe"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">168,952</span></p></td><td class="cl-ac218504"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">263,840</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ac218519"><p class="cl-ac216c86"><span class="cl-ac1f0ab8">telescreen</span></p></td><td class="cl-ac21851a"><p class="cl-ac216c86"><span class="cl-ac1f0ab8">type</span></p></td><td class="cl-ac21851a"><p class="cl-ac216c86"><span class="cl-ac1f0ab8">p &lt; .001***</span></p></td><td class="cl-ac21851b"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">90</span></p></td><td class="cl-ac21851b"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0</span></p></td><td class="cl-ac21851b"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.9506005</span></p></td><td class="cl-ac21851b"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.00000000</span></p></td><td class="cl-ac21851b"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">184.5139</span></p></td><td class="cl-ac21851b"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.0009506005</span></p></td><td class="cl-ac21851b"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">160,808.212797</span></p></td><td class="cl-ac21851b"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.0000009506005</span></p></td><td class="cl-ac21851b"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">1.0000000</span></p></td><td class="cl-ac21851b"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">184.4769</span></p></td><td class="cl-ac21851b"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">62.38325</span></p></td><td class="cl-ac21851b"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">200.00000</span></p></td><td class="cl-ac21851b"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">5.7798374</span></p></td><td class="cl-ac21851b"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">1.4785774</span></p></td><td class="cl-ac21851b"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">-1.478577</span></p></td><td class="cl-ac21851b"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.02469195</span></p></td><td class="cl-ac21851b"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">160.8613</span></p></td><td class="cl-ac21851b"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">323.706552</span></p></td><td class="cl-ac21851b"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0.6413763</span></p></td><td class="cl-ac21851b"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">0</span></p></td><td class="cl-ac21851b"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">32.29582</span></p></td><td class="cl-ac21851b"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">94,587</span></p></td><td class="cl-ac21851b"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">169,163</span></p></td><td class="cl-ac218522"><p class="cl-ac216c9a"><span class="cl-ac1f0ab8">263,840</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>The above table shows the keywords for text1, which is George Orwell’s <em>Nineteeneightyfour</em>. The table starts with <strong>token</strong> (word type), followed by <strong>type</strong>, which indicates whether the token is a keyword in the target data (<em>type</em>) or a keyword in the reference data (<em>antitype</em>). Next is the Bonferroni corrected significance (<strong>Sig_corrected</strong>), which accounts for repeated testing. This is followed by <strong>O11</strong>, representing the observed frequency of the token, and <strong>Exp</strong> which represents the expected frequency of the token if it were distributed evenly across the target and reference data. After this, the table provides different keyness statistics, which are explained below:</p>
<p><strong>Delta P (ΔP)</strong> is a measure of association that indicates the difference in conditional probabilities. It measures the strength and direction of association between two binary variables.</p>
<ul>
<li><span class="math inline">\(\Delta P(A|B) = P(A|B) - P(A|\neg B)\)</span></li>
<li><span class="math inline">\(\Delta P(B|A) = P(B|A) - P(B|\neg A)\)</span></li>
</ul>
<p>Where <span class="math inline">\(P(A|B)\)</span> is the probability of A given B and <span class="math inline">\(P(A|\neg B)\)</span> is the probability of A given not B.</p>
<p>The <strong>Log Odds Ratio</strong> measures the strength of association between two binary variables. It is the natural logarithm of the odds ratio and provides a symmetric measure.</p>
<p><span class="math display">\[ \text{Log Odds Ratio} = \log\left(\frac{P(A|B)/P(\neg A|B)}{P(A|\neg B)/P(\neg A|\neg B)}\right) \]</span></p>
<p><strong>Mutual Information (MI)</strong> quantifies the amount of information obtained about one random variable through the other random variable. It measures the mutual dependence between the variables.</p>
<p><span class="math display">\[ I(X;Y) = \sum_{x \in X} \sum_{y \in Y} P(x, y) \log\left(\frac{P(x, y)}{P(x)P(y)}\right) \]</span></p>
<p>Where <span class="math inline">\(P(x, y)\)</span> is the joint probability distribution and <span class="math inline">\(P(x)\)</span> and <span class="math inline">\(P(y)\)</span> are the marginal probability distributions.</p>
<p><strong>Pointwise Mutual Information (PMI)</strong> measures the association between a specific event and another specific event. It is a pointwise measure of mutual information.</p>
<p><span class="math display">\[ \text{PMI}(x, y) = \log\left(\frac{P(x, y)}{P(x)P(y)}\right) \]</span></p>
<p>The <strong>Phi (φ) Coefficient</strong> is a measure of association for two binary variables. It is a specific case of the Pearson correlation coefficient for binary data.</p>
<p><span class="math display">\[ \phi = \frac{n_{11}n_{00} - n_{10}n_{01}}{\sqrt{(n_{11} + n_{10})(n_{01} + n_{00})(n_{11} + n_{01})(n_{10} + n_{00})}} \]</span></p>
<p>Where <span class="math inline">\(n_{ij}\)</span> represents the count of observations where the first variable is <span class="math inline">\(i\)</span> and the second variable is <span class="math inline">\(j\)</span>.</p>
<p>The <strong>Chi-Square (χ²) statistic</strong> measures the independence between two categorical variables. It assesses whether observed frequencies differ from expected frequencies.</p>
<p><span class="math display">\[ \chi^2 = \sum \frac{(O_i - E_i)^2}{E_i} \]</span></p>
<p>Where <span class="math inline">\(O_i\)</span> is the observed frequency and <span class="math inline">\(E_i\)</span> is the expected frequency.</p>
<p>The <strong>Likelihood Ratio (G²)</strong> compares the fit of two models: one under the null hypothesis and one under the alternative hypothesis. It measures how much better the data fits one model over the other.</p>
<p><span class="math display">\[ G^2 = 2 \sum O_i \log\left(\frac{O_i}{E_i}\right) \]</span></p>
<p>Where <span class="math inline">\(O_i\)</span> is the observed frequency and <span class="math inline">\(E_i\)</span> is the expected frequency.</p>
<p>The <strong>Rate Ratio</strong> compares the rate of events between two groups. It is commonly used in epidemiology.</p>
<p><span class="math display">\[ \text{Rate Ratio} = \frac{\text{Rate in group 1}}{\text{Rate in group 2}} \]</span></p>
<p>The <strong>Rate Difference</strong> measures the absolute difference in event rates between two groups.</p>
<p><span class="math display">\[ \text{Rate Difference} = \text{Rate in group 1} - \text{Rate in group 2} \]</span></p>
<p>The <strong>Difference Coefficient</strong> (also known as the Difference Score) measures the difference between the observed and expected values, standardized by the expected values.</p>
<p><span class="math display">\[ D = \frac{O - E}{E} \]</span></p>
<p>Where <span class="math inline">\(O\)</span> is the observed frequency and <span class="math inline">\(E\)</span> is the expected frequency.</p>
<p>The <strong>Odds Ratio</strong> quantifies the strength of association between two events. It compares the odds of an event occurring in one group to the odds of it occurring in another group.</p>
<p><span class="math display">\[ \text{Odds Ratio} = \frac{P(A|B)/P(\neg A|B)}{P(A|\neg B)/P(\neg A|\neg B)} \]</span></p>
<p>Where <span class="math inline">\(P(A|B)\)</span> is the probability of A given B, <span class="math inline">\(P(\neg A|B)\)</span> is the probability of not A given B, <span class="math inline">\(P(A|\neg B)\)</span> is the probability of A given not B, and <span class="math inline">\(P(\neg A|\neg B)\)</span> is the probability of not A given not B.</p>
<p>These measures help analyze the association strength, and significance of the the attraction or likelihood of a token to surface in the target rather than the reference data.</p>
</section>
<section id="visualising-keywords" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="visualising-keywords">Visualising keywords</h2>
<p>We can now visualize the keyness strengths in a <em>dotplot</em> as shown in the code chunk below.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sort the assoc_tb3 data frame in descending order based on the 'G2' column</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>assoc_tb3 <span class="sc">%&gt;%</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="sc">-</span>G2) <span class="sc">%&gt;%</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># select the top 20 rows after sorting</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">head</span>(<span class="dv">20</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># create a ggplot with 'token' on the x-axis (reordered by 'G2') and 'G2' on the y-axis</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(token, G2, mean), <span class="at">y =</span> G2)) <span class="sc">+</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># add a scatter plot with points representing the 'G2' values</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># flip the coordinates to have horizontal points</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># set the theme to a basic white and black theme</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># set the x-axis label to "Token" and y-axis label to "Keyness (G2)"</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Token"</span>, <span class="at">y =</span> <span class="st">"Keyness (G2)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="key_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Another option to visualize keyness is a <em>barplot</em> as shown below.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># get top 10 keywords for text 1</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>top <span class="ot">&lt;-</span> assoc_tb3 <span class="sc">%&gt;%</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">12</span>)</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="co"># get top 10 keywords for text 2</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>bot <span class="ot">&lt;-</span> assoc_tb3 <span class="sc">%&gt;%</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">slice_tail</span>(<span class="at">n =</span> <span class="dv">12</span>)</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="co"># combine into table</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(top, bot) <span class="sc">%&gt;%</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># create a ggplot</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(token, G2, mean), <span class="at">y =</span> G2, <span class="at">label =</span> G2, <span class="at">fill =</span> type)) <span class="sc">+</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># add a bar plot using the 'phi' values</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># add text labels above the bars with rounded 'phi' values</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(<span class="fu">aes</span>(</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="fu">ifelse</span>(G2 <span class="sc">&gt;</span> <span class="dv">0</span>, G2 <span class="sc">-</span> <span class="dv">50</span>, G2 <span class="sc">+</span> <span class="dv">50</span>),</span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">label =</span> <span class="fu">round</span>(G2, <span class="dv">1</span>)</span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>    ), <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># flip the coordinates to have horizontal bars</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>    <span class="co"># set the theme to a basic white and black theme</span></span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a>    <span class="co"># remove legend</span></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a>    <span class="co"># define colors</span></span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"orange"</span>, <span class="st">"darkgray"</span>)) <span class="sc">+</span></span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a>    <span class="co"># set the x-axis label to "Token" and y-axis label to "Keyness (G2)"</span></span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Top 10 keywords for text1 and text 2"</span>, <span class="at">x =</span> <span class="st">"Keyword"</span>, <span class="at">y =</span> <span class="st">"Keyness (G2)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="key_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="comparative-wordclouds" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="comparative-wordclouds">Comparative wordclouds</h2>
<p>Another form of word clouds, known as <em>comparison clouds</em>, is helpful in discerning disparities between texts. The problem compared to previous, more informative methods for identifying keywords is that comparison clouds use a very basic and not very sophisticated methods for identifying keywords. Nonetheless, comparison clouds are very useful visualization tools during initial steps on an analysis.</p>
<p>In a first step, we generate a corpus object from the texts and create a variable with the author name.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>corp_dom <span class="ot">&lt;-</span> quanteda<span class="sc">::</span><span class="fu">corpus</span>(<span class="fu">c</span>(text1, text2))</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(corp_dom, <span class="st">"docvars"</span>)<span class="sc">$</span>Author <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Orwell"</span>, <span class="st">"Melville"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now, we can remove so-called <em>stopwords</em> (non-lexical function words) and punctuation and generate the comparison cloud.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create a comparison word cloud for a corpus</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>corp_dom <span class="sc">%&gt;%</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># tokenize the corpus, removing punctuation, symbols, and numbers</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    quanteda<span class="sc">::</span><span class="fu">tokens</span>(</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">remove_punct =</span> <span class="cn">TRUE</span>,</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">remove_symbols =</span> <span class="cn">TRUE</span>,</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">remove_numbers =</span> <span class="cn">TRUE</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># remove English stopwords</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>    quanteda<span class="sc">::</span><span class="fu">tokens_remove</span>(<span class="fu">stopwords</span>(<span class="st">"english"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># create a Document-Feature Matrix (DFM)</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>    quanteda<span class="sc">::</span><span class="fu">dfm</span>() <span class="sc">%&gt;%</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># group the DFM by the 'Author' column from 'corp_dom'</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>    quanteda<span class="sc">::</span><span class="fu">dfm_group</span>(<span class="at">groups =</span> corp_dom<span class="sc">$</span>Author) <span class="sc">%&gt;%</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># trim the DFM, keeping terms that occur at least 10 times</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>    quanteda<span class="sc">::</span><span class="fu">dfm_trim</span>(<span class="at">min_termfreq =</span> <span class="dv">10</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># generate a comparison word cloud</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>    quanteda.textplots<span class="sc">::</span><span class="fu">textplot_wordcloud</span>(</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>        <span class="co"># create a comparison word cloud</span></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">comparison =</span> <span class="cn">TRUE</span>,</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>        <span class="co"># set colors for different groups</span></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="fu">c</span>(<span class="st">"darkgray"</span>, <span class="st">"orange"</span>),</span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>        <span class="co"># define the maximum number of words to display in the word cloud</span></span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">max_words =</span> <span class="dv">150</span></span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="key_files/figure-html/wc4-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="citation-session-info" class="level1 unnumbered">
<h1 class="unnumbered">Citation &amp; Session Info</h1>
<p>Schweinberger, Martin. 2024. <em>Keyness and Keyword Analysis in R</em>. Brisbane: The University of Queensland. url: https://ladal.edu.au/tutorials/coll.html (Version 2024.05.24).</p>
<pre><code>@manual{schweinberger`2024key,
  author = {Schweinberger, Martin},
  title = {Keyness and Keyword Analysis in R},
  note = {tutorials/key/key.html},
  year = {2024},
  organization = {The University of Queensland, Australia. School of Languages and Cultures},
  address = {Brisbane},
  edition = {2024.05.24}
}</code></pre>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sessionInfo</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>R version 4.4.2 (2024-10-31)
Platform: x86_64-pc-linux-gnu
Running under: Ubuntu 24.04.1 LTS

Matrix products: default
BLAS:   /usr/lib/x86_64-linux-gnu/blas/libblas.so.3.12.0 
LAPACK: /usr/lib/x86_64-linux-gnu/lapack/liblapack.so.3.12.0

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   
 [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 
 [9] LC_ADDRESS=C               LC_TELEPHONE=C            
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       

time zone: Australia/Brisbane
tzcode source: system (glibc)

attached base packages:
[1] stats     graphics  grDevices datasets  utils     methods   base     

other attached packages:
 [1] ggplot2_3.5.1             sna_2.8                  
 [3] network_1.19.0            statnet.common_4.10.0    
 [5] tm_0.7-15                 NLP_0.3-2                
 [7] stringr_1.5.1             dplyr_1.1.4              
 [9] quanteda.textplots_0.95   quanteda.textstats_0.97.2
[11] quanteda_4.1.0            Matrix_1.7-2             
[13] flextable_0.9.7          

loaded via a namespace (and not attached):
 [1] fastmatch_1.1-4         gtable_0.3.6            xfun_0.49              
 [4] htmlwidgets_1.6.4       lattice_0.22-6          vctrs_0.6.5            
 [7] tools_4.4.2             generics_0.1.3          parallel_4.4.2         
[10] klippy_0.0.0.9500       tibble_3.2.1            pkgconfig_2.0.3        
[13] data.table_1.16.4       assertthat_0.2.1        uuid_1.2-1             
[16] lifecycle_1.0.4         farver_2.1.2            compiler_4.4.2         
[19] textshaping_0.4.1       munsell_0.5.1           codetools_0.2-20       
[22] fontquiver_0.2.1        fontLiberation_0.1.0    htmltools_0.5.8.1      
[25] yaml_2.3.10             tidyr_1.3.1             pillar_1.10.1          
[28] openssl_2.3.0           fontBitstreamVera_0.1.1 stopwords_2.3          
[31] tidyselect_1.2.1        zip_2.3.1               digest_0.6.37          
[34] stringi_1.8.4           slam_0.1-55             purrr_1.0.2            
[37] labeling_0.4.3          fastmap_1.2.0           grid_4.4.2             
[40] colorspace_2.1-1        cli_3.6.3               magrittr_2.0.3         
[43] withr_3.0.2             gdtools_0.4.1           scales_1.3.0           
[46] rmarkdown_2.29          officer_0.6.7           askpass_1.2.1          
[49] ragg_1.3.3              coda_0.19-4.1           evaluate_1.0.3         
[52] knitr_1.49              rlang_1.1.5             Rcpp_1.0.13-1          
[55] nsyllable_1.0.1         glue_1.8.0              xml2_1.3.6             
[58] renv_1.0.11             jsonlite_1.8.9          R6_2.5.1               
[61] systemfonts_1.1.0      </code></pre>
</div>
</div>
<hr>
<p><a href="#Introduction">Back to top</a></p>
<p><a href="../..">Back to LADAL home</a></p>
<hr>
</section>
<section id="references" class="level1 unnumbered">




</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-egbert2019incorporating" class="csl-entry" role="listitem">
Egbert, Jesse, and Douglas Biber. 2019. <span>“Incorporating Text Dispersion into Keyword Analysis.”</span> <em>Corpora</em> 14 (1): 77–104. <a href="https://doi.org/10.3366/cor.2019.0162">https://doi.org/10.3366/cor.2019.0162</a>.
</div>
<div id="ref-soenning2023key" class="csl-entry" role="listitem">
Sönning, Lukas. 2023. <span>“Evaluation of Keyness Metrics: Performance and Reliability.”</span> <em>Corpus Linguistics and Linguistic Theory</em>. <a href="https://doi.org/doi:10.1515/cllt-2022-0116">https://doi.org/doi:10.1515/cllt-2022-0116</a>.
</div>
</div></section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>I’m extremely grateful to Joseph Flanagan who provided very helpful feedback and pointed out errors in previous versions of this tutorial. All remaining errors are, of course, my own.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>If you want to render the R Notebook on your machine, i.e.&nbsp;knitting the document to html or a pdf, you need to make sure that you have R and RStudio installed and you also need to download the <a href="../../assets/bibliography.bib"><strong>bibliography file</strong></a> and store it in the same folder where you store the Rmd file.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




<script src="../../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>