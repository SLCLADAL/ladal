knitr::include_graphics("https://slcladal.github.io/images/uq1.jpg")
knitr::include_graphics("https://slcladal.github.io/images/g_chili.jpg")
knitr::include_graphics("https://slcladal.github.io/images/RStudio_newfolder.png")
knitr::include_graphics("https://slcladal.github.io/images/RStudio_empty.png")
knitr::include_graphics("https://slcladal.github.io/images/RStudio_file.png")
knitr::include_graphics("https://slcladal.github.io/images/RStudio_newfile.png")
knitr::include_graphics("https://slcladal.github.io/images/RStudio_existingdirectory.png")
knitr::include_graphics("https://slcladal.github.io/images/RStudio_file.png")
knitr::include_graphics("https://slcladal.github.io/images/RStudio_newnotebook.png")
knitr::include_graphics("https://slcladal.github.io/images/RStudio_editMD.png")
knitr::include_graphics("https://slcladal.github.io/images/RStudioscreenshot.png")
knitr::include_graphics("https://slcladal.github.io/images/RStudio_run.png")
# set options
options(stringsAsFactors = F)
options(scipen = 100)
options(max.print = 100)
knitr::include_graphics("https://slcladal.github.io/images/RStudio_preparation.png")
library(tidyverse)
library(tidytext)
library(quanteda)
library(readxl)
library(tm)
library(tokenizers)
library(here)
library(flextable)
# activate klippy for copy-to-clipboard button
klippy::klippy()
knitr::include_graphics("https://slcladal.github.io/images/RStudio_packages.png")
# load data
icebio <- read.delim("https://slcladal.github.io/data/BiodataIceIreland.txt",
sep = "\t", header = T
)
head(icebio)
head(icebio, 4)
icebio[1:5, 1:3]
str(icebio)
summary(icebio)
table(icebio$date)
ftable(icebio$age, icebio$sex)
write.table(icebio, here::here("data", "icebio.txt"), sep = "\t")
icebio <- read.delim(here::here("data", "icebio.txt"), sep = "\t", header = T)
icebio <- read.delim(here::here("data", "icebio.txt"),
sep = "\t", header = T
)
head(icebio)
icebio <- readxl::read_excel(here::here("data", "ICEdata.xlsx"))
colnames(icebio)
text <- readLines(here::here("data", "text2.txt"))
knitr::include_graphics("https://slcladal.github.io/images/uq1.jpg")
knitr::include_graphics("https://slcladal.github.io/images/g_chili.jpg")
knitr::include_graphics("https://slcladal.github.io/images/RStudio_newfolder.png")
knitr::include_graphics("https://slcladal.github.io/images/RStudio_empty.png")
knitr::include_graphics("https://slcladal.github.io/images/RStudio_file.png")
knitr::include_graphics("https://slcladal.github.io/images/RStudio_newfile.png")
knitr::include_graphics("https://slcladal.github.io/images/RStudio_existingdirectory.png")
knitr::include_graphics("https://slcladal.github.io/images/RStudio_file.png")
knitr::include_graphics("https://slcladal.github.io/images/RStudio_newnotebook.png")
knitr::include_graphics("https://slcladal.github.io/images/RStudio_editMD.png")
knitr::include_graphics("https://slcladal.github.io/images/RStudioscreenshot.png")
knitr::include_graphics("https://slcladal.github.io/images/RStudio_run.png")
# set options
options(stringsAsFactors = F)
options(scipen = 100)
options(max.print = 100)
knitr::include_graphics("https://slcladal.github.io/images/RStudio_preparation.png")
library(tidyverse)
library(tidytext)
library(quanteda)
library(readxl)
library(tm)
library(tokenizers)
library(here)
library(flextable)
# activate klippy for copy-to-clipboard button
klippy::klippy()
knitr::include_graphics("https://slcladal.github.io/images/RStudio_packages.png")
# load data
icebio <- read.delim("https://slcladal.github.io/data/BiodataIceIreland.txt",
sep = "\t", header = T
)
head(icebio)
head(icebio, 4)
icebio[1:5, 1:3]
str(icebio)
summary(icebio)
table(icebio$date)
ftable(icebio$age, icebio$sex)
write.table(icebio, here::here("data", "icebio.txt"), sep = "\t")
icebio <- read.delim(here::here("data", "icebio.txt"), sep = "\t", header = T)
icebio <- read.delim(here::here("data", "icebio.txt"),
sep = "\t", header = T
)
head(icebio)
icebio <- readxl::read_excel(here::here("data", "ICEdata.xlsx"))
colnames(icebio)
text <- readLines(here::here("data", "text2.txt"))
knitr::include_graphics("https://slcladal.github.io/images/uq1.jpg")
knitr::include_graphics("https://slcladal.github.io/images/g_chili.jpg")
knitr::include_graphics("https://slcladal.github.io/images/RStudio_newfolder.png")
knitr::include_graphics("https://slcladal.github.io/images/RStudio_empty.png")
knitr::include_graphics("https://slcladal.github.io/images/RStudio_file.png")
knitr::include_graphics("https://slcladal.github.io/images/RStudio_newfile.png")
knitr::include_graphics("https://slcladal.github.io/images/RStudio_existingdirectory.png")
knitr::include_graphics("https://slcladal.github.io/images/RStudio_file.png")
knitr::include_graphics("https://slcladal.github.io/images/RStudio_newnotebook.png")
knitr::include_graphics("https://slcladal.github.io/images/RStudio_editMD.png")
knitr::include_graphics("https://slcladal.github.io/images/RStudioscreenshot.png")
knitr::include_graphics("https://slcladal.github.io/images/RStudio_run.png")
# set options
options(stringsAsFactors = F)
options(scipen = 100)
options(max.print = 100)
knitr::include_graphics("https://slcladal.github.io/images/RStudio_preparation.png")
library(tidyverse)
library(tidytext)
library(quanteda)
library(readxl)
library(tm)
library(tokenizers)
library(here)
library(flextable)
# activate klippy for copy-to-clipboard button
klippy::klippy()
knitr::include_graphics("https://slcladal.github.io/images/RStudio_packages.png")
# load data
icebio <- read.delim("https://slcladal.github.io/data/BiodataIceIreland.txt",
sep = "\t", header = T
)
head(icebio)
head(icebio, 4)
icebio[1:5, 1:3]
str(icebio)
summary(icebio)
table(icebio$date)
ftable(icebio$age, icebio$sex)
write.table(icebio, here::here("data", "icebio.txt"), sep = "\t")
icebio <- read.delim(here::here("data", "icebio.txt"), sep = "\t", header = T)
icebio <- read.delim(here::here("data", "icebio.txt"),
sep = "\t", header = T
)
head(icebio)
icebio <- readxl::read_excel(here::here("data", "ICEdata.xlsx"))
colnames(icebio)
text <- readLines(here::here("data", "text2.txt"))
# inspect first text element
text[1]
# define paths
paths <- list.files(here::here("data/testcorpus"), full.names = T)
# load texts
texts <- sapply(paths, function(x) {
readLines(x)
})
# inspect first text element
texts[1]
# define paths
texts <- list.files(here::here("data/testcorpus"), full.names = T, pattern = ".*txt") %>%
purrr::map_chr(~ readr::read_file(.))
# inspect first text element
texts[1]
icebio_edit <- icebio %>%
dplyr::rename(
Id = id,
FileSpeakerId = file.speaker.id,
File = colnames(icebio)[3],
Speaker = colnames(icebio)[4]
)
# inspect data
icebio_edit[1:5, 1:6]
colnames(icebio_edit) <- stringr::str_to_title(colnames(icebio_edit))
# inspect data
icebio_edit[1:5, 1:6]
icebio_edit2 <- icebio_edit %>%
dplyr::filter(
Speaker != "?",
Zone != is.na(Zone),
Date == "2002-2005",
Word.count > 5
)
# inspect data
head(icebio_edit2)
icebio_selection <- icebio_edit2 %>%
dplyr::select(File, Speaker, Word.count)
# inspect data
head(icebio_selection)
icebio_selection2 <- icebio_edit2 %>%
dplyr::select(-Id, -File, -Speaker, -Date, -Zone, -Age)
# inspect data
head(icebio_selection2)
icebio_ordered_asc <- icebio_selection2 %>%
dplyr::arrange(Word.count)
# inspect data
head(icebio_ordered_asc)
icebio_ordered_desc <- icebio_selection2 %>%
dplyr::arrange(-Word.count)
# inspect data
head(icebio_ordered_desc)
icebio_texttype <- icebio_selection2 %>%
dplyr::mutate(
Texttype =
dplyr::case_when(
stringr::str_detect(Filespeakerid, "S1A") ~ "PrivateDialoge",
stringr::str_detect(Filespeakerid, "S1B") ~ "PublicDialogue",
stringr::str_detect(Filespeakerid, "S2A") ~ "UnscriptedMonologue",
stringr::str_detect(Filespeakerid, "S2B") ~ "ScriptedMonologue",
TRUE ~ Filespeakerid
)
)
# inspect data
head(icebio_texttype)
icebio_summary1 <- icebio_texttype %>%
dplyr::summarise(Words = sum(Word.count))
# inspect data
head(icebio_summary1)
icebio_summary2 <- icebio_texttype %>%
dplyr::group_by(Texttype, Sex) %>%
dplyr::summarise(
Speakers = n(),
Words = sum(Word.count)
)
# inspect data
head(icebio_summary2)
icebio_summary_wide <- icebio_summary2 %>%
dplyr::select(-Words) %>%
tidyr::spread(Sex, Speakers)
# inspect
icebio_summary_wide
icebio_summary_long <- icebio_summary_wide %>%
tidyr::gather(Sex, Speakers, female:male)
# inspect
icebio_summary_long
Trump <- base::readRDS(url("https://slcladal.github.io/data/Trump.rda", "rb"))
# inspect data
str(Trump)
Trump %>%
tibble(text = SPEECH) %>%
unnest_tokens(word, text) %>%
dplyr::count(word, sort = T)
Trump %>%
tibble(text = SPEECH) %>%
unnest_tokens(word, text, token = "ngrams", n = 4) %>%
dplyr::count(word, sort = T) %>%
head(10)
Trump_split <- unlist(str_split(
stringr::str_replace_all(Trump, "SPEECH", "~~~SPEECH"),
pattern = "~~~"
))
# inspect data
nchar(Trump_split) # ; str(Trump_split)
Trump_split_clean <- Trump_split %>%
# replace elements
stringr::str_replace_all(fixed("\n"), " ") %>%
# remove strange symbols
stringr::str_replace_all("[^[:alnum:][:punct:]]+", " ") %>%
# combine contractions
stringr::str_replace_all(" re ", "'re ") %>%
stringr::str_replace_all(" ll ", "'ll ") %>%
stringr::str_replace_all(" d ", "'d ") %>%
stringr::str_replace_all(" m ", "'m ") %>%
stringr::str_replace_all(" s ", "'s ") %>%
stringr::str_replace_all("n t ", "n't ") %>%
# remove \"
stringr::str_remove_all("\"") %>%
# remove superfluous white spaces
stringr::str_squish()
# remove very short elements
Trump_split_clean <- Trump_split_clean[nchar(Trump_split_clean) > 5]
# inspect data
nchar(Trump_split_clean)
kwic_multiple <- quanteda::kwic(Trump_split_clean,
pattern = phrase("great again"),
window = 3,
valuetype = "regex"
) %>%
as.data.frame()
knitr::include_graphics("https://slcladal.github.io/images/uq1.jpg")
knitr::include_graphics("https://slcladal.github.io/images/g_chili.jpg")
knitr::include_graphics("https://slcladal.github.io/images/RStudio_newfolder.png")
knitr::include_graphics("https://slcladal.github.io/images/RStudio_empty.png")
knitr::include_graphics("https://slcladal.github.io/images/RStudio_file.png")
knitr::include_graphics("https://slcladal.github.io/images/RStudio_newfile.png")
knitr::include_graphics("https://slcladal.github.io/images/RStudio_existingdirectory.png")
knitr::include_graphics("https://slcladal.github.io/images/RStudio_file.png")
knitr::include_graphics("https://slcladal.github.io/images/RStudio_newnotebook.png")
knitr::include_graphics("https://slcladal.github.io/images/RStudio_editMD.png")
knitr::include_graphics("https://slcladal.github.io/images/RStudioscreenshot.png")
knitr::include_graphics("https://slcladal.github.io/images/RStudio_run.png")
# set options
options(stringsAsFactors = F)
options(scipen = 100)
options(max.print = 100)
knitr::include_graphics("https://slcladal.github.io/images/RStudio_preparation.png")
library(tidyverse)
library(tidytext)
library(quanteda)
library(readxl)
library(tm)
library(tokenizers)
library(here)
library(flextable)
# activate klippy for copy-to-clipboard button
klippy::klippy()
knitr::include_graphics("https://slcladal.github.io/images/RStudio_packages.png")
# load data
icebio <- read.delim("https://slcladal.github.io/data/BiodataIceIreland.txt",
sep = "\t", header = T
)
head(icebio)
head(icebio, 4)
icebio[1:5, 1:3]
str(icebio)
summary(icebio)
table(icebio$date)
ftable(icebio$age, icebio$sex)
write.table(icebio, here::here("data", "icebio.txt"), sep = "\t")
icebio <- read.delim(here::here("data", "icebio.txt"), sep = "\t", header = T)
icebio <- read.delim(here::here("data", "icebio.txt"),
sep = "\t", header = T
)
head(icebio)
icebio <- readxl::read_excel(here::here("data", "ICEdata.xlsx"))
colnames(icebio)
text <- readLines(here::here("data", "text2.txt"))
# inspect first text element
text[1]
# define paths
paths <- list.files(here::here("data/testcorpus"), full.names = T)
# load texts
texts <- sapply(paths, function(x) {
readLines(x)
})
# inspect first text element
texts[1]
# define paths
texts <- list.files(here::here("data/testcorpus"), full.names = T, pattern = ".*txt") %>%
purrr::map_chr(~ readr::read_file(.))
# inspect first text element
texts[1]
icebio_edit <- icebio %>%
dplyr::rename(
Id = id,
FileSpeakerId = file.speaker.id,
File = colnames(icebio)[3],
Speaker = colnames(icebio)[4]
)
# inspect data
icebio_edit[1:5, 1:6]
colnames(icebio_edit) <- stringr::str_to_title(colnames(icebio_edit))
# inspect data
icebio_edit[1:5, 1:6]
icebio_edit2 <- icebio_edit %>%
dplyr::filter(
Speaker != "?",
Zone != is.na(Zone),
Date == "2002-2005",
Word.count > 5
)
# inspect data
head(icebio_edit2)
icebio_selection <- icebio_edit2 %>%
dplyr::select(File, Speaker, Word.count)
# inspect data
head(icebio_selection)
icebio_selection2 <- icebio_edit2 %>%
dplyr::select(-Id, -File, -Speaker, -Date, -Zone, -Age)
# inspect data
head(icebio_selection2)
icebio_ordered_asc <- icebio_selection2 %>%
dplyr::arrange(Word.count)
# inspect data
head(icebio_ordered_asc)
icebio_ordered_desc <- icebio_selection2 %>%
dplyr::arrange(-Word.count)
# inspect data
head(icebio_ordered_desc)
icebio_texttype <- icebio_selection2 %>%
dplyr::mutate(
Texttype =
dplyr::case_when(
stringr::str_detect(Filespeakerid, "S1A") ~ "PrivateDialoge",
stringr::str_detect(Filespeakerid, "S1B") ~ "PublicDialogue",
stringr::str_detect(Filespeakerid, "S2A") ~ "UnscriptedMonologue",
stringr::str_detect(Filespeakerid, "S2B") ~ "ScriptedMonologue",
TRUE ~ Filespeakerid
)
)
# inspect data
head(icebio_texttype)
icebio_summary1 <- icebio_texttype %>%
dplyr::summarise(Words = sum(Word.count))
# inspect data
head(icebio_summary1)
icebio_summary2 <- icebio_texttype %>%
dplyr::group_by(Texttype, Sex) %>%
dplyr::summarise(
Speakers = n(),
Words = sum(Word.count)
)
# inspect data
head(icebio_summary2)
icebio_summary_wide <- icebio_summary2 %>%
dplyr::select(-Words) %>%
tidyr::spread(Sex, Speakers)
# inspect
icebio_summary_wide
icebio_summary_long <- icebio_summary_wide %>%
tidyr::gather(Sex, Speakers, female:male)
# inspect
icebio_summary_long
Trump <- base::readRDS(url("https://slcladal.github.io/data/Trump.rda", "rb"))
# inspect data
str(Trump)
Trump %>%
tibble(text = SPEECH) %>%
unnest_tokens(word, text) %>%
dplyr::count(word, sort = T)
Trump %>%
tibble(text = SPEECH) %>%
unnest_tokens(word, text, token = "ngrams", n = 4) %>%
dplyr::count(word, sort = T) %>%
head(10)
Trump_split <- unlist(str_split(
stringr::str_replace_all(Trump, "SPEECH", "~~~SPEECH"),
pattern = "~~~"
))
# inspect data
nchar(Trump_split) # ; str(Trump_split)
Trump_split_clean <- Trump_split %>%
# replace elements
stringr::str_replace_all(fixed("\n"), " ") %>%
# remove strange symbols
stringr::str_replace_all("[^[:alnum:][:punct:]]+", " ") %>%
# combine contractions
stringr::str_replace_all(" re ", "'re ") %>%
stringr::str_replace_all(" ll ", "'ll ") %>%
stringr::str_replace_all(" d ", "'d ") %>%
stringr::str_replace_all(" m ", "'m ") %>%
stringr::str_replace_all(" s ", "'s ") %>%
stringr::str_replace_all("n t ", "n't ") %>%
# remove \"
stringr::str_remove_all("\"") %>%
# remove superfluous white spaces
stringr::str_squish()
# remove very short elements
Trump_split_clean <- Trump_split_clean[nchar(Trump_split_clean) > 5]
# inspect data
nchar(Trump_split_clean)
kwic_multiple <- quanteda::kwic(quanteda::tokens("Trump_split_clean"),
pattern = phrase("great again"),
window = 3,
valuetype = "regex"
) %>%
as.data.frame()
# inspect data
head(kwic_multiple)
kwic_multiple_select <- kwic_multiple %>%
# last element before search term is "america"
dplyr::filter(str_detect(pre, "america$"))
# inspect data
head(kwic_multiple_select)
files <- list.files(here::here("data", "ICEIrelandSample"),
pattern = ".txt", full.names = T
)
ICE_Ire_sample <- sapply(files, function(x) {
x <- scan(x, what = "char")
x <- paste(x, sep = " ", collapse = " ")
})
# inspect data
str(ICE_Ire_sample)
names(ICE_Ire_sample) <- names(ICE_Ire_sample) %>%
stringr::str_remove_all(".*/") %>%
stringr::str_remove_all(".txt")
# inspect
names(ICE_Ire_sample)
ICE_Ire_split <- as.vector(unlist(sapply(ICE_Ire_sample, function(x) {
x <- as.vector(str_split(str_replace_all(x, "(<S1A-)", "~~~\\1"), "~~~"))
})))
# inspect
head(ICE_Ire_split)
ICE_Ire_split_tb <- ICE_Ire_split %>%
as.data.frame()
# add column names
colnames(ICE_Ire_split_tb)[1] <- "Text"
