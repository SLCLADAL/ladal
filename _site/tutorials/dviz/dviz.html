<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Martin Schweinberger">

<title>Data Visualization with R – Language Technology and Data Analysis Laboratory (LADAL)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>
<script>
    // Wait for the document to be fully loaded
    document.addEventListener("DOMContentLoaded", function () {
        // Create a new div element to hold the dynamic content
        var newContainer = document.createElement("div");
        newContainer.classList.add("custom-banner");  // You can assign a class to the new container for styling

        // You can also add content inside the new container
        newContainer.innerHTML = `
          <div class="banner">
              <img src="/images/ladal_icon_white.png" alt="Icon" class="banner-icon">
              <span class="banner-text">Language Technology and Data Analysis Laboratory</span>
          </div>
      `

        // Select the header element
        var header = document.getElementById("quarto-header");

        // Select the nav element inside the header to place the new container just above it
        var navbar = header.querySelector("nav");

        // Insert the new container before the navbar element
        header.insertBefore(newContainer, navbar);
    });
</script>
<script src="../../site_libs/clipboard-1.7.1/clipboard.min.js"></script>
<link href="../../site_libs/primer-tooltips-1.4.0/build.css" rel="stylesheet">
<link href="../../site_libs/klippy-0.0.0.9500/css/klippy.min.css" rel="stylesheet">
<script src="../../site_libs/klippy-0.0.0.9500/js/klippy.min.js"></script>
<link href="../../site_libs/tabwid-1.1.3/tabwid.css" rel="stylesheet">
<script src="../../site_libs/tabwid-1.1.3/tabwid.js"></script>


<link rel="stylesheet" href="../../css/styles.css">
</head>

<body class="floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Language Technology and Data Analysis Laboratory (LADAL)</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">HOME</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">ABOUT</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../events.html"> 
<span class="menu-text">EVENTS</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../tutorials.html"> 
<span class="menu-text">TUTORIALS</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../tools.html"> 
<span class="menu-text">TOOLS</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../resources.html"> 
<span class="menu-text">RESOURCES</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../contact.html"> 
<span class="menu-text">CONTACT</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul class="collapse">
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#getting-started" id="toc-getting-started" class="nav-link" data-scroll-target="#getting-started">Getting started</a></li>
  <li><a href="#dot-and-scatter-plots" id="toc-dot-and-scatter-plots" class="nav-link" data-scroll-target="#dot-and-scatter-plots">Dot and Scatter Plots</a>
  <ul class="collapse">
  <li><a href="#extensions-of-dot-plots" id="toc-extensions-of-dot-plots" class="nav-link" data-scroll-target="#extensions-of-dot-plots">Extensions of dot plots</a></li>
  </ul></li>
  <li><a href="#density-plots" id="toc-density-plots" class="nav-link" data-scroll-target="#density-plots">Density Plots</a></li>
  <li><a href="#line-graphs" id="toc-line-graphs" class="nav-link" data-scroll-target="#line-graphs">Line Graphs</a>
  <ul class="collapse">
  <li><a href="#smoothed-line-graphs" id="toc-smoothed-line-graphs" class="nav-link" data-scroll-target="#smoothed-line-graphs">Smoothed line graphs</a></li>
  <li><a href="#ribbon-plots" id="toc-ribbon-plots" class="nav-link" data-scroll-target="#ribbon-plots">Ribbon plots</a></li>
  <li><a href="#line-graphs-for-likert-data" id="toc-line-graphs-for-likert-data" class="nav-link" data-scroll-target="#line-graphs-for-likert-data">Line graphs for Likert data</a></li>
  </ul></li>
  <li><a href="#pie-charts" id="toc-pie-charts" class="nav-link" data-scroll-target="#pie-charts">Pie charts</a></li>
  <li><a href="#histograms" id="toc-histograms" class="nav-link" data-scroll-target="#histograms">Histograms</a></li>
  <li><a href="#bar-plots" id="toc-bar-plots" class="nav-link" data-scroll-target="#bar-plots">Bar plots</a>
  <ul class="collapse">
  <li><a href="#bar-plots-for-likert-data" id="toc-bar-plots-for-likert-data" class="nav-link" data-scroll-target="#bar-plots-for-likert-data">Bar plots for Likert data</a></li>
  <li><a href="#comparative-bar-plots-with-negative-values" id="toc-comparative-bar-plots-with-negative-values" class="nav-link" data-scroll-target="#comparative-bar-plots-with-negative-values">Comparative bar plots with negative values</a></li>
  </ul></li>
  <li><a href="#ridge-plots" id="toc-ridge-plots" class="nav-link" data-scroll-target="#ridge-plots">Ridge Plots</a></li>
  <li><a href="#boxplots" id="toc-boxplots" class="nav-link" data-scroll-target="#boxplots">Boxplots</a></li>
  <li><a href="#violin-plots" id="toc-violin-plots" class="nav-link" data-scroll-target="#violin-plots">Violin plots</a></li>
  <li><a href="#word-clouds" id="toc-word-clouds" class="nav-link" data-scroll-target="#word-clouds">Word clouds</a></li>
  <li><a href="#association-plots" id="toc-association-plots" class="nav-link" data-scroll-target="#association-plots">Association plots</a></li>
  <li><a href="#mosaic-plots" id="toc-mosaic-plots" class="nav-link" data-scroll-target="#mosaic-plots">Mosaic plots</a></li>
  <li><a href="#heat-maps" id="toc-heat-maps" class="nav-link" data-scroll-target="#heat-maps">Heat maps</a></li>
  <li><a href="#citation-session-info" id="toc-citation-session-info" class="nav-link" data-scroll-target="#citation-session-info">Citation &amp; Session Info</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Data Visualization with R</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Martin Schweinberger </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<p><img src="../../images/uq1.jpg" class="img-fluid" style="width:100.0%"></p>
<section id="introduction" class="level1 unnumbered">
<h1 class="unnumbered">Introduction</h1>
<p>This tutorial introduces different types of data visualization and how to prepare your data for different plot types.</p>
<p><img src="../../images/gy_chili.png" class="img-fluid" style="float:right; padding:10px;width:15.0%"></p>
<p>This tutorial is aimed at beginners and intermediate users of R with the aim of showcasing how to visualize data in R using the ggplot2 and selected additional packages. The aim is not to provide a fully-fledged analysis but rather to show and exemplify selected useful methods for data visualizations.</p>
<p>A more in-depth and highly recommendable resource for data visualization in R is <span class="citation" data-cites="wickham2016ggplot2">Wickham</span>. A more general introduction to data visualization - which is still highly recommendable is <span class="citation" data-cites="healy2018data">Healy</span>. Other very recommendable resources are, e.g.&nbsp;<a href="https://psyteachr.github.io/introdataviz/">Data visualisation using R, for researchers who don’t use R</a> by Emily Nordmann, Phil McAleer, Wilhelmiina Toivo, Helena Paterson, and Lisa M. DeBruine (see also <a href="https://protect-au.mimecast.com/s/oUMcCP7LAXf4vjZyqT1eb_1?domain=t.co">here</a>), <a href="https://rkabacoff.github.io/datavis/">Data Visualization with R</a> by Rob Kabacoff or <a href="https://towardsdatascience.com/a-guide-to-data-visualisation-in-r-for-beginners-ef6d41a34174">A Comprehensive Guide to Data Visualisation in R for Beginners</a> by Parul Pandey.</p>
<div class="warning" style="padding:0.1em; background-color:#f2f2f2; color:#51247a">
<span>
<p style="margin-top:1em; text-align:center">
To be able to follow this tutorial, we suggest you check out and familiarize yourself with the content of the following <strong>R Basics</strong> tutorials:<br>
</p>
<p style="margin-top:1em; text-align:left">
</p><ul>
<li>
<a href="https://ladal.edu.au/intror.html">Getting started with R</a>
</li>
<li>
<a href="https://ladal.edu.au/load.html">Loading, saving, and generating data in R</a>
</li>
<li>
<a href="https://ladal.edu.au/string.html">String Processing in R</a>
</li>
<li>
<a href="https://ladal.edu.au/regex.html">Regular Expressions in R</a>
</li>
<li>
<a href="https://ladal.edu.au/regex.html">Handling Tables in R</a>
</li>
<li>
<a href="https://ladal.edu.au/introviz.html">Introduction to Data Viz</a>
</li>
</ul>
<p></p>
<p style="margin-top:1em; text-align:center">
Click <a href="https://ladal.edu.au/content/dviz.Rmd"><strong>here</strong></a><a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> to download the <strong>entire R Notebook</strong> for this tutorial.<br><br> <a href="https://binderhub.atap-binder.cloud.edu.au/v2/gh/SLCLADAL/interactive-notebooks-environment/main?urlpath=git-pull%3Frepo%3Dhttps%253A%252F%252Fgithub.com%252FSLCLADAL%252Finteractive-notebooks%26urlpath%3Dlab%252Ftree%252Finteractive-notebooks%252Fnotebooks%252Fdviz_cb.ipynb%26branch%3Dmain"><img src="https://mybinder.org/badge_logo.svg" class="img-fluid" alt="Binder"></a><br> Click <a href="https://binderhub.atap-binder.cloud.edu.au/v2/gh/SLCLADAL/interactive-notebooks-environment/main?urlpath=git-pull%3Frepo%3Dhttps%253A%252F%252Fgithub.com%252FSLCLADAL%252Finteractive-notebooks%26urlpath%3Dlab%252Ftree%252Finteractive-notebooks%252Fnotebooks%252Fdviz_cb.ipynb%26branch%3Dmain"><strong>here</strong></a> to open an interactive Jupyter notebook that allows you to execute, change, and edit the code as well as to upload your own data. <br>
</p>
<p style="margin-left:1em;">
</p>
<p></p>
</span></div>
<p><br></p>
<p><strong>Preparation and session set up</strong></p>
<p>This tutorial is based on R. If you have not installed R or are new to it, you will find an introduction to and more information how to use R <a href="https://slcladal.github.io/intror.html">here</a>. For this tutorials, we need to install certain <em>packages</em> from an R <em>library</em> so that the scripts shown below are executed without errors. Before turning to the code below, please install the packages by running the code below this paragraph. If you have already installed the packages mentioned below, then you can skip ahead and ignore this section. To install the necessary packages, simply run the following code - it may take some time (between 1 and 5 minutes to install all of the libraries so you do not need to worry if it takes some time).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install packages</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"dplyr"</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"stringr"</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"ggplot2"</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"likert"</span>)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"scales"</span>)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"vcd"</span>)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"tm"</span>)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"ggridges"</span>)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"tidyr"</span>)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"flextable"</span>)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"hexbin"</span>)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"ggstatsplot"</span>)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"PMCMRplus"</span>)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"rstantools"</span>)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"EnvStats"</span>)</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"vip"</span>)</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="co"># install klippy for copy-to-clipboard button in code chunks</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"remotes"</span>)</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"gridExtra"</span>)</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">"rlesur/klippy"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now that we have installed the packages, we activate them as shown below.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r klippy code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># activate packages</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(likert)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(vcd)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tm)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggridges)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(flextable)</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(hexbin)</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rstantools)</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(PMCMRplus)</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(vip)</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gridExtra)</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a><span class="co"># activate klippy for copy-to-clipboard button</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>klippy<span class="sc">::</span><span class="fu">klippy</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<script>
  addClassKlippyTo("pre.r, pre.markdown");
  addKlippy('left', 'top', 'auto', '1', 'Copy code', 'Copied!');
</script>
</div>
</div>
<p>Once you have installed R and RStudio and initiated the session by executing the code shown above, you are good to go.</p>
</section>
<section id="getting-started" class="level1 unnumbered">
<h1 class="unnumbered">Getting started</h1>
<p>Before turning to the graphs, we load the data that we will display. The data set is called <code>lmmdata</code> but we will change the name to <code>pdat</code> for this tutorial. The data set is based on the <a href="https://www.ling.upenn.edu/hist-corpora/"><em>Penn Parsed Corpora of Historical English</em></a> (PPC) and it contains the date when a text was written (<code>Date</code>), the genre of the text (<code>Genre</code>), the name of the text (<code>Text</code>), the relative frequency of prepositions in the text (<code>Prepositions</code>), and the region in which the text was written (<code>Region</code>). We also add two more variables to the data called <code>GenreRedux</code> and <code>DateRedux</code>. <code>GenreRedux</code> collapses the existing genres into five main categories (<em>Conversational</em>, <em>Religious</em>, <em>Legal</em>, <em>Fiction</em>, and <em>NonFiction</em>) while <code>DateRedux</code> collapses the dates when the texts were composed into five main periods (1150-1499, 1500-1599, 1600-1699, 1700-1799, and 1800-1913). We also factorize non-numeric variables.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load data</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>pdat <span class="ot">&lt;-</span> base<span class="sc">::</span><span class="fu">readRDS</span>(<span class="fu">url</span>(<span class="st">"https://slcladal.github.io/data/pvd.rda"</span>, <span class="st">"rb"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s briefly inspect the data.</p>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-8173a188{table-layout:auto;width:95%;}.cl-8170058c{font-family:'Helvetica';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-81700596{font-family:'Helvetica';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-81716e7c{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-81716e7d{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-81717f98{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-81717fa2{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-81717fa3{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-81717fa4{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-81717fac{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-81717fad{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-81717fae{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-81717faf{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-81717fb0{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-81717fb6{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-81717fb7{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-81717fb8{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-81717fb9{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-81717fc0{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-81717fc1{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-81717fc2{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-8173a188"><thead><tr style="overflow-wrap:break-word;"><th class="cl-81717f98"><p class="cl-81716e7c"><span class="cl-8170058c">Date</span></p></th><th class="cl-81717fa2"><p class="cl-81716e7d"><span class="cl-8170058c">Genre</span></p></th><th class="cl-81717fa2"><p class="cl-81716e7d"><span class="cl-8170058c">Text</span></p></th><th class="cl-81717fa3"><p class="cl-81716e7c"><span class="cl-8170058c">Prepositions</span></p></th><th class="cl-81717fa2"><p class="cl-81716e7d"><span class="cl-8170058c">Region</span></p></th><th class="cl-81717fa2"><p class="cl-81716e7d"><span class="cl-8170058c">GenreRedux</span></p></th><th class="cl-81717fa4"><p class="cl-81716e7d"><span class="cl-8170058c">DateRedux</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-81717fac"><p class="cl-81716e7c"><span class="cl-81700596">1,736</span></p></td><td class="cl-81717fad"><p class="cl-81716e7d"><span class="cl-81700596">Science</span></p></td><td class="cl-81717fad"><p class="cl-81716e7d"><span class="cl-81700596">albin</span></p></td><td class="cl-81717fae"><p class="cl-81716e7c"><span class="cl-81700596">166.01</span></p></td><td class="cl-81717fad"><p class="cl-81716e7d"><span class="cl-81700596">North</span></p></td><td class="cl-81717fad"><p class="cl-81716e7d"><span class="cl-81700596">NonFiction</span></p></td><td class="cl-81717faf"><p class="cl-81716e7d"><span class="cl-81700596">1700-1799</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-81717fb0"><p class="cl-81716e7c"><span class="cl-81700596">1,711</span></p></td><td class="cl-81717fb6"><p class="cl-81716e7d"><span class="cl-81700596">Education</span></p></td><td class="cl-81717fb6"><p class="cl-81716e7d"><span class="cl-81700596">anon</span></p></td><td class="cl-81717fb7"><p class="cl-81716e7c"><span class="cl-81700596">139.86</span></p></td><td class="cl-81717fb6"><p class="cl-81716e7d"><span class="cl-81700596">North</span></p></td><td class="cl-81717fb6"><p class="cl-81716e7d"><span class="cl-81700596">NonFiction</span></p></td><td class="cl-81717fb8"><p class="cl-81716e7d"><span class="cl-81700596">1700-1799</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-81717fac"><p class="cl-81716e7c"><span class="cl-81700596">1,808</span></p></td><td class="cl-81717fad"><p class="cl-81716e7d"><span class="cl-81700596">PrivateLetter</span></p></td><td class="cl-81717fad"><p class="cl-81716e7d"><span class="cl-81700596">austen</span></p></td><td class="cl-81717fae"><p class="cl-81716e7c"><span class="cl-81700596">130.78</span></p></td><td class="cl-81717fad"><p class="cl-81716e7d"><span class="cl-81700596">North</span></p></td><td class="cl-81717fad"><p class="cl-81716e7d"><span class="cl-81700596">Conversational</span></p></td><td class="cl-81717faf"><p class="cl-81716e7d"><span class="cl-81700596">1800-1913</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-81717fb0"><p class="cl-81716e7c"><span class="cl-81700596">1,878</span></p></td><td class="cl-81717fb6"><p class="cl-81716e7d"><span class="cl-81700596">Education</span></p></td><td class="cl-81717fb6"><p class="cl-81716e7d"><span class="cl-81700596">bain</span></p></td><td class="cl-81717fb7"><p class="cl-81716e7c"><span class="cl-81700596">151.29</span></p></td><td class="cl-81717fb6"><p class="cl-81716e7d"><span class="cl-81700596">North</span></p></td><td class="cl-81717fb6"><p class="cl-81716e7d"><span class="cl-81700596">NonFiction</span></p></td><td class="cl-81717fb8"><p class="cl-81716e7d"><span class="cl-81700596">1800-1913</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-81717fac"><p class="cl-81716e7c"><span class="cl-81700596">1,743</span></p></td><td class="cl-81717fad"><p class="cl-81716e7d"><span class="cl-81700596">Education</span></p></td><td class="cl-81717fad"><p class="cl-81716e7d"><span class="cl-81700596">barclay</span></p></td><td class="cl-81717fae"><p class="cl-81716e7c"><span class="cl-81700596">145.72</span></p></td><td class="cl-81717fad"><p class="cl-81716e7d"><span class="cl-81700596">North</span></p></td><td class="cl-81717fad"><p class="cl-81716e7d"><span class="cl-81700596">NonFiction</span></p></td><td class="cl-81717faf"><p class="cl-81716e7d"><span class="cl-81700596">1700-1799</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-81717fb0"><p class="cl-81716e7c"><span class="cl-81700596">1,908</span></p></td><td class="cl-81717fb6"><p class="cl-81716e7d"><span class="cl-81700596">Education</span></p></td><td class="cl-81717fb6"><p class="cl-81716e7d"><span class="cl-81700596">benson</span></p></td><td class="cl-81717fb7"><p class="cl-81716e7c"><span class="cl-81700596">120.77</span></p></td><td class="cl-81717fb6"><p class="cl-81716e7d"><span class="cl-81700596">North</span></p></td><td class="cl-81717fb6"><p class="cl-81716e7d"><span class="cl-81700596">NonFiction</span></p></td><td class="cl-81717fb8"><p class="cl-81716e7d"><span class="cl-81700596">1800-1913</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-81717fac"><p class="cl-81716e7c"><span class="cl-81700596">1,906</span></p></td><td class="cl-81717fad"><p class="cl-81716e7d"><span class="cl-81700596">Diary</span></p></td><td class="cl-81717fad"><p class="cl-81716e7d"><span class="cl-81700596">benson</span></p></td><td class="cl-81717fae"><p class="cl-81716e7c"><span class="cl-81700596">119.17</span></p></td><td class="cl-81717fad"><p class="cl-81716e7d"><span class="cl-81700596">North</span></p></td><td class="cl-81717fad"><p class="cl-81716e7d"><span class="cl-81700596">Conversational</span></p></td><td class="cl-81717faf"><p class="cl-81716e7d"><span class="cl-81700596">1800-1913</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-81717fb0"><p class="cl-81716e7c"><span class="cl-81700596">1,897</span></p></td><td class="cl-81717fb6"><p class="cl-81716e7d"><span class="cl-81700596">Philosophy</span></p></td><td class="cl-81717fb6"><p class="cl-81716e7d"><span class="cl-81700596">boethja</span></p></td><td class="cl-81717fb7"><p class="cl-81716e7c"><span class="cl-81700596">132.96</span></p></td><td class="cl-81717fb6"><p class="cl-81716e7d"><span class="cl-81700596">North</span></p></td><td class="cl-81717fb6"><p class="cl-81716e7d"><span class="cl-81700596">NonFiction</span></p></td><td class="cl-81717fb8"><p class="cl-81716e7d"><span class="cl-81700596">1800-1913</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-81717fac"><p class="cl-81716e7c"><span class="cl-81700596">1,785</span></p></td><td class="cl-81717fad"><p class="cl-81716e7d"><span class="cl-81700596">Philosophy</span></p></td><td class="cl-81717fad"><p class="cl-81716e7d"><span class="cl-81700596">boethri</span></p></td><td class="cl-81717fae"><p class="cl-81716e7c"><span class="cl-81700596">130.49</span></p></td><td class="cl-81717fad"><p class="cl-81716e7d"><span class="cl-81700596">North</span></p></td><td class="cl-81717fad"><p class="cl-81716e7d"><span class="cl-81700596">NonFiction</span></p></td><td class="cl-81717faf"><p class="cl-81716e7d"><span class="cl-81700596">1700-1799</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-81717fb0"><p class="cl-81716e7c"><span class="cl-81700596">1,776</span></p></td><td class="cl-81717fb6"><p class="cl-81716e7d"><span class="cl-81700596">Diary</span></p></td><td class="cl-81717fb6"><p class="cl-81716e7d"><span class="cl-81700596">boswell</span></p></td><td class="cl-81717fb7"><p class="cl-81716e7c"><span class="cl-81700596">135.94</span></p></td><td class="cl-81717fb6"><p class="cl-81716e7d"><span class="cl-81700596">North</span></p></td><td class="cl-81717fb6"><p class="cl-81716e7d"><span class="cl-81700596">Conversational</span></p></td><td class="cl-81717fb8"><p class="cl-81716e7d"><span class="cl-81700596">1700-1799</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-81717fac"><p class="cl-81716e7c"><span class="cl-81700596">1,905</span></p></td><td class="cl-81717fad"><p class="cl-81716e7d"><span class="cl-81700596">Travel</span></p></td><td class="cl-81717fad"><p class="cl-81716e7d"><span class="cl-81700596">bradley</span></p></td><td class="cl-81717fae"><p class="cl-81716e7c"><span class="cl-81700596">154.20</span></p></td><td class="cl-81717fad"><p class="cl-81716e7d"><span class="cl-81700596">North</span></p></td><td class="cl-81717fad"><p class="cl-81716e7d"><span class="cl-81700596">NonFiction</span></p></td><td class="cl-81717faf"><p class="cl-81716e7d"><span class="cl-81700596">1800-1913</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-81717fb0"><p class="cl-81716e7c"><span class="cl-81700596">1,711</span></p></td><td class="cl-81717fb6"><p class="cl-81716e7d"><span class="cl-81700596">Education</span></p></td><td class="cl-81717fb6"><p class="cl-81716e7d"><span class="cl-81700596">brightland</span></p></td><td class="cl-81717fb7"><p class="cl-81716e7c"><span class="cl-81700596">149.14</span></p></td><td class="cl-81717fb6"><p class="cl-81716e7d"><span class="cl-81700596">North</span></p></td><td class="cl-81717fb6"><p class="cl-81716e7d"><span class="cl-81700596">NonFiction</span></p></td><td class="cl-81717fb8"><p class="cl-81716e7d"><span class="cl-81700596">1700-1799</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-81717fac"><p class="cl-81716e7c"><span class="cl-81700596">1,762</span></p></td><td class="cl-81717fad"><p class="cl-81716e7d"><span class="cl-81700596">Sermon</span></p></td><td class="cl-81717fad"><p class="cl-81716e7d"><span class="cl-81700596">burton</span></p></td><td class="cl-81717fae"><p class="cl-81716e7c"><span class="cl-81700596">159.71</span></p></td><td class="cl-81717fad"><p class="cl-81716e7d"><span class="cl-81700596">North</span></p></td><td class="cl-81717fad"><p class="cl-81716e7d"><span class="cl-81700596">Religious</span></p></td><td class="cl-81717faf"><p class="cl-81716e7d"><span class="cl-81700596">1700-1799</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-81717fb0"><p class="cl-81716e7c"><span class="cl-81700596">1,726</span></p></td><td class="cl-81717fb6"><p class="cl-81716e7d"><span class="cl-81700596">Sermon</span></p></td><td class="cl-81717fb6"><p class="cl-81716e7d"><span class="cl-81700596">butler</span></p></td><td class="cl-81717fb7"><p class="cl-81716e7c"><span class="cl-81700596">157.49</span></p></td><td class="cl-81717fb6"><p class="cl-81716e7d"><span class="cl-81700596">North</span></p></td><td class="cl-81717fb6"><p class="cl-81716e7d"><span class="cl-81700596">Religious</span></p></td><td class="cl-81717fb8"><p class="cl-81716e7d"><span class="cl-81700596">1700-1799</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-81717fb9"><p class="cl-81716e7c"><span class="cl-81700596">1,835</span></p></td><td class="cl-81717fc0"><p class="cl-81716e7d"><span class="cl-81700596">PrivateLetter</span></p></td><td class="cl-81717fc0"><p class="cl-81716e7d"><span class="cl-81700596">carlyle</span></p></td><td class="cl-81717fc1"><p class="cl-81716e7c"><span class="cl-81700596">124.16</span></p></td><td class="cl-81717fc0"><p class="cl-81716e7d"><span class="cl-81700596">North</span></p></td><td class="cl-81717fc0"><p class="cl-81716e7d"><span class="cl-81700596">Conversational</span></p></td><td class="cl-81717fc2"><p class="cl-81716e7d"><span class="cl-81700596">1800-1913</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>In addition, we will create a vector with colors that we will be using throughout this tutorial. This is not really necessary but it shares us from having to specify colors every time when we do not want to use the default colors that R provides. In this case, we will specify five colors but this palette could be extended. You can also check out the colors that are available in R <a href="http://www.stat.columbia.edu/~tzheng/files/Rcolor.pdf">here</a> and the palettes or sets of colors <a href="https://www.datanovia.com/en/blog/top-r-color-palettes-to-know-for-great-data-visualization/">here</a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>clrs <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"purple"</span>, <span class="st">"gray80"</span>, <span class="st">"lightblue"</span>, <span class="st">"orange"</span>, <span class="st">"gray30"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We will now turn to creating the graphs.</p>
</section>
<section id="dot-and-scatter-plots" class="level1 unnumbered">
<h1 class="unnumbered">Dot and Scatter Plots</h1>
<p>The first, and simplest graph, is a so-called <em>scatter</em> or <em>dot plot</em>. Scatter plots are used when the graph is set up to display the relationship between two numeric variables. When creating scatter plots with the <code>ggplot2</code> package, we use the <code>ggplot</code> function, then we define the data, and then we specify the type of plot using a <em>geom</em> (in this case a <code>geom_point</code>).</p>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create simple scatter plot</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co"># use data set "pdat"</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  pdat,</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># define axes</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> Date,</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> Prepositions</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># define plot type</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><img src="dviz_files/figure-html/scatter9-1.png" class="img-fluid" width="672"></p>
<p>Let’s go over the code above. The function call for plotting in is simply <code>ggplot</code>. This function takes the data set as its first argument and then requires aesthetics. The aesthetics are defined within the <code>ggplot</code> function as the arguments of <code>aes</code>. The <code>aes</code> function takes the axes as the arguments (in the current case). Then, we need to define the type of plot that we want. As we want a scatter plot with points, we add the <code>geom_point()</code> function without any arguments (as we do not want to specify the size, color, and shape of the points just yet).</p>
<p>The advantage of <code>ggplot2</code> is that is really easy to modify the plot by adding new layers and to change the basic outlook by modifying the theme which is what we will do in the code below.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  pdat,</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># define axes</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> Date,</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> Prepositions,</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># define to color by Species</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> GenreRedux</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># define plot type</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># define theme  as black and white (bw)</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dviz_files/figure-html/scatter10-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The white background is created by specifying the theme as a black and white theme (<code>theme_bw()</code>) while the color of the dots is changed by specifying that the color should be applied by Species (<code>color = GenreRedux</code>). Then, the colors to be used are defined in the function <code>scale_color_manual</code>.</p>
<p>We can now specify the symbols in the scatter plot.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create scatter plot colored by genre</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(pdat, <span class="fu">aes</span>(Date, Prepositions, <span class="at">color =</span> GenreRedux, <span class="at">shape =</span> GenreRedux)) <span class="sc">+</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">shape =</span> <span class="fu">guide_legend</span>(<span class="at">override.aes =</span> <span class="fu">list</span>(<span class="at">fill =</span> <span class="cn">NA</span>))) <span class="sc">+</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_shape_manual</span>(</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Genre"</span>,</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks =</span> <span class="fu">names</span>(<span class="fu">table</span>(pdat<span class="sc">$</span>GenreRedux)),</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">values =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Genre"</span>,</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks =</span> <span class="fu">names</span>(<span class="fu">table</span>(pdat<span class="sc">$</span>GenreRedux)),</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">values =</span> clrs</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"top"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dviz_files/figure-html/scatter12-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<section id="extensions-of-dot-plots" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="extensions-of-dot-plots">Extensions of dot plots</h2>
<p>In addition, we can add regression lines with error bars by Species and, if we want to show separate windows for the plots, we can use the “facet_grid” or “facet_wrap” function and define by which variable we want to create different panels.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create scatter plot colored by genre in different panels</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(pdat, <span class="fu">aes</span>(Date, Prepositions, <span class="at">color =</span> Genre)) <span class="sc">+</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(Genre), <span class="at">ncol =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">se =</span> F) <span class="sc">+</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>, <span class="at">angle =</span> <span class="dv">90</span>)</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dviz_files/figure-html/scatter13-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>If we only want to show the lines, we simply drop the “geom_point” function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create scatter plot colored by genre in different panels</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(pdat, <span class="fu">aes</span>(<span class="at">x =</span> Date, <span class="at">y =</span> Prepositions, <span class="at">color =</span> Genre)) <span class="sc">+</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(Genre), <span class="at">ncol =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">se =</span> F) <span class="sc">+</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>, <span class="at">angle =</span> <span class="dv">90</span>)</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dviz_files/figure-html/scatter14-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Another option is to plot density layers instead of plotting the data points.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create scatter density plot</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(pdat, <span class="fu">aes</span>(<span class="at">x =</span> Date, <span class="at">y =</span> Prepositions, <span class="at">color =</span> GenreRedux)) <span class="sc">+</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(GenreRedux), <span class="at">ncol =</span> <span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density_2d</span>() <span class="sc">+</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"top"</span>,</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>, <span class="at">angle =</span> <span class="dv">90</span>)</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dviz_files/figure-html/scatter15-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Although these are not scatterplots, plots with dot-symbols are very flexible and can be extended to show properties of the distribution of values. One way to create such a plot is to plot means as dot-symbols and add error bars to provide information about the underlying distribution. The plot below illustrates such a plot and additionally shows how plots can be further customized.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># scatter plot with error bars</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(pdat, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(Genre, Prepositions, mean), <span class="at">y =</span> Prepositions, <span class="at">group =</span> Genre)) <span class="sc">+</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun =</span> mean, <span class="at">geom =</span> <span class="st">"point"</span>, <span class="fu">aes</span>(<span class="at">group =</span> Genre)) <span class="sc">+</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">fun.data =</span> mean_cl_boot,</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># add error bars</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">geom =</span> <span class="st">"errorbar"</span>, <span class="at">width =</span> <span class="fl">0.2</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># def. y-axis range</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">100</span>, <span class="dv">200</span>)) <span class="sc">+</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># def. font size</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">15</span>) <span class="sc">+</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># def. x- and y-axis</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>, <span class="at">angle =</span> <span class="dv">90</span>),</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>, <span class="at">face =</span> <span class="st">"plain"</span>)</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>  <span class="co"># def. axes labels</span></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Genre"</span>, <span class="at">y =</span> <span class="st">"Prepositions (Frequency)"</span>) <span class="sc">+</span></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># def. to col.</span></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">guide =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dviz_files/figure-html/scatter16-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Balloon plots are an extension of scatter plots that are typically used to display data that represents * two categorical variables * one numeric variable.</p>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ballon plot</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>pdat <span class="sc">%&gt;%</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">DateRedux =</span> <span class="fu">factor</span>(DateRedux)) <span class="sc">%&gt;%</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(DateRedux, GenreRedux) <span class="sc">%&gt;%</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">Prepositions =</span> <span class="fu">mean</span>(Prepositions)) <span class="sc">%&gt;%</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(DateRedux, <span class="dv">100</span>,</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> Prepositions,</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> GenreRedux</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">+</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="fu">vars</span>(GenreRedux)) <span class="sc">+</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">shape =</span> <span class="dv">21</span>) <span class="sc">+</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size_area</span>(<span class="at">max_size =</span> <span class="dv">15</span>) <span class="sc">+</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">50</span>, <span class="dv">150</span>)) <span class="sc">+</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.ticks.y =</span> <span class="fu">element_blank</span>()</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_discrete</span>(<span class="at">guide =</span> <span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><img src="dviz_files/figure-html/bal1-1.png" class="img-fluid" width="672"></p>
</section>
</section>
<section id="density-plots" class="level1 unnumbered">
<h1 class="unnumbered">Density Plots</h1>
<p>Another way to visualize the distribution of the data with respect to numeric variables are density plots or Kernel Density Plots. Density plots smooth the data using so-called kernel smoothing to even out the distribution of frequencies along the lines of a numeric or interval variable. The peaks of density plots help display where values are concentrated over the interval. To show the relationship between the variable and the density plot, we will first create a scatter plot and then create a density plot of the variable displayed on the x-axis of the scatter plot.</p>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create dot plot</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(pdat, <span class="fu">aes</span>(<span class="at">x =</span> Date, <span class="at">y =</span> Prepositions, <span class="at">color =</span> Region)) <span class="sc">+</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> clrs[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>]) <span class="sc">+</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="at">legend.justification =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><img src="dviz_files/figure-html/dens1-1.png" class="img-fluid" width="672"></p>
<p>We will now create a marginal density plot of Date (x-axis) to show when texts from the north and south were particularly common.</p>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create dot plot</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(pdat, <span class="fu">aes</span>(Date, <span class="at">fill =</span> Region)) <span class="sc">+</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">alpha =</span> .<span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> clrs[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>]) <span class="sc">+</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="at">legend.justification =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><img src="dviz_files/figure-html/dens2-1.png" class="img-fluid" width="672"></p>
<p>The density plot shows that the texts differ substantially with respect to where they were written as the distribution of texts written in southern Britain continues way into the 19<sup>th</sup> century while we only have texts written in north until about 1800.</p>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create dot plot</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(pdat, <span class="fu">aes</span>(Date, Prepositions)) <span class="sc">+</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density2d_filled</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><img src="dviz_files/figure-html/dens3-1.png" class="img-fluid" width="672"></p>
<p>An alternative method for displaying densities is by using a hex plot as shown below. Hex plots divide the plotting area into hexagons and display density as hue of the hexagons.</p>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create dot plot</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>pdat <span class="sc">%&gt;%</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Date, <span class="at">y =</span> Prepositions)) <span class="sc">+</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hex</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><img src="dviz_files/figure-html/hex_01-1.png" class="img-fluid" width="672"></p>
<p>We are now in a position to start creating line graphs with <em>ggplot</em>.</p>
</section>
<section id="line-graphs" class="level1 unnumbered">
<h1 class="unnumbered">Line Graphs</h1>
<p>Line graphs are used when we have numeric values that are linked (in one way or another) because they come from the same speaker or genre as in our case).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>pdat <span class="sc">%&gt;%</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(DateRedux, GenreRedux) <span class="sc">%&gt;%</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">Frequency =</span> <span class="fu">mean</span>(Prepositions)) <span class="sc">%&gt;%</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> DateRedux, <span class="at">y =</span> Frequency, <span class="at">group =</span> GenreRedux, <span class="at">color =</span> GenreRedux)) <span class="sc">+</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add geom layer with lines</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dviz_files/figure-html/line1-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<section id="smoothed-line-graphs" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="smoothed-line-graphs">Smoothed line graphs</h2>
<p>Another very useful function when creating line graphs with “ggplot” is “geom_smooth” which <em>smoothes</em> the lines to be drawn.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(pdat, <span class="fu">aes</span>(<span class="at">x =</span> Date, <span class="at">y =</span> Prepositions, <span class="at">group =</span> GenreRedux, <span class="at">color =</span> GenreRedux)) <span class="sc">+</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add geom layer with lines</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dviz_files/figure-html/line2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>As this smoothed line graph is extremely useful, we will customize it to show how to modify your graph.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># define aesthetics</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(pdat, <span class="fu">aes</span>(<span class="at">x =</span> Date, <span class="at">y =</span> Prepositions, <span class="at">color =</span> GenreRedux, <span class="at">linetype =</span> GenreRedux)) <span class="sc">+</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add geom layer with lines</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">se =</span> F) <span class="sc">+</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># legend without background color</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">color =</span> <span class="fu">guide_legend</span>(<span class="at">override.aes =</span> <span class="fu">list</span>(<span class="at">fill =</span> <span class="cn">NA</span>))) <span class="sc">+</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># def. legend position</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"top"</span>) <span class="sc">+</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># def. linetype</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_linetype_manual</span>(</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">values =</span> <span class="fu">c</span>(<span class="st">"twodash"</span>, <span class="st">"dashed"</span>, <span class="st">"dotdash"</span>, <span class="st">"dotted"</span>, <span class="st">"solid"</span>),</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># def. legend header</span></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="fu">c</span>(<span class="st">"Genre"</span>),</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># def. linetypes</span></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks =</span> <span class="fu">names</span>(<span class="fu">table</span>(pdat<span class="sc">$</span>GenreRedux)),</span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># def. labels</span></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> <span class="fu">names</span>(<span class="fu">table</span>(pdat<span class="sc">$</span>GenreRedux))</span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>  <span class="co"># def. col.</span></span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_manual</span>(</span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">values =</span> clrs,</span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>    <span class="co"># define legend header</span></span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="fu">c</span>(<span class="st">"Genre"</span>),</span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a>    <span class="co"># define elements</span></span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks =</span> <span class="fu">names</span>(<span class="fu">table</span>(pdat<span class="sc">$</span>GenreRedux)),</span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a>    <span class="co"># define labels</span></span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> <span class="fu">names</span>(<span class="fu">table</span>(pdat<span class="sc">$</span>GenreRedux))</span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add x-axis label</span></span>
<span id="cb19-30"><a href="#cb19-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Year"</span>) <span class="sc">+</span></span>
<span id="cb19-31"><a href="#cb19-31" aria-hidden="true" tabindex="-1"></a>  <span class="co"># customize x-axis tick positions</span></span>
<span id="cb19-32"><a href="#cb19-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(</span>
<span id="cb19-33"><a href="#cb19-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">1100</span>, <span class="dv">1900</span>, <span class="dv">100</span>),</span>
<span id="cb19-34"><a href="#cb19-34" aria-hidden="true" tabindex="-1"></a>    <span class="co"># add labels to x-axis tick pos.</span></span>
<span id="cb19-35"><a href="#cb19-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> <span class="fu">seq</span>(<span class="dv">1100</span>, <span class="dv">1900</span>, <span class="dv">100</span>)</span>
<span id="cb19-36"><a href="#cb19-36" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb19-37"><a href="#cb19-37" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add y-axis label</span></span>
<span id="cb19-38"><a href="#cb19-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(</span>
<span id="cb19-39"><a href="#cb19-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Relative frequency </span><span class="sc">\n</span><span class="st">(per 1,000 words)"</span>,</span>
<span id="cb19-40"><a href="#cb19-40" aria-hidden="true" tabindex="-1"></a>    <span class="co"># customize tick y-axis</span></span>
<span id="cb19-41"><a href="#cb19-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">100</span>, <span class="dv">200</span>)</span>
<span id="cb19-42"><a href="#cb19-42" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb19-43"><a href="#cb19-43" aria-hidden="true" tabindex="-1"></a>  <span class="co"># define theme  as black and white</span></span>
<span id="cb19-44"><a href="#cb19-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dviz_files/figure-html/line3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Although the code for the customized smoothed line graph is much longer and requires addition specifications, it is a very nice way to portrait the development over time.</p>
</section>
<section id="ribbon-plots" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="ribbon-plots">Ribbon plots</h2>
<p>Ribbon plots show an area, typically between minimum and maximum values. In addition, ribbon plots commonly also show the mean as depicted below.</p>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create dot plot</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>pdat <span class="sc">%&gt;%</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">DateRedux =</span> <span class="fu">as.numeric</span>(DateRedux)) <span class="sc">%&gt;%</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(DateRedux) <span class="sc">%&gt;%</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">Mean =</span> <span class="fu">mean</span>(Prepositions),</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">Min =</span> <span class="fu">min</span>(Prepositions),</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">Max =</span> <span class="fu">max</span>(Prepositions)</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> DateRedux, <span class="at">y =</span> Mean)) <span class="sc">+</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> Min, <span class="at">ymax =</span> Max), <span class="at">fill =</span> <span class="st">"gray80"</span>) <span class="sc">+</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> <span class="fu">names</span>(<span class="fu">table</span>(pdat<span class="sc">$</span>DateRedux)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><img src="dviz_files/figure-html/rib_01-1.png" class="img-fluid" width="672"></p>
</section>
<section id="line-graphs-for-likert-data" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="line-graphs-for-likert-data">Line graphs for Likert data</h2>
<p>A special case of line graphs is used when dealing with Likert-scaled variables. In such cases, the line graph displays the density of cumulative frequencies of responses. The difference between the cumulative frequencies of responses displays differences in preferences. We will only focus on how to create such graphs using the “ggplot” environment here as it has an inbuilt function (“ecdf”) which is designed to handle such data.</p>
<p>In a first step, we create a data set which consists of a Likert-scaled variable. The fictitious data created here consists of rating of students from three courses about how satisfied they were with their language-learning course. The response to the Likert item is numeric so that “strongly disagree/very dissatisfied” would get the lowest and “strongly agree/very satisfied” the highest numeric value.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>ldat <span class="ot">&lt;-</span> base<span class="sc">::</span><span class="fu">readRDS</span>(<span class="fu">url</span>(<span class="st">"https://slcladal.github.io/data/lid.rda"</span>, <span class="st">"rb"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s briefly inspect the data.</p>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-8428bbd4{table-layout:auto;width:95%;}.cl-84251c04{font-family:'Helvetica';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-84251c0e{font-family:'Helvetica';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-842666ae{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-842666b8{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-842674e6{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-842674f0{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-842674f1{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-842674fa{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-842674fb{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-842674fc{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-842674fd{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-842674fe{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-8428bbd4"><thead><tr style="overflow-wrap:break-word;"><th class="cl-842674e6"><p class="cl-842666ae"><span class="cl-84251c04">Course</span></p></th><th class="cl-842674f0"><p class="cl-842666b8"><span class="cl-84251c04">Satisfaction</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-842674f1"><p class="cl-842666ae"><span class="cl-84251c0e">Chinese</span></p></td><td class="cl-842674fa"><p class="cl-842666b8"><span class="cl-84251c0e">1</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-842674fb"><p class="cl-842666ae"><span class="cl-84251c0e">Chinese</span></p></td><td class="cl-842674fc"><p class="cl-842666b8"><span class="cl-84251c0e">1</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-842674f1"><p class="cl-842666ae"><span class="cl-84251c0e">Chinese</span></p></td><td class="cl-842674fa"><p class="cl-842666b8"><span class="cl-84251c0e">1</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-842674fb"><p class="cl-842666ae"><span class="cl-84251c0e">Chinese</span></p></td><td class="cl-842674fc"><p class="cl-842666b8"><span class="cl-84251c0e">1</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-842674f1"><p class="cl-842666ae"><span class="cl-84251c0e">Chinese</span></p></td><td class="cl-842674fa"><p class="cl-842666b8"><span class="cl-84251c0e">1</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-842674fb"><p class="cl-842666ae"><span class="cl-84251c0e">Chinese</span></p></td><td class="cl-842674fc"><p class="cl-842666b8"><span class="cl-84251c0e">1</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-842674f1"><p class="cl-842666ae"><span class="cl-84251c0e">Chinese</span></p></td><td class="cl-842674fa"><p class="cl-842666b8"><span class="cl-84251c0e">1</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-842674fb"><p class="cl-842666ae"><span class="cl-84251c0e">Chinese</span></p></td><td class="cl-842674fc"><p class="cl-842666b8"><span class="cl-84251c0e">1</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-842674f1"><p class="cl-842666ae"><span class="cl-84251c0e">Chinese</span></p></td><td class="cl-842674fa"><p class="cl-842666b8"><span class="cl-84251c0e">1</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-842674fb"><p class="cl-842666ae"><span class="cl-84251c0e">Chinese</span></p></td><td class="cl-842674fc"><p class="cl-842666b8"><span class="cl-84251c0e">1</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-842674f1"><p class="cl-842666ae"><span class="cl-84251c0e">Chinese</span></p></td><td class="cl-842674fa"><p class="cl-842666b8"><span class="cl-84251c0e">1</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-842674fb"><p class="cl-842666ae"><span class="cl-84251c0e">Chinese</span></p></td><td class="cl-842674fc"><p class="cl-842666b8"><span class="cl-84251c0e">1</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-842674f1"><p class="cl-842666ae"><span class="cl-84251c0e">Chinese</span></p></td><td class="cl-842674fa"><p class="cl-842666b8"><span class="cl-84251c0e">1</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-842674fb"><p class="cl-842666ae"><span class="cl-84251c0e">Chinese</span></p></td><td class="cl-842674fc"><p class="cl-842666b8"><span class="cl-84251c0e">1</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-842674fd"><p class="cl-842666ae"><span class="cl-84251c0e">Chinese</span></p></td><td class="cl-842674fe"><p class="cl-842666b8"><span class="cl-84251c0e">1</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>Now that we have data resembling a Likert-scaled item from a questionnaire, we will display the data in a cumulative line graph.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create cumulative density plot</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(ldat, <span class="fu">aes</span>(<span class="at">x =</span> Satisfaction, <span class="at">color =</span> Course)) <span class="sc">+</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_step</span>(<span class="fu">aes</span>(<span class="at">y =</span> ..y..), <span class="at">stat =</span> <span class="st">"ecdf"</span>, <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Cumulative Density"</span>) <span class="sc">+</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">limits =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"very dissatisfied"</span>, <span class="st">"dissatisfied"</span>, <span class="st">"neutral"</span>, <span class="st">"satisfied"</span>, <span class="st">"very satisfied"</span>)</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_manual</span>(<span class="at">values =</span> clrs[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]) <span class="sc">+</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dviz_files/figure-html/llik_05-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The satisfaction of the German course was the lowest as the red line shows the highest density (frequency of responses) of “very dissatisfied” and “dissatisfied” ratings. The students in our fictitious data set were most satisfied with the Chinese course as the blue line is the lowest for “very dissatisfied” and “dissatisfied” ratings while the difference between the courses shrinks for “satisfied” and “very satisfied”. The Japanese language course is in-between the German and the Chinese course.</p>
</section>
</section>
<section id="pie-charts" class="level1 unnumbered">
<h1 class="unnumbered">Pie charts</h1>
<p>Most commonly, the data for visualization comes from tables of absolute frequencies associated with a categorical or nominal variable. The default way to visualize such frequency tables are pie charts and bar plots.</p>
<p>In a first step, we modify the original data to get counts and percentages. The data represents the number of documents per time period and the percentage of those documents across all time periods.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create bar plot data</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>bdat <span class="ot">&lt;-</span> pdat <span class="sc">%&gt;%</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">DateRedux =</span> <span class="fu">factor</span>(DateRedux)) <span class="sc">%&gt;%</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(DateRedux) <span class="sc">%&gt;%</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">Frequency =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">Percent =</span> <span class="fu">round</span>(Frequency <span class="sc">/</span> <span class="fu">sum</span>(Frequency) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s briefly inspect the data.</p>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-84456bbc{table-layout:auto;width:95%;}.cl-8442bf66{font-family:'Helvetica';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-8442bf7a{font-family:'Helvetica';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-8443d4e6{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-8443d4f0{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-8443e3e6{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8443e3f0{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8443e3fa{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8443e3fb{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8443e404{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8443e405{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8443e406{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8443e40e{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8443e418{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8443e419{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8443e41a{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8443e422{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-84456bbc"><thead><tr style="overflow-wrap:break-word;"><th class="cl-8443e3e6"><p class="cl-8443d4e6"><span class="cl-8442bf66">DateRedux</span></p></th><th class="cl-8443e3f0"><p class="cl-8443d4f0"><span class="cl-8442bf66">Frequency</span></p></th><th class="cl-8443e3fa"><p class="cl-8443d4f0"><span class="cl-8442bf66">Percent</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-8443e3fb"><p class="cl-8443d4e6"><span class="cl-8442bf7a">1150-1499</span></p></td><td class="cl-8443e404"><p class="cl-8443d4f0"><span class="cl-8442bf7a">34</span></p></td><td class="cl-8443e405"><p class="cl-8443d4f0"><span class="cl-8442bf7a">6.3</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-8443e406"><p class="cl-8443d4e6"><span class="cl-8442bf7a">1500-1599</span></p></td><td class="cl-8443e40e"><p class="cl-8443d4f0"><span class="cl-8442bf7a">180</span></p></td><td class="cl-8443e418"><p class="cl-8443d4f0"><span class="cl-8442bf7a">33.5</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-8443e3fb"><p class="cl-8443d4e6"><span class="cl-8442bf7a">1600-1699</span></p></td><td class="cl-8443e404"><p class="cl-8443d4f0"><span class="cl-8442bf7a">225</span></p></td><td class="cl-8443e405"><p class="cl-8443d4f0"><span class="cl-8442bf7a">41.9</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-8443e406"><p class="cl-8443d4e6"><span class="cl-8442bf7a">1700-1799</span></p></td><td class="cl-8443e40e"><p class="cl-8443d4f0"><span class="cl-8442bf7a">53</span></p></td><td class="cl-8443e418"><p class="cl-8443d4f0"><span class="cl-8442bf7a">9.9</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-8443e419"><p class="cl-8443d4e6"><span class="cl-8442bf7a">1800-1913</span></p></td><td class="cl-8443e41a"><p class="cl-8443d4f0"><span class="cl-8442bf7a">45</span></p></td><td class="cl-8443e422"><p class="cl-8443d4f0"><span class="cl-8442bf7a">8.4</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>Before creating bar plots, we will briefly turn to pie charts because pie charts are very common despite suffering from certain shortcomings. Consider the following example which highlights some of the issues that arise when using pie charts.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(bdat, <span class="fu">aes</span>(<span class="st">""</span>, Percent, <span class="at">fill =</span> DateRedux)) <span class="sc">+</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">position =</span> <span class="fu">position_dodge</span>()) <span class="sc">+</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> clrs) <span class="sc">+</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>()</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(bdat, <span class="fu">aes</span>(<span class="st">""</span>, Percent, <span class="at">fill =</span> DateRedux)) <span class="sc">+</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">width =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">"white"</span>) <span class="sc">+</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_polar</span>(<span class="st">"y"</span>, <span class="at">start =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> clrs) <span class="sc">+</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a><span class="fu">grid.arrange</span>(p1, p2, <span class="at">nrow =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dviz_files/figure-html/pie_03-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>When checking the bar plot, it is immediately apparent that the value for 1700-1799 is higher than the value for 1800-1913. In contrast, looking at the pie chart, this trend is almost impossible to detect. As such, bar plots display the same type of information that pie charts do but trends in the data are easier to communicate using bar charts.</p>
<p>However, if you want to create a pie chart in R using <code>ggplot2</code>, you can use the <code>geom_bar</code> and then define <code>coord_polar("y", start=0)</code>. Unfortunately, the labeling is not very easy to include. We will thus start with a pie chart without labels and then add the labels in a next step.</p>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(bdat, <span class="fu">aes</span>(<span class="st">""</span>, Percent, <span class="at">fill =</span> DateRedux)) <span class="sc">+</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">width =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">"white"</span>) <span class="sc">+</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_polar</span>(<span class="st">"y"</span>, <span class="at">start =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> clrs) <span class="sc">+</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><img src="dviz_files/figure-html/pie_05-1.png" class="img-fluid" width="672"></p>
<p>If the slices of the pie chart are not labelled, it is difficult to see which slices are smaller or bigger compared to other slices. This problem can easily be avoided when using a bar plot instead.</p>
<p>The labeling of pie charts is, however, somewhat tedious as the positioning is tricky. Below is an example for adding labels without specification.</p>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create pie chart</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(bdat, <span class="fu">aes</span>(<span class="st">""</span>, Percent, <span class="at">fill =</span> DateRedux)) <span class="sc">+</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">width =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">"white"</span>) <span class="sc">+</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_polar</span>(<span class="st">"y"</span>, <span class="at">start =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> clrs) <span class="sc">+</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">y =</span> Percent, <span class="at">label =</span> Percent), <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">size =</span> <span class="dv">6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><img src="dviz_files/figure-html/pie_07-1.png" class="img-fluid" width="672"></p>
<p>To place the labels where they make sense, we will add another variable to the data called “Position”.</p>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>piedata <span class="ot">&lt;-</span> bdat <span class="sc">%&gt;%</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="fu">desc</span>(DateRedux)) <span class="sc">%&gt;%</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">Position =</span> <span class="fu">cumsum</span>(Percent) <span class="sc">-</span> <span class="fl">0.5</span> <span class="sc">*</span> Percent)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Let’s briefly inspect the data.</p>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-848b5046{table-layout:auto;width:95%;}.cl-84889e6e{font-family:'Helvetica';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-84889e82{font-family:'Helvetica';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-8489b506{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-8489b507{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-8489c19a{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8489c19b{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8489c1a4{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8489c1a5{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8489c1a6{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8489c1ae{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8489c1b8{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8489c1b9{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8489c1c2{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8489c1c3{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8489c1cc{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8489c1cd{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-848b5046"><thead><tr style="overflow-wrap:break-word;"><th class="cl-8489c19a"><p class="cl-8489b506"><span class="cl-84889e6e">DateRedux</span></p></th><th class="cl-8489c19b"><p class="cl-8489b507"><span class="cl-84889e6e">Frequency</span></p></th><th class="cl-8489c19b"><p class="cl-8489b507"><span class="cl-84889e6e">Percent</span></p></th><th class="cl-8489c1a4"><p class="cl-8489b507"><span class="cl-84889e6e">Position</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-8489c1a5"><p class="cl-8489b506"><span class="cl-84889e82">1800-1913</span></p></td><td class="cl-8489c1a6"><p class="cl-8489b507"><span class="cl-84889e82">45</span></p></td><td class="cl-8489c1a6"><p class="cl-8489b507"><span class="cl-84889e82">8.4</span></p></td><td class="cl-8489c1ae"><p class="cl-8489b507"><span class="cl-84889e82">4.20</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-8489c1b8"><p class="cl-8489b506"><span class="cl-84889e82">1700-1799</span></p></td><td class="cl-8489c1b9"><p class="cl-8489b507"><span class="cl-84889e82">53</span></p></td><td class="cl-8489c1b9"><p class="cl-8489b507"><span class="cl-84889e82">9.9</span></p></td><td class="cl-8489c1c2"><p class="cl-8489b507"><span class="cl-84889e82">13.35</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-8489c1a5"><p class="cl-8489b506"><span class="cl-84889e82">1600-1699</span></p></td><td class="cl-8489c1a6"><p class="cl-8489b507"><span class="cl-84889e82">225</span></p></td><td class="cl-8489c1a6"><p class="cl-8489b507"><span class="cl-84889e82">41.9</span></p></td><td class="cl-8489c1ae"><p class="cl-8489b507"><span class="cl-84889e82">39.25</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-8489c1b8"><p class="cl-8489b506"><span class="cl-84889e82">1500-1599</span></p></td><td class="cl-8489c1b9"><p class="cl-8489b507"><span class="cl-84889e82">180</span></p></td><td class="cl-8489c1b9"><p class="cl-8489b507"><span class="cl-84889e82">33.5</span></p></td><td class="cl-8489c1c2"><p class="cl-8489b507"><span class="cl-84889e82">76.95</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-8489c1c3"><p class="cl-8489b506"><span class="cl-84889e82">1150-1499</span></p></td><td class="cl-8489c1cc"><p class="cl-8489b507"><span class="cl-84889e82">34</span></p></td><td class="cl-8489c1cc"><p class="cl-8489b507"><span class="cl-84889e82">6.3</span></p></td><td class="cl-8489c1cd"><p class="cl-8489b507"><span class="cl-84889e82">96.85</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>Now that we have specified the position, we can include it into the pie chart.</p>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create pie chart</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(piedata, <span class="fu">aes</span>(<span class="st">""</span>, Percent, <span class="at">fill =</span> DateRedux)) <span class="sc">+</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">width =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">"white"</span>) <span class="sc">+</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_polar</span>(<span class="st">"y"</span>, <span class="at">start =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> clrs) <span class="sc">+</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">y =</span> Position, <span class="at">label =</span> Percent), <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">size =</span> <span class="dv">6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><img src="dviz_files/figure-html/pie_11-1.png" class="img-fluid" width="672"></p>
</section>
<section id="histograms" class="level1 unnumbered">
<h1 class="unnumbered">Histograms</h1>
<p>Histograms summarize numeric variables by showing their distribution across bins. Using <code>ggplot2</code>, we specify the variable we want to summarize in the aesthetics and use the <code>geom_histogram</code> function to generate a histogram.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(pdat, <span class="fu">aes</span>(Prepositions)) <span class="sc">+</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dviz_files/figure-html/hist_02-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>We can simply add information about a second variable by specifying this variable as the basis for the coloring of the bars (which we do by specify the <code>fill</code> argument).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(pdat, <span class="fu">aes</span>(Prepositions, <span class="at">fill =</span> Region)) <span class="sc">+</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dviz_files/figure-html/hist_03-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="bar-plots" class="level1 unnumbered">
<h1 class="unnumbered">Bar plots</h1>
<p>Like pie charts, bar plot display frequency information across categorical variable levels. The creation of barplots in ggplot works just like other types of visualizations in this framework. We first define the data and the aesthetics and then use the <code>geom_bar</code> to create a barplot.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># bar plot</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(bdat, <span class="fu">aes</span>(DateRedux, Percent, <span class="at">fill =</span> DateRedux)) <span class="sc">+</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span> <span class="co"># determine type of plot</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span> <span class="co"># use black &amp; white theme</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add and define text</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">y =</span> Percent <span class="sc">-</span> <span class="dv">5</span>, <span class="at">label =</span> Percent), <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add colors</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> clrs) <span class="sc">+</span></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># suppress legend</span></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dviz_files/figure-html/bar4-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Compared with the pie chart, it is much easier to grasp the relative size and order of the percentage values which shows that pie charts are unfit to show relationships between elements in a graph and, as a general rule of thumb, should be avoided.</p>
<p>Bar plot can be grouped to add another layer of information which is particularly useful when dealing with frequency counts across multiple categorical variables. To create grouped bar plots, we plot <code>Region</code> while including <code>DateRedux</code> as the <code>fill</code> argument. Also, we use the command <code>position=position_dodge()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># bar plot</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(pdat, <span class="fu">aes</span>(Region, <span class="at">fill =</span> DateRedux)) <span class="sc">+</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="fu">position_dodge</span>(), <span class="at">stat =</span> <span class="st">"count"</span>) <span class="sc">+</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> clrs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dviz_files/figure-html/bar5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>If we leave out the <code>position=position_dodge()</code> argument, we get a stacked bar plot as shown below.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># bar plot</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(pdat, <span class="fu">aes</span>(DateRedux, <span class="at">fill =</span> GenreRedux)) <span class="sc">+</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"count"</span>) <span class="sc">+</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> clrs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dviz_files/figure-html/bar6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>One issue to consider when using stacked bar plots is the number of variable levels: when dealing with many variable levels, stacked bar plots tend to become rather confusing. This can be solved by either collapsing infrequent variable levels or choose a colour palette that reflects some other inherent piece of information such as <em>formality</em> (e.g.&nbsp;blue) versus <em>informality</em> (e.g.&nbsp;red).</p>
<p>Stacked bar plots can also be normalized so that changes in percentages become visible. This is done by exchanging <code>position=position_dodge()</code> with <code>position="fill"</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># bar plot</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(pdat, <span class="fu">aes</span>(DateRedux, <span class="at">fill =</span> GenreRedux)) <span class="sc">+</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"count"</span>, <span class="at">position =</span> <span class="st">"fill"</span>) <span class="sc">+</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> clrs) <span class="sc">+</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Probability"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dviz_files/figure-html/bar7-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<section id="bar-plots-for-likert-data" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="bar-plots-for-likert-data">Bar plots for Likert data</h2>
<p>Bar plots are particularly useful when visualizing data obtained through Likert items. As this is a very common issue that empirical researchers face. There are two basic ways to display Likert items using bar plots: grouped bar plots and more elaborate scaled bar plots.</p>
<p>Although we have seen above how to create grouped bar plots, we will repeat it here with the language course example used above when we used cumulative density line graphs to visualise how to display Likert data.</p>
<p>In a first step, we recreate the data set which we have used above. The data set consists of a Likert-scaled variable (Satisfaction) which represents rating of students from three courses about how satisfied they were with their language-learning course. The response to the Likert item is numeric so that “strongly disagree/very dissatisfied” would get the lowest and “strongly agree/very satisfied” the highest numeric value.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create likert data</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>nlik <span class="ot">&lt;-</span> ldat <span class="sc">%&gt;%</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(Course, Satisfaction) <span class="sc">%&gt;%</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">Frequency =</span> <span class="fu">n</span>())</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect data</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(nlik)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
# Groups:   Course [2]
  Course  Satisfaction Frequency
  &lt;chr&gt;          &lt;int&gt;     &lt;int&gt;
1 Chinese            1        20
2 Chinese            2        30
3 Chinese            3        25
4 Chinese            4        10
5 Chinese            5        15
6 German             1        40</code></pre>
</div>
</div>
<p>Now that we have data resembling a Likert-scaled item from a questionnaire, we will display the data in a cumulative line graph.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create grouped bar plot</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(nlik, <span class="fu">aes</span>(Satisfaction, Frequency, <span class="at">fill =</span> Course)) <span class="sc">+</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">position =</span> <span class="fu">position_dodge</span>()) <span class="sc">+</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># define colors</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> clrs) <span class="sc">+</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add text and define color</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> Frequency),</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">vjust =</span> <span class="fl">1.6</span>, <span class="at">color =</span> <span class="st">"white"</span>,</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># define text position and size</span></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="fl">0.9</span>), <span class="at">size =</span> <span class="fl">3.5</span></span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(</span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="st">"1"</span>, <span class="st">"2"</span>, <span class="st">"3"</span>, <span class="st">"4"</span>, <span class="st">"5"</span>), <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>),</span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> <span class="fu">c</span>(</span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a>      <span class="st">"very dissatisfied"</span>, <span class="st">"dissatisfied"</span>, <span class="st">"neutral"</span>, <span class="st">"satisfied"</span>,</span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a>      <span class="st">"very satisfied"</span></span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb37-19"><a href="#cb37-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dviz_files/figure-html/bar9-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Another and very interesting way to display such data is by using the Likert package. In a first step, we need to activate the package, clean the data, and extract a subset for the data visualization example.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>sdat <span class="ot">&lt;-</span> base<span class="sc">::</span><span class="fu">readRDS</span>(<span class="fu">url</span>(<span class="st">"https://slcladal.github.io/data/sdd.rda"</span>, <span class="st">"rb"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-8593f326{table-layout:auto;width:95%;}.cl-858f91a0{font-family:'Helvetica';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-858f91aa{font-family:'Helvetica';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-8590ea00{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-8590ea0a{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-8590f946{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8590f947{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8590f950{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8590f951{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8590f952{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8590f953{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8590f95a{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8590f95b{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8590f964{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8590f965{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8590f966{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8590f96e{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8590f96f{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8590f970{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8590f978{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8590f979{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-8593f326"><thead><tr style="overflow-wrap:break-word;"><th class="cl-8590f946"><p class="cl-8590ea00"><span class="cl-858f91a0">Group</span></p></th><th class="cl-8590f947"><p class="cl-8590ea00"><span class="cl-858f91a0">Respondent</span></p></th><th class="cl-8590f950"><p class="cl-8590ea0a"><span class="cl-858f91a0">How.did.you.like.the.course.</span></p></th><th class="cl-8590f950"><p class="cl-8590ea0a"><span class="cl-858f91a0">How.did.you.like.the.teacher.</span></p></th><th class="cl-8590f950"><p class="cl-8590ea0a"><span class="cl-858f91a0">Was.the.content.intersting.</span></p></th><th class="cl-8590f950"><p class="cl-8590ea0a"><span class="cl-858f91a0">Was.the.content.adequate.for.the.course.</span></p></th><th class="cl-8590f950"><p class="cl-8590ea0a"><span class="cl-858f91a0">Were.there.enough.discussions.</span></p></th><th class="cl-8590f950"><p class="cl-8590ea0a"><span class="cl-858f91a0">Was.the.use.of.online.materials.appropriate.</span></p></th><th class="cl-8590f950"><p class="cl-8590ea0a"><span class="cl-858f91a0">Was.the.teacher.appropriately.prepared.</span></p></th><th class="cl-8590f950"><p class="cl-8590ea0a"><span class="cl-858f91a0">Was.the.workload.of.the.course.appropriate.</span></p></th><th class="cl-8590f950"><p class="cl-8590ea0a"><span class="cl-858f91a0">Was.the.course.content.enganging.</span></p></th><th class="cl-8590f951"><p class="cl-8590ea0a"><span class="cl-858f91a0">Were.there.enough.interactive.exerceises.included.in.the.sessions.</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-8590f952"><p class="cl-8590ea00"><span class="cl-858f91aa">German</span></p></td><td class="cl-8590f953"><p class="cl-8590ea00"><span class="cl-858f91aa">G1</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">4</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">4</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">4</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">4</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">4</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">4</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">4</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">4</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">4</span></p></td><td class="cl-8590f95b"><p class="cl-8590ea0a"><span class="cl-858f91aa">4</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-8590f964"><p class="cl-8590ea00"><span class="cl-858f91aa">German</span></p></td><td class="cl-8590f965"><p class="cl-8590ea00"><span class="cl-858f91aa">G2</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">4</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">5</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">4</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">4</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">4</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">5</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">1</span></p></td><td class="cl-8590f96e"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-8590f952"><p class="cl-8590ea00"><span class="cl-858f91aa">German</span></p></td><td class="cl-8590f953"><p class="cl-8590ea00"><span class="cl-858f91aa">G3</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">5</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">4</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">2</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">4</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">4</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">4</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f95b"><p class="cl-8590ea0a"><span class="cl-858f91aa">1</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-8590f964"><p class="cl-8590ea00"><span class="cl-858f91aa">German</span></p></td><td class="cl-8590f965"><p class="cl-8590ea00"><span class="cl-858f91aa">G4</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f96e"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-8590f952"><p class="cl-8590ea00"><span class="cl-858f91aa">German</span></p></td><td class="cl-8590f953"><p class="cl-8590ea00"><span class="cl-858f91aa">G5</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">1</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">1</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">1</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">1</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">1</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">1</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">1</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">1</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">1</span></p></td><td class="cl-8590f95b"><p class="cl-8590ea0a"><span class="cl-858f91aa">1</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-8590f964"><p class="cl-8590ea00"><span class="cl-858f91aa">German</span></p></td><td class="cl-8590f965"><p class="cl-8590ea00"><span class="cl-858f91aa">G6</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">1</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">2</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f96e"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-8590f952"><p class="cl-8590ea00"><span class="cl-858f91aa">German</span></p></td><td class="cl-8590f953"><p class="cl-8590ea00"><span class="cl-858f91aa">G7</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">5</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">4</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">2</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">4</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">4</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">4</span></p></td><td class="cl-8590f95b"><p class="cl-8590ea0a"><span class="cl-858f91aa">5</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-8590f964"><p class="cl-8590ea00"><span class="cl-858f91aa">German</span></p></td><td class="cl-8590f965"><p class="cl-8590ea00"><span class="cl-858f91aa">G8</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">5</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">5</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">5</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">5</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">5</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">5</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">5</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">5</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">5</span></p></td><td class="cl-8590f96e"><p class="cl-8590ea0a"><span class="cl-858f91aa">5</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-8590f952"><p class="cl-8590ea00"><span class="cl-858f91aa">German</span></p></td><td class="cl-8590f953"><p class="cl-8590ea00"><span class="cl-858f91aa">G9</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">5</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">1</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">4</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">4</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">5</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">5</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f95b"><p class="cl-8590ea0a"><span class="cl-858f91aa">1</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-8590f964"><p class="cl-8590ea00"><span class="cl-858f91aa">German</span></p></td><td class="cl-8590f965"><p class="cl-8590ea00"><span class="cl-858f91aa">G10</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f96e"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-8590f952"><p class="cl-8590ea00"><span class="cl-858f91aa">German</span></p></td><td class="cl-8590f953"><p class="cl-8590ea00"><span class="cl-858f91aa">G11</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">4</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">2</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">4</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">1</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">4</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">4</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">4</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">5</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">1</span></p></td><td class="cl-8590f95b"><p class="cl-8590ea0a"><span class="cl-858f91aa">1</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-8590f964"><p class="cl-8590ea00"><span class="cl-858f91aa">German</span></p></td><td class="cl-8590f965"><p class="cl-8590ea00"><span class="cl-858f91aa">G12</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f96e"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-8590f952"><p class="cl-8590ea00"><span class="cl-858f91aa">German</span></p></td><td class="cl-8590f953"><p class="cl-8590ea00"><span class="cl-858f91aa">G13</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">5</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">5</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">5</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">5</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">5</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">5</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">5</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">5</span></p></td><td class="cl-8590f95a"><p class="cl-8590ea0a"><span class="cl-858f91aa">5</span></p></td><td class="cl-8590f95b"><p class="cl-8590ea0a"><span class="cl-858f91aa">5</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-8590f964"><p class="cl-8590ea00"><span class="cl-858f91aa">German</span></p></td><td class="cl-8590f965"><p class="cl-8590ea00"><span class="cl-858f91aa">G14</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">5</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">4</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">4</span></p></td><td class="cl-8590f966"><p class="cl-8590ea0a"><span class="cl-858f91aa">2</span></p></td><td class="cl-8590f96e"><p class="cl-8590ea0a"><span class="cl-858f91aa">4</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-8590f96f"><p class="cl-8590ea00"><span class="cl-858f91aa">German</span></p></td><td class="cl-8590f970"><p class="cl-8590ea00"><span class="cl-858f91aa">G15</span></p></td><td class="cl-8590f978"><p class="cl-8590ea0a"><span class="cl-858f91aa">4</span></p></td><td class="cl-8590f978"><p class="cl-8590ea0a"><span class="cl-858f91aa">2</span></p></td><td class="cl-8590f978"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f978"><p class="cl-8590ea0a"><span class="cl-858f91aa">1</span></p></td><td class="cl-8590f978"><p class="cl-8590ea0a"><span class="cl-858f91aa">4</span></p></td><td class="cl-8590f978"><p class="cl-8590ea0a"><span class="cl-858f91aa">4</span></p></td><td class="cl-8590f978"><p class="cl-8590ea0a"><span class="cl-858f91aa">4</span></p></td><td class="cl-8590f978"><p class="cl-8590ea0a"><span class="cl-858f91aa">3</span></p></td><td class="cl-8590f978"><p class="cl-8590ea0a"><span class="cl-858f91aa">2</span></p></td><td class="cl-8590f979"><p class="cl-8590ea0a"><span class="cl-858f91aa">2</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>As you can see, we need to clean and adapt the column names. To do this, we will</p>
<ul>
<li>add an identifier which shows which question we are dealing with (e.g.&nbsp;Q 1: question text)</li>
<li>remove the dots between words with spaces</li>
<li>add a question mark at the end of questions</li>
<li>remove superfluous white spaces</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># clean column names</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(sdat)[<span class="dv">3</span><span class="sc">:</span><span class="fu">ncol</span>(sdat)] <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"Q "</span>, <span class="fu">str_pad</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">2</span>, <span class="st">"left"</span>, <span class="st">"0"</span>), <span class="st">": "</span>, <span class="fu">colnames</span>(sdat)[<span class="dv">3</span><span class="sc">:</span><span class="fu">ncol</span>(sdat)]) <span class="sc">%&gt;%</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">."</span>, <span class="st">" "</span>) <span class="sc">%&gt;%</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_squish</span>() <span class="sc">%&gt;%</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(<span class="st">"$"</span>, <span class="st">"?"</span>)</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect column names</span></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(sdat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Group"                                                                   
 [2] "Respondent"                                                              
 [3] "Q 01: How did you like the course?"                                      
 [4] "Q 02: How did you like the teacher?"                                     
 [5] "Q 03: Was the content intersting?"                                       
 [6] "Q 04: Was the content adequate for the course?"                          
 [7] "Q 05: Were there enough discussions?"                                    
 [8] "Q 06: Was the use of online materials appropriate?"                      
 [9] "Q 07: Was the teacher appropriately prepared?"                           
[10] "Q 08: Was the workload of the course appropriate?"                       
[11] "Q 09: Was the course content enganging?"                                 
[12] "Q 10: Were there enough interactive exerceises included in the sessions?"</code></pre>
</div>
</div>
<p>Now, that we have nice column names, we will replace the numeric values (1 to 5) with labels ranging from <em>disagree</em> to <em>agree</em> and convert our data into a data frame.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>lbs <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"disagree"</span>, <span class="st">"somewhat disagree"</span>, <span class="st">"neither agree nor disagree"</span>, <span class="st">"somewhat agree"</span>, <span class="st">"agree"</span>)</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>survey <span class="ot">&lt;-</span> sdat <span class="sc">%&gt;%</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate_if</span>(is.character, factor) <span class="sc">%&gt;%</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate_if</span>(is.numeric, factor, <span class="at">levels =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">labels =</span> lbs) <span class="sc">%&gt;%</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>() <span class="sc">%&gt;%</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-85a963b4{table-layout:auto;width:95%;}.cl-85a533e8{font-family:'Helvetica';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-85a533f2{font-family:'Helvetica';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-85a73bf2{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-85a74a2a{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-85a74a34{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-85a74a35{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-85a74a36{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-85a74a37{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-85a74a3e{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-85a74a3f{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-85a74a48{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-85a74a49{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-85a74a4a{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-85a74a4b{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-85a74a4c{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-85a963b4"><thead><tr style="overflow-wrap:break-word;"><th class="cl-85a74a2a"><p class="cl-85a73bf2"><span class="cl-85a533e8">Group</span></p></th><th class="cl-85a74a34"><p class="cl-85a73bf2"><span class="cl-85a533e8">Respondent</span></p></th><th class="cl-85a74a34"><p class="cl-85a73bf2"><span class="cl-85a533e8">Q 01: How did you like the course?</span></p></th><th class="cl-85a74a34"><p class="cl-85a73bf2"><span class="cl-85a533e8">Q 02: How did you like the teacher?</span></p></th><th class="cl-85a74a34"><p class="cl-85a73bf2"><span class="cl-85a533e8">Q 03: Was the content intersting?</span></p></th><th class="cl-85a74a34"><p class="cl-85a73bf2"><span class="cl-85a533e8">Q 04: Was the content adequate for the course?</span></p></th><th class="cl-85a74a34"><p class="cl-85a73bf2"><span class="cl-85a533e8">Q 05: Were there enough discussions?</span></p></th><th class="cl-85a74a34"><p class="cl-85a73bf2"><span class="cl-85a533e8">Q 06: Was the use of online materials appropriate?</span></p></th><th class="cl-85a74a34"><p class="cl-85a73bf2"><span class="cl-85a533e8">Q 07: Was the teacher appropriately prepared?</span></p></th><th class="cl-85a74a34"><p class="cl-85a73bf2"><span class="cl-85a533e8">Q 08: Was the workload of the course appropriate?</span></p></th><th class="cl-85a74a34"><p class="cl-85a73bf2"><span class="cl-85a533e8">Q 09: Was the course content enganging?</span></p></th><th class="cl-85a74a35"><p class="cl-85a73bf2"><span class="cl-85a533e8">Q 10: Were there enough interactive exerceises included in the sessions?</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-85a74a36"><p class="cl-85a73bf2"><span class="cl-85a533f2">German</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">G1</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">somewhat agree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">somewhat agree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">somewhat agree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">somewhat agree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">somewhat agree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">somewhat agree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">somewhat agree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">somewhat agree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">somewhat agree</span></p></td><td class="cl-85a74a3e"><p class="cl-85a73bf2"><span class="cl-85a533f2">somewhat agree</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-85a74a3f"><p class="cl-85a73bf2"><span class="cl-85a533f2">German</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">G2</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">somewhat agree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">agree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">somewhat agree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">somewhat agree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">somewhat agree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">agree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">disagree</span></p></td><td class="cl-85a74a49"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-85a74a36"><p class="cl-85a73bf2"><span class="cl-85a533f2">German</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">G3</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">agree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">somewhat agree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">somewhat disagree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">somewhat agree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">somewhat agree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">somewhat agree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a3e"><p class="cl-85a73bf2"><span class="cl-85a533f2">disagree</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-85a74a3f"><p class="cl-85a73bf2"><span class="cl-85a533f2">German</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">G4</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a49"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-85a74a36"><p class="cl-85a73bf2"><span class="cl-85a533f2">German</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">G5</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">disagree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">disagree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">disagree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">disagree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">disagree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">disagree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">disagree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">disagree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">disagree</span></p></td><td class="cl-85a74a3e"><p class="cl-85a73bf2"><span class="cl-85a533f2">disagree</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-85a74a3f"><p class="cl-85a73bf2"><span class="cl-85a533f2">German</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">G6</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">disagree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">somewhat disagree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a49"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-85a74a36"><p class="cl-85a73bf2"><span class="cl-85a533f2">German</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">G7</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">agree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">somewhat agree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">somewhat disagree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">somewhat agree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">somewhat agree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">somewhat agree</span></p></td><td class="cl-85a74a3e"><p class="cl-85a73bf2"><span class="cl-85a533f2">agree</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-85a74a3f"><p class="cl-85a73bf2"><span class="cl-85a533f2">German</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">G8</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">agree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">agree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">agree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">agree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">agree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">agree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">agree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">agree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">agree</span></p></td><td class="cl-85a74a49"><p class="cl-85a73bf2"><span class="cl-85a533f2">agree</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-85a74a36"><p class="cl-85a73bf2"><span class="cl-85a533f2">German</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">G9</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">agree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">disagree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">somewhat agree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">somewhat agree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">agree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">agree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a3e"><p class="cl-85a73bf2"><span class="cl-85a533f2">disagree</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-85a74a3f"><p class="cl-85a73bf2"><span class="cl-85a533f2">German</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">G10</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a49"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-85a74a36"><p class="cl-85a73bf2"><span class="cl-85a533f2">German</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">G11</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">somewhat agree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">somewhat disagree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">somewhat agree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">disagree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">somewhat agree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">somewhat agree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">somewhat agree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">agree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">disagree</span></p></td><td class="cl-85a74a3e"><p class="cl-85a73bf2"><span class="cl-85a533f2">disagree</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-85a74a3f"><p class="cl-85a73bf2"><span class="cl-85a533f2">German</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">G12</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a49"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-85a74a36"><p class="cl-85a73bf2"><span class="cl-85a533f2">German</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">G13</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">agree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">agree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">agree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">agree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">agree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">agree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">agree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">agree</span></p></td><td class="cl-85a74a37"><p class="cl-85a73bf2"><span class="cl-85a533f2">agree</span></p></td><td class="cl-85a74a3e"><p class="cl-85a73bf2"><span class="cl-85a533f2">agree</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-85a74a3f"><p class="cl-85a73bf2"><span class="cl-85a533f2">German</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">G14</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">agree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">somewhat agree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">somewhat agree</span></p></td><td class="cl-85a74a48"><p class="cl-85a73bf2"><span class="cl-85a533f2">somewhat disagree</span></p></td><td class="cl-85a74a49"><p class="cl-85a73bf2"><span class="cl-85a533f2">somewhat agree</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-85a74a4a"><p class="cl-85a73bf2"><span class="cl-85a533f2">German</span></p></td><td class="cl-85a74a4b"><p class="cl-85a73bf2"><span class="cl-85a533f2">G15</span></p></td><td class="cl-85a74a4b"><p class="cl-85a73bf2"><span class="cl-85a533f2">somewhat agree</span></p></td><td class="cl-85a74a4b"><p class="cl-85a73bf2"><span class="cl-85a533f2">somewhat disagree</span></p></td><td class="cl-85a74a4b"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a4b"><p class="cl-85a73bf2"><span class="cl-85a533f2">disagree</span></p></td><td class="cl-85a74a4b"><p class="cl-85a73bf2"><span class="cl-85a533f2">somewhat agree</span></p></td><td class="cl-85a74a4b"><p class="cl-85a73bf2"><span class="cl-85a533f2">somewhat agree</span></p></td><td class="cl-85a74a4b"><p class="cl-85a73bf2"><span class="cl-85a533f2">somewhat agree</span></p></td><td class="cl-85a74a4b"><p class="cl-85a73bf2"><span class="cl-85a533f2">neither agree nor disagree</span></p></td><td class="cl-85a74a4b"><p class="cl-85a73bf2"><span class="cl-85a533f2">somewhat disagree</span></p></td><td class="cl-85a74a4c"><p class="cl-85a73bf2"><span class="cl-85a533f2">somewhat disagree</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>Now, we can use the <code>plot</code> and the <code>likert</code> function to visualize the survey data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load package</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(likert)</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="co"># generate plot</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">likert</span>(survey[, <span class="dv">3</span><span class="sc">:</span><span class="dv">12</span>]), <span class="at">ordered =</span> F, <span class="at">wrap =</span> <span class="dv">60</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dviz_files/figure-html/likert13-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>To save this plot, you can use the <code>save_plot</code> function from the <code>cowplot</code> package as shown below.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>survey_p1 <span class="ot">&lt;-</span> <span class="fu">plot</span>(<span class="fu">likert</span>(survey[, <span class="dv">3</span><span class="sc">:</span><span class="dv">12</span>]), <span class="at">ordered =</span> F, <span class="at">wrap =</span> <span class="dv">60</span>)</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="co"># save plot</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>cowplot<span class="sc">::</span><span class="fu">save_plot</span>(<span class="fu">here</span>(<span class="st">"images"</span>, <span class="st">"stu_p1.png"</span>), <span class="co"># where to save the plot</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>  survey_p1, <span class="co"># object to plot</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">base_asp =</span> <span class="fl">1.5</span>, <span class="co"># ratio of space fro questions vs space for plot</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">base_height =</span> <span class="dv">8</span></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>) <span class="co"># size! higher for smaller font size</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>An additional and very helpful feature is that the <code>likert</code> package enables grouping the data as shown below. The display columns 3 to 8 and use column 1 for grouping.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create plot</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">likert</span>(survey[, <span class="dv">3</span><span class="sc">:</span><span class="dv">8</span>], <span class="at">grouping =</span> survey[, <span class="dv">1</span>]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="dviz_files/figure-html/likert17-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="768"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="comparative-bar-plots-with-negative-values" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="comparative-bar-plots-with-negative-values">Comparative bar plots with negative values</h2>
<p>Another frequent task is to evaluate the divergence of values from a reference, for instance when dealing with language learners where native speakers serve as a reference or target. To illustrate how such data can be visualized, we load the scales package as we want to create a bar plot in which we show the divergence of learners from native speakers regarding certain features and how that divergence changes over time. Then, we create an example data set which mirrors the format we expect for the actual data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create a vector with values called Test1</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>Test1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">11.2</span>, <span class="fl">13.5</span>, <span class="dv">200</span>, <span class="dv">185</span>, <span class="fl">1.3</span>, <span class="fl">3.5</span>)</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="co"># create a vector with values called Test2</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>Test2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">12.2</span>, <span class="fl">14.7</span>, <span class="dv">210</span>, <span class="dv">175</span>, <span class="fl">1.9</span>, <span class="fl">3.0</span>)</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a><span class="co"># create a vector with values called Test3</span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>Test3 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">13.2</span>, <span class="fl">15.1</span>, <span class="dv">177</span>, <span class="dv">173</span>, <span class="fl">2.4</span>, <span class="fl">2.9</span>)</span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a><span class="co"># combine vectors in a data frame</span></span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>testdata <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(Test1, Test2, Test3)</span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a><span class="co"># add rownames</span></span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(testdata) <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Feature1_Student"</span>,</span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Feature1_Reference"</span>,</span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Feature2_Student"</span>,</span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Feature2_Reference"</span>,</span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Feature3_Student"</span>,</span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Feature3_Reference"</span></span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect data</span></span>
<span id="cb45-19"><a href="#cb45-19" aria-hidden="true" tabindex="-1"></a>testdata</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                   Test1 Test2 Test3
Feature1_Student    11.2  12.2  13.2
Feature1_Reference  13.5  14.7  15.1
Feature2_Student   200.0 210.0 177.0
Feature2_Reference 185.0 175.0 173.0
Feature3_Student     1.3   1.9   2.4
Feature3_Reference   3.5   3.0   2.9</code></pre>
</div>
</div>
<p>We can now determine how the learners deviate from the native speakers.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># determine divergence from reference</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="co"># row 1 (student) minus row 2 (reference)</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>FeatureA <span class="ot">&lt;-</span> <span class="fu">t</span>(testdata[<span class="dv">1</span>, ] <span class="sc">-</span> testdata[<span class="dv">2</span>, ])</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="co"># row 3 (student) minus row 4 (reference)</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>FeatureB <span class="ot">&lt;-</span> <span class="fu">t</span>(testdata[<span class="dv">3</span>, ] <span class="sc">-</span> testdata[<span class="dv">4</span>, ])</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a><span class="co"># row 5 (student) minus row 6 (reference)</span></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>FeatureC <span class="ot">&lt;-</span> <span class="fu">t</span>(testdata[<span class="dv">5</span>, ] <span class="sc">-</span> testdata[<span class="dv">6</span>, ])</span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a><span class="co"># create data frame</span></span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>plottable <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rep</span>(<span class="fu">rownames</span>(FeatureA), <span class="dv">3</span>),</span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(FeatureA, FeatureB, FeatureC),</span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(</span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rep</span>(<span class="st">"FeatureA"</span>, <span class="dv">3</span>),</span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rep</span>(<span class="st">"FeatureB"</span>, <span class="dv">3</span>),</span>
<span id="cb47-15"><a href="#cb47-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rep</span>(<span class="st">"FeatureC"</span>, <span class="dv">3</span>)</span>
<span id="cb47-16"><a href="#cb47-16" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb47-17"><a href="#cb47-17" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb47-18"><a href="#cb47-18" aria-hidden="true" tabindex="-1"></a><span class="co"># def. col. names</span></span>
<span id="cb47-19"><a href="#cb47-19" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(plottable) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Test"</span>, <span class="st">"Value"</span>, <span class="st">"Feature"</span>)</span>
<span id="cb47-20"><a href="#cb47-20" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect data</span></span>
<span id="cb47-21"><a href="#cb47-21" aria-hidden="true" tabindex="-1"></a>plottable</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Test Value  Feature
1 Test1  -2.3 FeatureA
2 Test2  -2.5 FeatureA
3 Test3  -1.9 FeatureA
4 Test1  15.0 FeatureB
5 Test2  35.0 FeatureB
6 Test3   4.0 FeatureB
7 Test1  -2.2 FeatureC
8 Test2  -1.1 FeatureC
9 Test3  -0.5 FeatureC</code></pre>
</div>
</div>
<p>Finally, we graphically display the divergence using a bar plot.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create plot</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>  plottable,</span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(Test, Value)</span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span> <span class="co"># def. x/y-axes</span></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># separate plots for each feature</span></span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="fu">vars</span>(Feature), <span class="at">scales =</span> <span class="st">"free_y"</span>) <span class="sc">+</span></span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># create bars</span></span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="fu">aes</span>(<span class="at">fill =</span> Test)) <span class="sc">+</span></span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># black and white theme</span></span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb49-12"><a href="#cb49-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># suppress legend</span></span>
<span id="cb49-13"><a href="#cb49-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb49-14"><a href="#cb49-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># def. colours</span></span>
<span id="cb49-15"><a href="#cb49-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="fu">rep</span>(clrs[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>], <span class="dv">3</span>)) <span class="sc">+</span></span>
<span id="cb49-16"><a href="#cb49-16" aria-hidden="true" tabindex="-1"></a>  <span class="co"># axes titles</span></span>
<span id="cb49-17"><a href="#cb49-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> <span class="st">"Score"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dviz_files/figure-html/bar23-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="ridge-plots" class="level1 unnumbered">
<h1 class="unnumbered">Ridge Plots</h1>
<p>A very nice option to display frequency information about levels of a categorical variable are ridge plots. To generate ridge plots, we can use the <code>ggridges</code> package written by <a href="https://github.com/clauswilke">Claus Wilke</a>.</p>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load package</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggridges)</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="co"># create ridge plot</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>pdat <span class="sc">%&gt;%</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Prepositions, <span class="at">y =</span> GenreRedux, <span class="at">fill =</span> GenreRedux)) <span class="sc">+</span></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density_ridges</span>() <span class="sc">+</span></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_ridges</span>() <span class="sc">+</span></span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">""</span>, <span class="at">x =</span> <span class="st">"Density of the relative frequency of prepostions"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><img src="dviz_files/figure-html/rid_01-1.png" class="img-fluid" width="672"></p>
<p>You can easily replace the density displays by histograms which only requires to define the <code>stat</code> argument and the bin width.</p>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create ridge plot</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>pdat <span class="sc">%&gt;%</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Prepositions, <span class="at">y =</span> GenreRedux, <span class="at">fill =</span> GenreRedux)) <span class="sc">+</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density_ridges</span>(<span class="at">alpha =</span> <span class="fl">0.6</span>, <span class="at">stat =</span> <span class="st">"binline"</span>, <span class="at">bins =</span> <span class="dv">20</span>) <span class="sc">+</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_ridges</span>() <span class="sc">+</span></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">""</span>, <span class="at">x =</span> <span class="st">"Histograms of the relative frequency of prepostions"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><img src="dviz_files/figure-html/rid_02-1.png" class="img-fluid" width="672"></p>
</section>
<section id="boxplots" class="level1 unnumbered">
<h1 class="unnumbered">Boxplots</h1>
<p>So far, we have plotted values but we have not plotted the underlying distributions. For instance, we have plotted mean values but not the variance within the distribution. One handy way to combine plotting general trends and their underlying distributions are boxplots.</p>
<p>Boxplots, or Box-and-Whisker Plots, are exploratory graphics first created by John W. Tukey and they show the relationships between categorical and numeric variables. They are very useful because they not only provide measures of central tendency (the median which is the line in the middle of the box) but they also offer information about the distribution of the data. To elaborate, fifty percent of data points fall within the box while seventy-five percent of data points fall within the whiskers (the lines which look like extended error bars): the box thus encompasses the interquartile range between the first and third quartile. The whiskers show the minimum and maximum values in the data and only outliers (data points that lie 1.5 times the interquartile range or more above the third quartile or 1.5 times the interquartile range or more below the first quartile. If the whiskers differ in length, then this means that the data is asymmetrically distributed.</p>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create boxplot</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(pdat, <span class="fu">aes</span>(DateRedux, Prepositions, <span class="at">color =</span> GenreRedux)) <span class="sc">+</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> clrs,</span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"black"</span></span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><img src="dviz_files/figure-html/box1-1.png" class="img-fluid" width="672"></p>
<p>Another interesting feature of boxplots is that they allow us to visually get an idea whether categories differ significantly. Because if add “notch = T” and the notches of the boxplots do not overlap, then this is a very strong indication that the categories actually differ significantly (see below).</p>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create boxplot</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(pdat, <span class="fu">aes</span>(DateRedux, Prepositions, <span class="at">color =</span> GenreRedux)) <span class="sc">+</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(</span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">outlier.colour =</span> <span class="st">"red"</span>,</span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">outlier.shape =</span> <span class="dv">2</span>,</span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">outlier.size =</span> <span class="dv">5</span>,</span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">notch =</span> T,</span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> clrs,</span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"black"</span></span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><img src="dviz_files/figure-html/box3-1.png" class="img-fluid" width="672"></p>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(EnvStats)</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="co"># create boxplot</span></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(pdat, <span class="fu">aes</span>(DateRedux, Prepositions, <span class="at">fill =</span> DateRedux, <span class="at">color =</span> DateRedux)) <span class="sc">+</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">varwidth =</span> T, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">alpha =</span> .<span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">alpha =</span> .<span class="dv">2</span>, <span class="at">height =</span> <span class="dv">0</span>, <span class="at">width =</span> .<span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="sc">~</span>Region) <span class="sc">+</span></span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>  EnvStats<span class="sc">::</span><span class="fu">stat_n_text</span>(<span class="at">y.pos =</span> <span class="dv">65</span>) <span class="sc">+</span></span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> <span class="st">"Frequency (per 1,000 words)"</span>) <span class="sc">+</span></span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Use of prepositions in English texts across time and regions"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><img src="dviz_files/figure-html/box4-1.png" class="img-fluid" width="672"></p>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggstatsplot)</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="co"># create boxplot</span></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>ggstatsplot<span class="sc">::</span><span class="fu">ggbetweenstats</span>(</span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> pdat,</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> DateRedux,</span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> Prepositions,</span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">plottype =</span> <span class="st">"box"</span>,</span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">type =</span> <span class="st">"p"</span>,</span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">conf.level =</span> <span class="fl">0.95</span></span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><img src="dviz_files/figure-html/box5-1.png" class="img-fluid" width="672"></p>
</section>
<section id="violin-plots" class="level1 unnumbered">
<h1 class="unnumbered">Violin plots</h1>
<p>An alternative to boxplots which display the distribution within the data even more accurately are violin plots.</p>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(pdat, <span class="fu">aes</span>(DateRedux, Prepositions, <span class="at">fill =</span> DateRedux)) <span class="sc">+</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="at">trim =</span> <span class="cn">FALSE</span>, <span class="at">alpha =</span> .<span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> clrs) <span class="sc">+</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><img src="dviz_files/figure-html/vio1-1.png" class="img-fluid" width="672"></p>
</section>
<section id="word-clouds" class="level1 unnumbered">
<h1 class="unnumbered">Word clouds</h1>
<p>Word clouds visualize word frequencies of either single corpus or different corpora. Although word clouds are rarely used in academic publications, they are a common way to display language data and the topics of texts - which may be thought of as their semantic content. To exemplify how to use word clouds, we are going to have a look at rally speeches of Hillary Clinton and Donald Trump that were given during their 2016 campaigns. In a first step, we load and process the data as the relevant packages are already loaded.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load and process speeches by clinton</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>clinton <span class="ot">&lt;-</span> base<span class="sc">::</span><span class="fu">readRDS</span>(<span class="fu">url</span>(<span class="st">"https://slcladal.github.io/data/Clinton.rda"</span>, <span class="st">"rb"</span>)) <span class="sc">%&gt;%</span> <span class="fu">paste0</span>(<span class="at">collapse =</span> <span class="st">" "</span>)</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a><span class="co"># load and process speeches by trump</span></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>trump <span class="ot">&lt;-</span> base<span class="sc">::</span><span class="fu">readRDS</span>(<span class="fu">url</span>(<span class="st">"https://slcladal.github.io/data/Trump.rda"</span>, <span class="st">"rb"</span>)) <span class="sc">%&gt;%</span> <span class="fu">paste0</span>(<span class="at">collapse =</span> <span class="st">" "</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>After loading the data, we need to clean it.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>corp_dom <span class="ot">&lt;-</span> quanteda<span class="sc">::</span><span class="fu">corpus</span>(<span class="fu">c</span>(clinton, trump))</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(corp_dom, <span class="st">"docvars"</span>)<span class="sc">$</span>Author <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Clinton"</span>, <span class="st">"Trump"</span>)</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>corp_dom <span class="ot">&lt;-</span> corp_dom <span class="sc">%&gt;%</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>  quanteda<span class="sc">::</span><span class="fu">tokens</span>(<span class="at">remove_punct =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>  quanteda<span class="sc">::</span><span class="fu">tokens_remove</span>(<span class="fu">stopwords</span>(<span class="st">"english"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>  quanteda<span class="sc">::</span><span class="fu">dfm</span>() <span class="sc">%&gt;%</span></span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a>  quanteda<span class="sc">::</span><span class="fu">dfm_group</span>(<span class="at">groups =</span> corp_dom<span class="sc">$</span>Author) <span class="sc">%&gt;%</span></span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a>  quanteda<span class="sc">::</span><span class="fu">dfm_trim</span>(<span class="at">min_termfreq =</span> <span class="dv">200</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>After processing the data, we can now create word clouds. However, there are different word clouds and here, we will focus on 2 types of word clouds:</p>
<ul>
<li>(Common) word clouds</li>
<li>Comparative clouds</li>
</ul>
<p>Common or simple word clouds simply show the frequency of word types while comparative word clouds show which word types are particularly overrepresented in one sub-corpus compared to another sub-corpus.</p>
<p>Let us first inspect a common word cloud of the corpus.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create word cloud</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>corp_dom <span class="sc">%&gt;%</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>  quanteda.textplots<span class="sc">::</span><span class="fu">textplot_wordcloud</span>(<span class="at">comparison =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dviz_files/figure-html/wc5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The common word cloud shows the frequencies of words regardless of who used them. In contrast, the comparative cloud shown below highlights words that differ most with respect to their frequencies in the sub-corpora under investigation.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create comparison cloud</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>corp_dom <span class="sc">%&gt;%</span></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>  quanteda.textplots<span class="sc">::</span><span class="fu">textplot_wordcloud</span>(<span class="at">comparison =</span> <span class="cn">TRUE</span>, <span class="at">color =</span> <span class="fu">c</span>(<span class="st">"blue"</span>, <span class="st">"red"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dviz_files/figure-html/wc6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>At first, I thought that word clouds are simply a fancy but not very helpful way to inspect language data but I have to admit that word clouds really surprised me as they do appear to possess potential to provide an idea of what groups of people are talking about. The comparative word cloud shows that the Trump uses a lot of contractions (<em>’re</em>, <em>’ll</em>, etc.) and stresses concepts linked to the future (<em>going</em>) thereby stressing his vision of the US (<em>great</em>). In Contrast, Clinton did not use contractions but talked about <em>Americans</em>, <em>work</em>, the <em>economy</em>, and <em>women</em>.</p>
</section>
<section id="association-plots" class="level1 unnumbered">
<h1 class="unnumbered">Association plots</h1>
<p>Another plot type that is related to bar plots is the association plot. Association plots are similar to bar plots in that they display difference as bars above or below a line (as shown above). However, association plots show the difference between the observed and expected frequencies rather than differences as deviations from a reference. Therefore, they are often used when graphically representing tables with absolute frequencies. We use the already loaded <em>vcd</em> package to create association plots.</p>
<p>We also modify the reduced pdat as association plots work on matrices rather than data frames or tibbles. In addition, we will drop more genres as to avoid overlap in the y-axis labels later on.</p>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># reduce data</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>assocdata <span class="ot">&lt;-</span> pdat <span class="sc">%&gt;%</span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">droplevels</span>() <span class="sc">%&gt;%</span></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(GenreRedux <span class="ot">&lt;-</span> <span class="fu">as.character</span>(GenreRedux),</span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">GenreRedux =</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>      GenreRedux <span class="sc">==</span> <span class="st">"Conversational"</span> <span class="sc">~</span> <span class="st">"Conv."</span>,</span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>      GenreRedux <span class="sc">==</span> <span class="st">"Religious"</span> <span class="sc">~</span> <span class="st">"Relig."</span>,</span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> GenreRedux</span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb61-11"><a href="#cb61-11" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(GenreRedux, DateRedux) <span class="sc">%&gt;%</span></span>
<span id="cb61-12"><a href="#cb61-12" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">Prepositions =</span> <span class="fu">round</span>(<span class="fu">mean</span>(Prepositions), <span class="dv">0</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb61-13"><a href="#cb61-13" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">spread</span>(DateRedux, Prepositions)</span>
<span id="cb61-14"><a href="#cb61-14" aria-hidden="true" tabindex="-1"></a><span class="co"># create matrix</span></span>
<span id="cb61-15"><a href="#cb61-15" aria-hidden="true" tabindex="-1"></a>assocmx <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(assocdata[, <span class="dv">2</span><span class="sc">:</span><span class="dv">6</span>])</span>
<span id="cb61-16"><a href="#cb61-16" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(assocmx, <span class="st">"dimnames"</span>)[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">as.vector</span>(assocdata[, <span class="dv">1</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Let’s briefly inspect the data set.</p>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-88d2c1ca{table-layout:auto;width:95%;}.cl-88cff936{font-family:'Helvetica';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-88cff937{font-family:'Helvetica';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-88d116e0{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-88d12342{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-88d12343{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-88d1234c{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-88d1234d{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-88d12356{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-88d12357{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-88d12360{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-88d12361{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-88d1236a{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-88d1236b{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-88d12374{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-88d12375{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-88d2c1ca"><thead><tr style="overflow-wrap:break-word;"><th class="cl-88d12342"><p class="cl-88d116e0"><span class="cl-88cff936">1150-1499</span></p></th><th class="cl-88d12343"><p class="cl-88d116e0"><span class="cl-88cff936">1500-1599</span></p></th><th class="cl-88d12343"><p class="cl-88d116e0"><span class="cl-88cff936">1600-1699</span></p></th><th class="cl-88d12343"><p class="cl-88d116e0"><span class="cl-88cff936">1700-1799</span></p></th><th class="cl-88d1234c"><p class="cl-88d116e0"><span class="cl-88cff936">1800-1913</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-88d1234d"><p class="cl-88d116e0"><span class="cl-88cff937"></span></p></td><td class="cl-88d12356"><p class="cl-88d116e0"><span class="cl-88cff937">133</span></p></td><td class="cl-88d12356"><p class="cl-88d116e0"><span class="cl-88cff937">124</span></p></td><td class="cl-88d12356"><p class="cl-88d116e0"><span class="cl-88cff937">132</span></p></td><td class="cl-88d12357"><p class="cl-88d116e0"><span class="cl-88cff937">128</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-88d12360"><p class="cl-88d116e0"><span class="cl-88cff937">93</span></p></td><td class="cl-88d12361"><p class="cl-88d116e0"><span class="cl-88cff937">113</span></p></td><td class="cl-88d12361"><p class="cl-88d116e0"><span class="cl-88cff937">112</span></p></td><td class="cl-88d12361"><p class="cl-88d116e0"><span class="cl-88cff937">128</span></p></td><td class="cl-88d1236a"><p class="cl-88d116e0"><span class="cl-88cff937">134</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-88d1234d"><p class="cl-88d116e0"><span class="cl-88cff937"></span></p></td><td class="cl-88d12356"><p class="cl-88d116e0"><span class="cl-88cff937">149</span></p></td><td class="cl-88d12356"><p class="cl-88d116e0"><span class="cl-88cff937">129</span></p></td><td class="cl-88d12356"><p class="cl-88d116e0"><span class="cl-88cff937">150</span></p></td><td class="cl-88d12357"><p class="cl-88d116e0"><span class="cl-88cff937">164</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-88d12360"><p class="cl-88d116e0"><span class="cl-88cff937">131</span></p></td><td class="cl-88d12361"><p class="cl-88d116e0"><span class="cl-88cff937">135</span></p></td><td class="cl-88d12361"><p class="cl-88d116e0"><span class="cl-88cff937">137</span></p></td><td class="cl-88d12361"><p class="cl-88d116e0"><span class="cl-88cff937">146</span></p></td><td class="cl-88d1236a"><p class="cl-88d116e0"><span class="cl-88cff937">146</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-88d1236b"><p class="cl-88d116e0"><span class="cl-88cff937">135</span></p></td><td class="cl-88d12374"><p class="cl-88d116e0"><span class="cl-88cff937">121</span></p></td><td class="cl-88d12374"><p class="cl-88d116e0"><span class="cl-88cff937">132</span></p></td><td class="cl-88d12374"><p class="cl-88d116e0"><span class="cl-88cff937">140</span></p></td><td class="cl-88d12375"><p class="cl-88d116e0"><span class="cl-88cff937">138</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>Association plots are created by using the <code>assoc</code> function which takes a table (or a similar format such as a matrix or a data frame) as their argument. In addition, we specify <code>shade</code> as <code>T</code> in order to color code the bars in the association plot and to add a legend.</p>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create association plot</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="fu">assoc</span>(assocmx, <span class="at">shade =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><img src="dviz_files/figure-html/ass3-1.png" class="img-fluid" width="672"></p>
<p>The bars above the line indicate that the observed frequency is higher than expected, bars under the line indicate frequencies that are lower than expected. Darker shades of blue and red coloring suggest that there are significant differences between the observed and the expected frequencies. In the present example, this means that the frequencies of prepositions differ significantly across genres and periods. <em>However(!) as shown in the table above, this result is an artifact because the first period does not contain any data points for conversational or legal texts!</em></p>
</section>
<section id="mosaic-plots" class="level1 unnumbered">
<h1 class="unnumbered">Mosaic plots</h1>
<p>Another plot which is useful to graphically depict the relationship of categorical variables is the mosaic plot. The size of the boxes in a mosaic plot indicate how frequent that subcategory is and the colors show whether or not the category differs from the value that is expected if given the overall distribution in the table. In addition, the hue of the color shows how great the difference between observed and expected is and thus indicates whether the respective subcategory deviates significantly from the expected frequency. Boxes that are gray suggest the absence of significant differences.</p>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create a mosaic plot</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mosaic</span>(assocmx, <span class="at">shade =</span> T, <span class="at">legend =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><img src="dviz_files/figure-html/mos1-1.png" class="img-fluid" width="672"></p>
<p>According to the mosaic plot above, there are some potentially significant differences in the first and second period. This, however, is still likely to be caused by the absence of data points from conversational or legal texts in the first period. Also, the absence of boxes for these text types in the first period indicate that there is a potential problem - something that was not visible in the mosaic plot!</p>
</section>
<section id="heat-maps" class="level1 unnumbered">
<h1 class="unnumbered">Heat maps</h1>
<p>Heat maps are similar to mosaic plots in that they display frequency information and use color-coding to indicate high and low values. Heat maps also work on matrices but they are much more powerful and versatile that mosaic plots.</p>
<p>Heat maps are a very popular way to display frequency information and various packages have been written to create or customize heatmaps (for example the packages “ComplexHeatmap”, “dendextend”, “d3heatmap”, “pheatmap”) which means that many aspects of heatmaps can be modified. In this example, we will only use the most basic function to create a heat map.</p>
<p>We again modify the data and create a matrix from the original pdat. In addition, we scale the frequencies. This is not necessary in the present case but when dealing with variables which differ in their mean and variance because they reflect different variables, scaling will normalize such variables and render their values comparable.</p>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create data</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>heatdata <span class="ot">&lt;-</span> pdat <span class="sc">%&gt;%</span></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(DateRedux, GenreRedux) <span class="sc">%&gt;%</span></span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">Prepositions =</span> <span class="fu">mean</span>(Prepositions)) <span class="sc">%&gt;%</span></span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">spread</span>(DateRedux, Prepositions)</span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a><span class="co"># create matrix</span></span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a>heatmx <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(heatdata[, <span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>])</span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(heatmx, <span class="st">"dimnames"</span>)[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">as.vector</span>(heatdata[, <span class="dv">1</span>])</span>
<span id="cb64-9"><a href="#cb64-9" aria-hidden="true" tabindex="-1"></a>heatmx <span class="ot">&lt;-</span> <span class="fu">scale</span>(heatmx) <span class="sc">%&gt;%</span></span>
<span id="cb64-10"><a href="#cb64-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">round</span>(., <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Let’s briefly inspect the data set.</p>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-88f72c0e{table-layout:auto;width:95%;}.cl-88f33c84{font-family:'Helvetica';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-88f33c85{font-family:'Helvetica';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-88f4705e{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-88f47d6a{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-88f47d74{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-88f47d75{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-88f47d76{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-88f47d77{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-88f47d7e{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-88f47d7f{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-88f47d80{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-88f47d81{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-88f47d88{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-88f47d89{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-88f47d8a{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-88f72c0e"><thead><tr style="overflow-wrap:break-word;"><th class="cl-88f47d6a"><p class="cl-88f4705e"><span class="cl-88f33c84">1150-1499</span></p></th><th class="cl-88f47d74"><p class="cl-88f4705e"><span class="cl-88f33c84">1500-1599</span></p></th><th class="cl-88f47d74"><p class="cl-88f4705e"><span class="cl-88f33c84">1600-1699</span></p></th><th class="cl-88f47d75"><p class="cl-88f4705e"><span class="cl-88f33c84">1700-1799</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-88f47d76"><p class="cl-88f4705e"><span class="cl-88f33c85"></span></p></td><td class="cl-88f47d77"><p class="cl-88f4705e"><span class="cl-88f33c85">0.23</span></p></td><td class="cl-88f47d77"><p class="cl-88f4705e"><span class="cl-88f33c85">-0.33</span></p></td><td class="cl-88f47d7e"><p class="cl-88f4705e"><span class="cl-88f33c85">-0.74</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-88f47d7f"><p class="cl-88f4705e"><span class="cl-88f33c85">-1.15</span></p></td><td class="cl-88f47d80"><p class="cl-88f4705e"><span class="cl-88f33c85">-1.26</span></p></td><td class="cl-88f47d80"><p class="cl-88f4705e"><span class="cl-88f33c85">-1.54</span></p></td><td class="cl-88f47d81"><p class="cl-88f4705e"><span class="cl-88f33c85">-1.24</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-88f47d76"><p class="cl-88f4705e"><span class="cl-88f33c85"></span></p></td><td class="cl-88f47d77"><p class="cl-88f4705e"><span class="cl-88f33c85">1.34</span></p></td><td class="cl-88f47d77"><p class="cl-88f4705e"><span class="cl-88f33c85">0.26</span></p></td><td class="cl-88f47d7e"><p class="cl-88f4705e"><span class="cl-88f33c85">1.17</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-88f47d7f"><p class="cl-88f4705e"><span class="cl-88f33c85">0.47</span></p></td><td class="cl-88f47d80"><p class="cl-88f4705e"><span class="cl-88f33c85">0.34</span></p></td><td class="cl-88f47d80"><p class="cl-88f4705e"><span class="cl-88f33c85">1.08</span></p></td><td class="cl-88f47d81"><p class="cl-88f4705e"><span class="cl-88f33c85">0.73</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-88f47d88"><p class="cl-88f4705e"><span class="cl-88f33c85">0.67</span></p></td><td class="cl-88f47d89"><p class="cl-88f4705e"><span class="cl-88f33c85">-0.65</span></p></td><td class="cl-88f47d89"><p class="cl-88f4705e"><span class="cl-88f33c85">0.52</span></p></td><td class="cl-88f47d8a"><p class="cl-88f4705e"><span class="cl-88f33c85">0.08</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>Now that we have created a data matrix, we can create a simple heat map.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create heat map</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="fu">heatmap</span>(heatmx, <span class="at">scale =</span> <span class="st">"none"</span>, <span class="at">cexCol =</span> <span class="dv">1</span>, <span class="at">cexRow =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dviz_files/figure-html/heat_05-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The dendrogram on the top shows that documents from 1600 and 1700 as well as documents from 1800 and 1900 are grouped together and thus are more similar with respect to their preposition frequencies. The dendrogram on the left indicates that we have two categories of documents: the genres to towards the bottom tend to have fewer prepositions (indicated by the light colours) while the documents to the top tend to have more prepositions (thus the darker hues). Legal texts (genre = Law) have notably higher rates of prepositions as is derivable from the dark red colour of such texts.</p>
</section>
<section id="citation-session-info" class="level1 unnumbered">
<h1 class="unnumbered">Citation &amp; Session Info</h1>
<p>Schweinberger, Martin. 2022. <em>Data Visualization with R</em>. Brisbane: The University of Queensland. url: https://ladal.edu.au/dviz.html (Version 2022.10.31).</p>
<pre><code>@manual{schweinberger2022dviz,
  author = {Schweinberger, Martin},
  title = {Data Visualization with R},
  note = {https://ladal.edu.au/dviz.html},
  year = {2022},
  organization = {The University of Queensland, School of Languages and Cultures},
  address = {Brisbane},
  edition = {2022.10.31}
}</code></pre>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sessionInfo</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>R version 4.4.1 (2024-06-14)
Platform: aarch64-apple-darwin20
Running under: macOS Sonoma 14.6.1

Matrix products: default
BLAS:   /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/lib/libRblas.0.dylib 
LAPACK: /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.12.0

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

time zone: Australia/Brisbane
tzcode source: internal

attached base packages:
[1] grid      stats     graphics  grDevices utils     datasets  methods  
[8] base     

other attached packages:
 [1] ggstatsplot_0.12.5 EnvStats_3.0.0     gridExtra_2.3      vip_0.4.1         
 [5] PMCMRplus_1.9.12   rstantools_2.4.0   hexbin_1.28.4      flextable_0.9.7   
 [9] tidyr_1.3.1        ggridges_0.5.6     tm_0.7-14          NLP_0.3-0         
[13] vcd_1.4-13         likert_1.3.5       xtable_1.8-4       ggplot2_3.5.1     
[17] stringr_1.5.1      dplyr_1.1.4       

loaded via a namespace (and not attached):
  [1] rstudioapi_0.17.1       jsonlite_1.8.9          datawizard_0.13.0      
  [4] correlation_0.8.6       magrittr_2.0.3          TH.data_1.1-2          
  [7] estimability_1.5.1      SuppDists_1.1-9.8       farver_2.1.2           
 [10] rmarkdown_2.28          ragg_1.3.3              vctrs_0.6.5            
 [13] memoise_2.0.1           paletteer_1.6.0         askpass_1.2.1          
 [16] base64enc_0.1-3         effectsize_0.8.9        htmltools_0.5.8.1      
 [19] quanteda.textplots_0.95 BWStest_0.2.3           Formula_1.2-5          
 [22] htmlwidgets_1.6.4       plyr_1.8.9              sandwich_3.1-1         
 [25] emmeans_1.10.5          zoo_1.8-12              cachem_1.1.0           
 [28] uuid_1.2-1              lifecycle_1.0.4         iterators_1.0.14       
 [31] pkgconfig_2.0.3         Matrix_1.7-1            R6_2.5.1               
 [34] fastmap_1.2.0           BayesFactor_0.9.12-4.7  digest_0.6.37          
 [37] colorspace_2.1-1        rematch2_2.1.2          patchwork_1.3.0        
 [40] prismatic_1.1.2         textshaping_0.4.0       Hmisc_5.2-0            
 [43] labeling_0.4.3          fansi_1.0.6             mgcv_1.9-1             
 [46] compiler_4.4.1          fontquiver_0.2.1        withr_3.0.2            
 [49] htmlTable_2.4.3         backports_1.5.0         psych_2.4.6.26         
 [52] performance_0.12.4      ggsignif_0.6.4          MASS_7.3-61            
 [55] openssl_2.2.2           tools_4.4.1             foreign_0.8-87         
 [58] lmtest_0.9-40           stopwords_2.3           zip_2.3.1              
 [61] statsExpressions_1.6.1  nnet_7.3-19             glue_1.8.0             
 [64] nlme_3.1-166            checkmate_2.3.2         cluster_2.1.6          
 [67] reshape2_1.4.4          generics_0.1.3          isoband_0.2.7          
 [70] gtable_0.3.6            data.table_1.16.2       xml2_1.3.6             
 [73] utf8_1.2.4              ggrepel_0.9.6           foreach_1.5.2          
 [76] pillar_1.9.0            splines_4.4.1           lattice_0.22-6         
 [79] klippy_0.0.0.9500       survival_3.7-0          gmp_0.7-5              
 [82] tidyselect_1.2.1        fontLiberation_0.1.0    pbapply_1.7-2          
 [85] knitr_1.48              fontBitstreamVera_0.1.1 xfun_0.49              
 [88] stringi_1.8.4           evaluate_1.0.1          codetools_0.2-20       
 [91] kSamples_1.2-10         officer_0.6.7           gdtools_0.4.0          
 [94] tibble_3.2.1            multcompView_0.1-10     cli_3.6.3              
 [97] RcppParallel_5.1.9      rpart_4.1.23            parameters_0.23.0      
[100] systemfonts_1.1.0       munsell_0.5.1           Rcpp_1.0.13            
[103] zeallot_0.1.0           coda_0.19-4.1           parallel_4.4.1         
[106] MatrixModels_0.5-3      assertthat_0.2.1        bayestestR_0.15.0      
[109] quanteda_4.1.0          Rmpfr_0.9-5             viridisLite_0.4.2      
[112] mvtnorm_1.3-1           slam_0.1-54             scales_1.3.0           
[115] insight_0.20.5          purrr_1.0.2             rlang_1.1.4            
[118] fastmatch_1.1-4         multcomp_1.4-26         mnormt_2.1.1           </code></pre>
</div>
</div>
<hr>
<p><a href="#introduction">Back to top</a></p>
<p><a href="https://ladal.edu.au">Back to HOME</a></p>
<hr>
</section>
<section id="references" class="level1 unnumbered">




</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-healy2018data" class="csl-entry" role="listitem">
Healy, Kieran. <em>Data Visualization: A Practical Introduction</em>. Princeton University Press.
</div>
<div id="ref-wickham2016ggplot2" class="csl-entry" role="listitem">
Wickham, Hadley. <em>Ggplot2: Elegant Graphics for Data Analysis</em>. springer.
</div>
</div></section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>If you want to render the R Notebook on your machine, i.e.&nbsp;knitting the document to html or a pdf, you need to make sure that you have R and RStudio installed and you also need to download the <a href="https://slcladal.github.io/content/bibliography.bib"><strong>bibliography file</strong></a> and store it in the same folder where you store the Rmd file.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




<script src="../../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>