<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Martin Schweinberger">

<title>Practical Overview of Selected Text Analytics Methods – Language Technology and Data Analysis Laboratory (LADAL)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>
<script>
    // Wait for the document to be fully loaded
    document.addEventListener("DOMContentLoaded", function () {
        // Create a new div element to hold the dynamic content
        var newContainer = document.createElement("div");
        newContainer.classList.add("custom-banner");  // You can assign a class to the new container for styling

        // You can also add content inside the new container
        newContainer.innerHTML = `
          <div class="banner">
              <img src="/images/ladal_icon_white.png" alt="Icon" class="banner-icon">
              <span class="banner-text">Language Technology and Data Analysis Laboratory</span>
          </div>
      `

        // Select the header element
        var header = document.getElementById("quarto-header");

        // Select the nav element inside the header to place the new container just above it
        var navbar = header.querySelector("nav");

        // Insert the new container before the navbar element
        header.insertBefore(newContainer, navbar);
    });
</script>
<script src="../../site_libs/clipboard-1.7.1/clipboard.min.js"></script>
<link href="../../site_libs/primer-tooltips-1.4.0/build.css" rel="stylesheet">
<link href="../../site_libs/klippy-0.0.0.9500/css/klippy.min.css" rel="stylesheet">
<script src="../../site_libs/klippy-0.0.0.9500/js/klippy.min.js"></script>
<link href="../../site_libs/tabwid-1.1.3/tabwid.css" rel="stylesheet">
<script src="../../site_libs/tabwid-1.1.3/tabwid.js"></script>


<link rel="stylesheet" href="../../css/styles.css">
</head>

<body class="floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Language Technology and Data Analysis Laboratory (LADAL)</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">HOME</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">ABOUT</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../events.html"> 
<span class="menu-text">EVENTS</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../tutorials.html"> 
<span class="menu-text">TUTORIALS</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../tools.html"> 
<span class="menu-text">TOOLS</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../resources.html"> 
<span class="menu-text">RESOURCES</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../contact.html"> 
<span class="menu-text">CONTACT</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul class="collapse">
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#concordancing" id="toc-concordancing" class="nav-link" data-scroll-target="#concordancing">Concordancing</a></li>
  <li><a href="#word-frequency" id="toc-word-frequency" class="nav-link" data-scroll-target="#word-frequency">Word Frequency</a>
  <ul class="collapse">
  <li><a href="#wordclouds" id="toc-wordclouds" class="nav-link" data-scroll-target="#wordclouds">Wordclouds</a></li>
  <li><a href="#frequency-changes" id="toc-frequency-changes" class="nav-link" data-scroll-target="#frequency-changes">Frequency changes</a></li>
  <li><a href="#dispersion-plots" id="toc-dispersion-plots" class="nav-link" data-scroll-target="#dispersion-plots">Dispersion plots</a></li>
  <li><a href="#over--and-underuse" id="toc-over--and-underuse" class="nav-link" data-scroll-target="#over--and-underuse">Over- and underuse</a></li>
  </ul></li>
  <li><a href="#collocations" id="toc-collocations" class="nav-link" data-scroll-target="#collocations">Collocations</a></li>
  <li><a href="#keywords" id="toc-keywords" class="nav-link" data-scroll-target="#keywords">Keywords</a></li>
  <li><a href="#text-classification" id="toc-text-classification" class="nav-link" data-scroll-target="#text-classification">Text Classification</a></li>
  <li><a href="#part-of-speech-tagging" id="toc-part-of-speech-tagging" class="nav-link" data-scroll-target="#part-of-speech-tagging">Part-of-Speech tagging</a></li>
  <li><a href="#names-entity-recognition" id="toc-names-entity-recognition" class="nav-link" data-scroll-target="#names-entity-recognition">Names Entity Recognition</a></li>
  <li><a href="#dependency-parsing-using-udpipe" id="toc-dependency-parsing-using-udpipe" class="nav-link" data-scroll-target="#dependency-parsing-using-udpipe">Dependency Parsing Using UDPipe</a></li>
  <li><a href="#citation-session-info" id="toc-citation-session-info" class="nav-link" data-scroll-target="#citation-session-info">Citation &amp; Session Info</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Practical Overview of Selected Text Analytics Methods</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Martin Schweinberger </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<p><img src="../../images/uq1.jpg" class="img-fluid" style="width:100.0%"></p>
<section id="introduction" class="level1 unnumbered">
<h1 class="unnumbered">Introduction</h1>
<p><img src="../../images/gy_chili.png" class="img-fluid" style="float:right; padding:10px;width:15.0%"></p>
<p>This tutorial introduces Text Analysis <span class="citation" data-cites="bernard1998text kabanoff1997introduction popping2000computer">(see <a href="#ref-bernard1998text" role="doc-biblioref">Bernard and Ryan</a>; <a href="#ref-kabanoff1997introduction" role="doc-biblioref">Kabanoff</a>; <a href="#ref-popping2000computer" role="doc-biblioref">Popping</a>)</span>, i.e.&nbsp;computer-based analysis of language data or the (semi-)automated extraction of information from text.</p>
<div class="warning" style="padding:0.5em; background-color:rgba(215,209,204,.3); color:#51247a">
<span>
<p style="margin-top:1em; text-align:center">
Please cite as: <br>Schweinberger, Martin. 2023. <em>Practical Overview of Selected Text Analytics Methods</em>. Brisbane: The Language Technology and Data Analysis Laboratory (LADAL). url: https://ladal.edu.au/textanalysis.html (Version 2023.09.24).<br>
</p>
<p></p>
</span></div>
<p><br></p>
<p>Most of the applications of Text Analysis are based upon a relatively limited number of key procedures or concepts (e.g.&nbsp;concordancing, word frequencies, annotation or tagging, collocation, text classification, Sentiment Analysis, Entity Extraction, Topic Modeling, etc.). In the following, we will explore these procedures and introduce some basic tools that help you perform the introduced tasks.</p>
<div class="warning" style="padding:0.5em; background-color:rgba(215,209,204,.3); color:#51247a">
<span>
<p style="margin-top:1em; text-align:center">
To be able to follow this tutorial, we suggest you check out and familiarize yourself with the content of the following <strong>R Basics</strong> tutorials:<br>
</p>
<p style="margin-top:1em; text-align:left">
</p><ul>
<li>
<a href="https://ladal.edu.au/intror.html">Getting started with R</a>
</li>
<li>
<a href="https://ladal.edu.au/load.html">Loading, saving, and generating data in R</a>
</li>
<li>
<a href="https://ladal.edu.au/string.html">String Processing in R</a>
</li>
<li>
<a href="https://ladal.edu.au/regex.html">Regular Expressions in R</a>
</li>
</ul>
<p></p>
<p style="margin-top:1em; text-align:center">
Click <a href="https://ladal.edu.au/content/kwics.Rmd"><strong>here</strong></a><a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> to download the <strong>entire R Notebook</strong> for this tutorial.<br><br> <a href="https://binderhub.atap-binder.cloud.edu.au/v2/gh/SLCLADAL/interactive-notebooks-environment/main?urlpath=git-pull%3Frepo%3Dhttps%253A%252F%252Fgithub.com%252FSLCLADAL%252Finteractive-notebooks%26urlpath%3Dlab%252Ftree%252Finteractive-notebooks%252Fnotebooks%252Ftextanalysis_cb.ipynb%26branch%3Dmain"><img src="https://mybinder.org/badge_logo.svg" class="img-fluid" alt="Binder"></a><br> Click <a href="https://binderhub.atap-binder.cloud.edu.au/v2/gh/SLCLADAL/interactive-notebooks-environment/main?urlpath=git-pull%3Frepo%3Dhttps%253A%252F%252Fgithub.com%252FSLCLADAL%252Finteractive-notebooks%26urlpath%3Dlab%252Ftree%252Finteractive-notebooks%252Fnotebooks%252Ftextanalysis_cb.ipynb%26branch%3Dmain"><strong>here</strong></a> to open an interactive Jupyter notebook that allows you to execute, change, and edit the code as well as to upload your own data. <br>
</p>
<p style="margin-left:1em;">
</p>
<p></p>
</span></div>
<p><br></p>
<p><strong>Preparation and session set up</strong></p>
<p>This tutorial is based on R. If you’re new to R or haven’t installed it yet, you can find an introduction and installation instructions <a href="https://ladal.edu.au/intror.html">here</a>. To ensure the scripts below run smoothly, we need to install specific R packages from a library. If you’ve already installed these packages, you can skip this section. To install them, run the code below (which may take 1 to 5 minutes).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install packages</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"quanteda"</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"dplyr"</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"stringr"</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"ggplot2"</span>)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"tm"</span>)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"udpipe"</span>)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"tidytext"</span>)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"wordcloud2"</span>)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"quanteda.textstats"</span>)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"quanteda.textplots"</span>)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"ggraph"</span>)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"flextable"</span>)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="co"># install klippy for copy-to-clipboard button in code chunks</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"remotes"</span>)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">"rlesur/klippy"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Once all packages are installed, you can activate them bu executing (running) the code chunk below.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load packages</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(flextable)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tm)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(udpipe)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidytext)</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(wordcloud2)</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(flextable)</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textstats)</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggraph)</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="co"># activate klippy for copy-to-clipboard button</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>klippy<span class="sc">::</span><span class="fu">klippy</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<script>
  addClassKlippyTo("pre.r, pre.markdown");
  addKlippy('left', 'top', 'auto', '1', 'Copy code', 'Copied!');
</script>
</div>
</div>
<p>Once you have initiated the session by executing the code shown above, you are good to go.</p>
</section>
<section id="concordancing" class="level1 unnumbered">
<h1 class="unnumbered">Concordancing</h1>
<p>In Text Analysis, concordancing refers to the extraction of words from a given text or texts <span class="citation" data-cites="lindquist2009corpus">(<a href="#ref-lindquist2009corpus" role="doc-biblioref">Lindquist</a>)</span>. Commonly, concordances are displayed in the form of key-word in contexts (KWIC) where the search term is shown with some preceding and following context. Thus, such displays are referred to as key word in context concordances. A more elaborate tutorial on how to perform concordancing with R is available <a href="https://ladal.edu.au/kwics.html">here</a>.</p>
<p><br></p>
<div class="warning" style="padding:0.5em; background-color:rgba(215,209,204,.3); color:#51247a">
<span>
<p style="margin-top:1em; text-align:center">
<b>Concordancing is a text analysis technique that retrieves and displays occurrences of a chosen word or phrase within a text or dataset, showing the surrounding context. It’s used to examine word usage, context, and linguistic patterns for research and language analysis purposes.</b><br>
</p>
<p style="margin-left:1em;">
</p>
<p></p>
</span></div>
<p><br></p>
<p><img src="../../images/AntConcConcordance.png" class="img-fluid" style="float:right; padding:10px;width:60.0%"></p>
<p>Concordancing is a valuable tool that helps us understand how a term is used in the data, examine word frequency, extract examples, and serves as a fundamental step for more advanced language data analyses.</p>
<p>In the following section, we’ll use R to explore text, using Lewis Carroll’s <em>Alice’s Adventures in Wonderland</em> as our example text. We’ll start by loading the text data, which is available from the LADAL GitHub repository for this tutorial. If you’re interested in loading your own data, you can refer to <a href="https://ladal.edu.au/intror.html#Working_with_text">this tutorial</a>.</p>
<p>We start by loading our example text.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load text</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>text <span class="ot">&lt;-</span> base<span class="sc">::</span><span class="fu">readRDS</span>(<span class="fu">url</span>(<span class="st">"https://slcladal.github.io/data/alice.rda"</span>, <span class="st">"rb"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-4ec670c8{table-layout:auto;width:75%;}.cl-4ec34a10{font-family:'Helvetica';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-4ec34a1a{font-family:'Helvetica';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-4ec49d16{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-4ec4a9dc{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4ec4a9e6{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4ec4a9e7{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4ec4a9e8{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-4ec670c8"><thead><tr style="overflow-wrap:break-word;"><th class="cl-4ec4a9dc"><p class="cl-4ec49d16"><span class="cl-4ec34a10">.</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-4ec4a9e6"><p class="cl-4ec49d16"><span class="cl-4ec34a1a">Alice’s Adventures in Wonderland</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4ec4a9e7"><p class="cl-4ec49d16"><span class="cl-4ec34a1a">by Lewis Carroll</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4ec4a9e6"><p class="cl-4ec49d16"><span class="cl-4ec34a1a">CHAPTER I.</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4ec4a9e7"><p class="cl-4ec49d16"><span class="cl-4ec34a1a">Down the Rabbit-Hole</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4ec4a9e6"><p class="cl-4ec49d16"><span class="cl-4ec34a1a">Alice was beginning to get very tired of sitting by her sister on the</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4ec4a9e8"><p class="cl-4ec49d16"><span class="cl-4ec34a1a">bank, and of having nothing to do: once or twice she had peeped into</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>The data still consists of short text snippets which is why we collapse these snippets and then split the collapsed data into chapters.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># combine and split into chapters</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>text_chapters <span class="ot">&lt;-</span> text <span class="sc">%&gt;%</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># paste all texts together into one long text</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste0</span>(<span class="at">collapse =</span> <span class="st">" "</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># replace Chapter I to Chapter XVI with qwertz</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(<span class="st">"(CHAPTER [XVI]{1,7}</span><span class="sc">\\</span><span class="st">.{0,1}) "</span>, <span class="st">"qwertz</span><span class="sc">\\</span><span class="st">1"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># convert text to lower case</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tolower</span>() <span class="sc">%&gt;%</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># split the long text into chapters</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_split</span>(<span class="st">"qwertz"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># unlist the result (convert into simple vector)</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unlist</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-4ed47e5c{table-layout:auto;width:95%;}.cl-4ed16c1c{font-family:'Helvetica';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-4ed16c1d{font-family:'Helvetica';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-4ed2b342{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-4ed2c076{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4ed2c077{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4ed2c080{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4ed2c081{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-4ed47e5c"><thead><tr style="overflow-wrap:break-word;"><th class="cl-4ed2c076"><p class="cl-4ed2b342"><span class="cl-4ed16c1c">.</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-4ed2c077"><p class="cl-4ed2b342"><span class="cl-4ed16c1d">alice’s adventures in wonderland by lewis carroll </span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4ed2c080"><p class="cl-4ed2b342"><span class="cl-4ed16c1d">chapter i.down the rabbit-hole alice was beginning to get very tired of sitting by her sister on the bank, and of having nothing to do: once or twice she had peeped into the book her sister was reading, but it had no pictures or conversations in it, “and what is the use of a book,” thought alice “without pictures or conversations?” so she was considering in her own mind (as well as she could, for the hot day made her feel very sleepy and stupid), whether the pleasure of making a daisy-chain woul</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4ed2c077"><p class="cl-4ed2b342"><span class="cl-4ed16c1d">chapter ii.the pool of tears “curiouser and curiouser!” cried alice (she was so much surprised, that for the moment she quite forgot how to speak good english); “now i’m opening out like the largest telescope that ever was! good-bye, feet!” (for when she looked down at her feet, they seemed to be almost out of sight, they were getting so far off). “oh, my poor little feet, i wonder who will put on your shoes and stockings for you now, dears? i’m sure _i_ shan’t be able! i shall be a great deal t</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4ed2c080"><p class="cl-4ed2b342"><span class="cl-4ed16c1d">chapter iii.a caucus-race and a long tale they were indeed a queer-looking party that assembled on the bank—the birds with draggled feathers, the animals with their fur clinging close to them, and all dripping wet, cross, and uncomfortable. the first question of course was, how to get dry again: they had a consultation about this, and after a few minutes it seemed quite natural to alice to find herself talking familiarly with them, as if she had known them all her life. indeed, she had quite a l</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4ed2c077"><p class="cl-4ed2b342"><span class="cl-4ed16c1d">chapter iv.the rabbit sends in a little bill it was the white rabbit, trotting slowly back again, and looking anxiously about as it went, as if it had lost something; and she heard it muttering to itself “the duchess! the duchess! oh my dear paws! oh my fur and whiskers! she’ll get me executed, as sure as ferrets are ferrets! where _can_ i have dropped them, i wonder?” alice guessed in a moment that it was looking for the fan and the pair of white kid gloves, and she very good-naturedly began hu</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4ed2c081"><p class="cl-4ed2b342"><span class="cl-4ed16c1d">chapter v.advice from a caterpillar the caterpillar and alice looked at each other for some time in silence: at last the caterpillar took the hookah out of its mouth, and addressed her in a languid, sleepy voice. “who are _you?_” said the caterpillar. this was not an encouraging opening for a conversation. alice replied, rather shyly, “i—i hardly know, sir, just at present—at least i know who i _was_ when i got up this morning, but i think i must have been changed several times since then.” “wha</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>After dividing the data into chapters, we conduct concordancing and extract KWICs (<strong>K</strong>ey<strong>W</strong>ord <strong>I</strong>n <strong>C</strong>ontext). This is accomplished using the <code>kwic</code> function from the <code>quanteda</code> package, which requires three main arguments: the data (x), the search pattern (pattern), and the window size.</p>
<p>To begin, we’ll create KWICs for the term <em>alice</em> using the <code>kwic</code> function from the <code>quanteda</code> package, as demonstrated below.</p>
<p><br></p>
<div class="warning" style="padding:0.5em; background-color:rgba(215,209,204,.3); color:#51247a">
<span>
<p style="margin-top:1em; text-align:center">
The <code>kwic</code> function in the <code>quanteda</code> package extracts <b>K</b>ey<b>W</b>ord <b>I</b>n <b>C</b>ontext (KWIC) information. Its main arguments are <code>x</code> (text data), <code>pattern</code> (search term), and <code>window</code> (context size) to display words around the pattern.<br>
</p>
<p style="margin-left:1em;">
</p>
<p></p>
</span></div>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create kwic</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>kwic_alice <span class="ot">&lt;-</span> quanteda<span class="sc">::</span><span class="fu">kwic</span>(</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> quanteda<span class="sc">::</span><span class="fu">tokens</span>(text_chapters), <span class="co"># define text(s)</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># define pattern</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">pattern =</span> <span class="st">"alice"</span>,</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># define window size</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">window =</span> <span class="dv">5</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># convert into a data frame</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># remove superfluous columns</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>to, <span class="sc">-</span>from, <span class="sc">-</span>pattern)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-4ee8c90c{table-layout:auto;width:95%;}.cl-4ee5c6f8{font-family:'Helvetica';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-4ee5c702{font-family:'Helvetica';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-4ee6fec4{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-4ee70c48{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4ee70c49{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4ee70c52{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4ee70c53{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4ee70c54{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4ee70c5c{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4ee70c5d{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4ee70c66{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4ee70c67{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4ee70c68{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4ee70c70{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4ee70c71{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-4ee8c90c"><thead><tr style="overflow-wrap:break-word;"><th class="cl-4ee70c48"><p class="cl-4ee6fec4"><span class="cl-4ee5c6f8">docname</span></p></th><th class="cl-4ee70c49"><p class="cl-4ee6fec4"><span class="cl-4ee5c6f8">pre</span></p></th><th class="cl-4ee70c49"><p class="cl-4ee6fec4"><span class="cl-4ee5c6f8">keyword</span></p></th><th class="cl-4ee70c52"><p class="cl-4ee6fec4"><span class="cl-4ee5c6f8">post</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-4ee70c53"><p class="cl-4ee6fec4"><span class="cl-4ee5c702">text2</span></p></td><td class="cl-4ee70c54"><p class="cl-4ee6fec4"><span class="cl-4ee5c702">chapter i.down the rabbit-hole</span></p></td><td class="cl-4ee70c54"><p class="cl-4ee6fec4"><span class="cl-4ee5c702">alice</span></p></td><td class="cl-4ee70c5c"><p class="cl-4ee6fec4"><span class="cl-4ee5c702">was beginning to get very</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4ee70c5d"><p class="cl-4ee6fec4"><span class="cl-4ee5c702">text2</span></p></td><td class="cl-4ee70c66"><p class="cl-4ee6fec4"><span class="cl-4ee5c702">a book , ” thought</span></p></td><td class="cl-4ee70c66"><p class="cl-4ee6fec4"><span class="cl-4ee5c702">alice</span></p></td><td class="cl-4ee70c67"><p class="cl-4ee6fec4"><span class="cl-4ee5c702">“ without pictures or conversations</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4ee70c53"><p class="cl-4ee6fec4"><span class="cl-4ee5c702">text2</span></p></td><td class="cl-4ee70c54"><p class="cl-4ee6fec4"><span class="cl-4ee5c702">in that ; nor did</span></p></td><td class="cl-4ee70c54"><p class="cl-4ee6fec4"><span class="cl-4ee5c702">alice</span></p></td><td class="cl-4ee70c5c"><p class="cl-4ee6fec4"><span class="cl-4ee5c702">think it so _very_ much</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4ee70c5d"><p class="cl-4ee6fec4"><span class="cl-4ee5c702">text2</span></p></td><td class="cl-4ee70c66"><p class="cl-4ee6fec4"><span class="cl-4ee5c702">and then hurried on ,</span></p></td><td class="cl-4ee70c66"><p class="cl-4ee6fec4"><span class="cl-4ee5c702">alice</span></p></td><td class="cl-4ee70c67"><p class="cl-4ee6fec4"><span class="cl-4ee5c702">started to her feet ,</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4ee70c53"><p class="cl-4ee6fec4"><span class="cl-4ee5c702">text2</span></p></td><td class="cl-4ee70c54"><p class="cl-4ee6fec4"><span class="cl-4ee5c702">in another moment down went</span></p></td><td class="cl-4ee70c54"><p class="cl-4ee6fec4"><span class="cl-4ee5c702">alice</span></p></td><td class="cl-4ee70c5c"><p class="cl-4ee6fec4"><span class="cl-4ee5c702">after it , never once</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4ee70c68"><p class="cl-4ee6fec4"><span class="cl-4ee5c702">text2</span></p></td><td class="cl-4ee70c70"><p class="cl-4ee6fec4"><span class="cl-4ee5c702">down , so suddenly that</span></p></td><td class="cl-4ee70c70"><p class="cl-4ee6fec4"><span class="cl-4ee5c702">alice</span></p></td><td class="cl-4ee70c71"><p class="cl-4ee6fec4"><span class="cl-4ee5c702">had not a moment to</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>In our search, we have the flexibility to utilize regular expressions, allowing us to extract not only straightforward terms like <em>alice</em> but also more intricate and even abstract patterns. An abstract pattern may involve only a part of the term being specified. For example, if we specify <em>walk</em>, we can retrieve words like <em>walking</em>, <em>walker,</em> <em>walked</em>, and <em>walks</em> that contain this sequence. To effectively capture such abstract patterns, we employ what are known as <em>regular expressions</em>.</p>
<p>When incorporating a regular expression in the <code>pattern</code> argument, it’s crucial to specify the <code>valuetype</code> as <code>regex</code>, as illustrated below.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create kwic</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>kwic_walk <span class="ot">&lt;-</span> quanteda<span class="sc">::</span><span class="fu">kwic</span>(</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> quanteda<span class="sc">::</span><span class="fu">tokens</span>(text_chapters), <span class="co"># define text(s)</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">pattern =</span> <span class="st">"walk.*"</span>,</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">window =</span> <span class="dv">5</span>,</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">valuetype =</span> <span class="st">"regex"</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># convert into a data frame</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># remove superfluous columns</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>to, <span class="sc">-</span>from, <span class="sc">-</span>pattern)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-4efbdb50{table-layout:auto;width:95%;}.cl-4ef8f214{font-family:'Helvetica';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-4ef8f21e{font-family:'Helvetica';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-4efa12e8{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-4efa1f72{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4efa1f7c{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4efa1f7d{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4efa1f7e{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4efa1f86{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4efa1f87{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4efa1f88{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4efa1f89{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4efa1f90{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4efa1f91{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4efa1f92{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4efa1f9a{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-4efbdb50"><thead><tr style="overflow-wrap:break-word;"><th class="cl-4efa1f72"><p class="cl-4efa12e8"><span class="cl-4ef8f214">docname</span></p></th><th class="cl-4efa1f7c"><p class="cl-4efa12e8"><span class="cl-4ef8f214">pre</span></p></th><th class="cl-4efa1f7c"><p class="cl-4efa12e8"><span class="cl-4ef8f214">keyword</span></p></th><th class="cl-4efa1f7d"><p class="cl-4efa12e8"><span class="cl-4ef8f214">post</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-4efa1f7e"><p class="cl-4efa12e8"><span class="cl-4ef8f21e">text2</span></p></td><td class="cl-4efa1f86"><p class="cl-4efa12e8"><span class="cl-4ef8f21e">out among the people that</span></p></td><td class="cl-4efa1f86"><p class="cl-4efa12e8"><span class="cl-4ef8f21e">walk</span></p></td><td class="cl-4efa1f87"><p class="cl-4efa12e8"><span class="cl-4ef8f21e">with their heads downward !</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4efa1f88"><p class="cl-4efa12e8"><span class="cl-4ef8f21e">text2</span></p></td><td class="cl-4efa1f89"><p class="cl-4efa12e8"><span class="cl-4ef8f21e">to dream that she was</span></p></td><td class="cl-4efa1f89"><p class="cl-4efa12e8"><span class="cl-4ef8f21e">walking</span></p></td><td class="cl-4efa1f90"><p class="cl-4efa12e8"><span class="cl-4ef8f21e">hand in hand with dinah</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4efa1f7e"><p class="cl-4efa12e8"><span class="cl-4ef8f21e">text2</span></p></td><td class="cl-4efa1f86"><p class="cl-4efa12e8"><span class="cl-4ef8f21e">trying every door , she</span></p></td><td class="cl-4efa1f86"><p class="cl-4efa12e8"><span class="cl-4ef8f21e">walked</span></p></td><td class="cl-4efa1f87"><p class="cl-4efa12e8"><span class="cl-4ef8f21e">sadly down the middle ,</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4efa1f88"><p class="cl-4efa12e8"><span class="cl-4ef8f21e">text3</span></p></td><td class="cl-4efa1f89"><p class="cl-4efa12e8"><span class="cl-4ef8f21e">“ or perhaps they won’t</span></p></td><td class="cl-4efa1f89"><p class="cl-4efa12e8"><span class="cl-4ef8f21e">walk</span></p></td><td class="cl-4efa1f90"><p class="cl-4efa12e8"><span class="cl-4ef8f21e">the way i want to</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4efa1f7e"><p class="cl-4efa12e8"><span class="cl-4ef8f21e">text4</span></p></td><td class="cl-4efa1f86"><p class="cl-4efa12e8"><span class="cl-4ef8f21e">mouse , getting up and</span></p></td><td class="cl-4efa1f86"><p class="cl-4efa12e8"><span class="cl-4ef8f21e">walking</span></p></td><td class="cl-4efa1f87"><p class="cl-4efa12e8"><span class="cl-4ef8f21e">away . “ you insult</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4efa1f88"><p class="cl-4efa12e8"><span class="cl-4ef8f21e">text4</span></p></td><td class="cl-4efa1f89"><p class="cl-4efa12e8"><span class="cl-4ef8f21e">its head impatiently , and</span></p></td><td class="cl-4efa1f89"><p class="cl-4efa12e8"><span class="cl-4ef8f21e">walked</span></p></td><td class="cl-4efa1f90"><p class="cl-4efa12e8"><span class="cl-4ef8f21e">a little quicker . “</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4efa1f7e"><p class="cl-4efa12e8"><span class="cl-4ef8f21e">text5</span></p></td><td class="cl-4efa1f86"><p class="cl-4efa12e8"><span class="cl-4ef8f21e">and get ready for your</span></p></td><td class="cl-4efa1f86"><p class="cl-4efa12e8"><span class="cl-4ef8f21e">walk</span></p></td><td class="cl-4efa1f87"><p class="cl-4efa12e8"><span class="cl-4ef8f21e">! ’ ‘ coming in</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4efa1f88"><p class="cl-4efa12e8"><span class="cl-4ef8f21e">text7</span></p></td><td class="cl-4efa1f89"><p class="cl-4efa12e8"><span class="cl-4ef8f21e">, “ if you only</span></p></td><td class="cl-4efa1f89"><p class="cl-4efa12e8"><span class="cl-4ef8f21e">walk</span></p></td><td class="cl-4efa1f90"><p class="cl-4efa12e8"><span class="cl-4ef8f21e">long enough . ” alice</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4efa1f7e"><p class="cl-4efa12e8"><span class="cl-4ef8f21e">text7</span></p></td><td class="cl-4efa1f86"><p class="cl-4efa12e8"><span class="cl-4ef8f21e">a minute or two she</span></p></td><td class="cl-4efa1f86"><p class="cl-4efa12e8"><span class="cl-4ef8f21e">walked</span></p></td><td class="cl-4efa1f87"><p class="cl-4efa12e8"><span class="cl-4ef8f21e">on in the direction in</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4efa1f91"><p class="cl-4efa12e8"><span class="cl-4ef8f21e">text7</span></p></td><td class="cl-4efa1f92"><p class="cl-4efa12e8"><span class="cl-4ef8f21e">high : even then she</span></p></td><td class="cl-4efa1f92"><p class="cl-4efa12e8"><span class="cl-4ef8f21e">walked</span></p></td><td class="cl-4efa1f9a"><p class="cl-4efa12e8"><span class="cl-4ef8f21e">up towards it rather timidly</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>When searching for expressions that represent phrases consisting of multiple elements, like <em>poor alice</em>, it’s essential to explicitly specify in the <code>pattern</code> argument that we are searching for a <code>phrase</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create kwic</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>kwic_pooralice <span class="ot">&lt;-</span> quanteda<span class="sc">::</span><span class="fu">kwic</span>(</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> quanteda<span class="sc">::</span><span class="fu">tokens</span>(text_chapters), <span class="co"># define text(s)</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">pattern =</span> quanteda<span class="sc">::</span><span class="fu">phrase</span>(<span class="st">"poor alice"</span>),</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">window =</span> <span class="dv">5</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># convert into a data frame</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># remove superfluous columns</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>to, <span class="sc">-</span>from, <span class="sc">-</span>pattern)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-4f0ee970{table-layout:auto;width:95%;}.cl-4f0b6520{font-family:'Helvetica';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-4f0b6521{font-family:'Helvetica';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-4f0c9698{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-4f0ca4f8{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4f0ca4f9{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4f0ca516{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4f0ca517{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4f0ca520{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4f0ca521{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4f0ca522{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4f0ca52a{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4f0ca52b{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4f0ca52c{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4f0ca534{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4f0ca535{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-4f0ee970"><thead><tr style="overflow-wrap:break-word;"><th class="cl-4f0ca4f8"><p class="cl-4f0c9698"><span class="cl-4f0b6520">docname</span></p></th><th class="cl-4f0ca4f9"><p class="cl-4f0c9698"><span class="cl-4f0b6520">pre</span></p></th><th class="cl-4f0ca4f9"><p class="cl-4f0c9698"><span class="cl-4f0b6520">keyword</span></p></th><th class="cl-4f0ca516"><p class="cl-4f0c9698"><span class="cl-4f0b6520">post</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-4f0ca517"><p class="cl-4f0c9698"><span class="cl-4f0b6521">text2</span></p></td><td class="cl-4f0ca520"><p class="cl-4f0c9698"><span class="cl-4f0b6521">go through , ” thought</span></p></td><td class="cl-4f0ca520"><p class="cl-4f0c9698"><span class="cl-4f0b6521">poor alice</span></p></td><td class="cl-4f0ca521"><p class="cl-4f0c9698"><span class="cl-4f0b6521">, “ it would be</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4f0ca522"><p class="cl-4f0c9698"><span class="cl-4f0b6521">text2</span></p></td><td class="cl-4f0ca52a"><p class="cl-4f0c9698"><span class="cl-4f0b6521">; but , alas for</span></p></td><td class="cl-4f0ca52a"><p class="cl-4f0c9698"><span class="cl-4f0b6521">poor alice</span></p></td><td class="cl-4f0ca52b"><p class="cl-4f0c9698"><span class="cl-4f0b6521">! when she got to</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4f0ca517"><p class="cl-4f0c9698"><span class="cl-4f0b6521">text2</span></p></td><td class="cl-4f0ca520"><p class="cl-4f0c9698"><span class="cl-4f0b6521">use now , ” thought</span></p></td><td class="cl-4f0ca520"><p class="cl-4f0c9698"><span class="cl-4f0b6521">poor alice</span></p></td><td class="cl-4f0ca521"><p class="cl-4f0c9698"><span class="cl-4f0b6521">, “ to pretend to</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4f0ca522"><p class="cl-4f0c9698"><span class="cl-4f0b6521">text3</span></p></td><td class="cl-4f0ca52a"><p class="cl-4f0c9698"><span class="cl-4f0b6521">to the garden door .</span></p></td><td class="cl-4f0ca52a"><p class="cl-4f0c9698"><span class="cl-4f0b6521">poor alice</span></p></td><td class="cl-4f0ca52b"><p class="cl-4f0c9698"><span class="cl-4f0b6521">! it was as much</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4f0ca517"><p class="cl-4f0c9698"><span class="cl-4f0b6521">text3</span></p></td><td class="cl-4f0ca520"><p class="cl-4f0c9698"><span class="cl-4f0b6521">right words , ” said</span></p></td><td class="cl-4f0ca520"><p class="cl-4f0c9698"><span class="cl-4f0b6521">poor alice</span></p></td><td class="cl-4f0ca521"><p class="cl-4f0c9698"><span class="cl-4f0b6521">, and her eyes filled</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4f0ca52c"><p class="cl-4f0c9698"><span class="cl-4f0b6521">text4</span></p></td><td class="cl-4f0ca534"><p class="cl-4f0c9698"><span class="cl-4f0b6521">mean it ! ” pleaded</span></p></td><td class="cl-4f0ca534"><p class="cl-4f0c9698"><span class="cl-4f0b6521">poor alice</span></p></td><td class="cl-4f0ca535"><p class="cl-4f0c9698"><span class="cl-4f0b6521">. “ but you’re so</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>We could continue our analysis by exploring in greater detail how the phrase <em>poor alice</em> is used in context, perhaps by adjusting the context window size or conducting similar investigations. However, for now, we’ll shift our focus to learning how to extract and work with word frequencies.</p>
</section>
<section id="word-frequency" class="level1 unnumbered">
<h1 class="unnumbered">Word Frequency</h1>
<p>Frequency information is a cornerstone of text analytics, underpinning nearly all analytical methods. Identifying the most common words within a text is a fundamental technique in text analytics, serving as the bedrock of text analysis. This frequency data is typically organized into word frequency lists, which consist of word forms and their corresponding frequencies within a given text or collection of texts.</p>
<p>Given the paramount importance of extracting word frequency lists, we will proceed to demonstrate how to do so. In the first step, we’ll continue with our example text, convert the chapters to lowercase, eliminate non-word symbols (including punctuation), and then break down the text (the chapters) into individual words.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># process the text and save result in "text_words"</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>text_words <span class="ot">&lt;-</span> text <span class="sc">%&gt;%</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># convert all text to lowercase</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tolower</span>() <span class="sc">%&gt;%</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># remove non-word characters, keeping spaces</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(<span class="st">"[^[:alpha:][:space:]]*"</span>, <span class="st">""</span>) <span class="sc">%&gt;%</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># remove punctuation</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>  tm<span class="sc">::</span><span class="fu">removePunctuation</span>() <span class="sc">%&gt;%</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># squish consecutive spaces into a single space</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_squish</span>() <span class="sc">%&gt;%</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># split the text into individual words, separated by spaces</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_split</span>(<span class="st">" "</span>) <span class="sc">%&gt;%</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># unlist the result into a single vector of words</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unlist</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-4f1c4fb6{table-layout:auto;width:50%;}.cl-4f199a82{font-family:'Helvetica';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-4f199a83{font-family:'Helvetica';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-4f1aad5a{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-4f1ab868{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4f1ab869{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4f1ab872{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4f1ab873{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-4f1c4fb6"><thead><tr style="overflow-wrap:break-word;"><th class="cl-4f1ab868"><p class="cl-4f1aad5a"><span class="cl-4f199a82">.</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-4f1ab869"><p class="cl-4f1aad5a"><span class="cl-4f199a83">alices</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4f1ab872"><p class="cl-4f1aad5a"><span class="cl-4f199a83">adventures</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4f1ab869"><p class="cl-4f1aad5a"><span class="cl-4f199a83">in</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4f1ab872"><p class="cl-4f1aad5a"><span class="cl-4f199a83">wonderland</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4f1ab869"><p class="cl-4f1aad5a"><span class="cl-4f199a83">by</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4f1ab872"><p class="cl-4f1aad5a"><span class="cl-4f199a83">lewis</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4f1ab869"><p class="cl-4f1aad5a"><span class="cl-4f199a83">carroll</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4f1ab872"><p class="cl-4f1aad5a"><span class="cl-4f199a83">chapter</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4f1ab869"><p class="cl-4f1aad5a"><span class="cl-4f199a83">i</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4f1ab872"><p class="cl-4f1aad5a"><span class="cl-4f199a83">down</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4f1ab869"><p class="cl-4f1aad5a"><span class="cl-4f199a83">the</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4f1ab872"><p class="cl-4f1aad5a"><span class="cl-4f199a83">rabbithole</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4f1ab869"><p class="cl-4f1aad5a"><span class="cl-4f199a83">alice</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4f1ab872"><p class="cl-4f1aad5a"><span class="cl-4f199a83">was</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4f1ab873"><p class="cl-4f1aad5a"><span class="cl-4f199a83">beginning</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>With our word vector in hand, let’s effortlessly construct a table that showcases a word frequency list, as demonstrated below.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a word frequency table from the 'text_words' data</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>wfreq <span class="ot">&lt;-</span> text_words <span class="sc">%&gt;%</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># count the frequency of each unique word</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">table</span>() <span class="sc">%&gt;%</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># convert the frequency table into a data frame</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># arrange the data frame rows in descending order of word frequency</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Freq)) <span class="sc">%&gt;%</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># rename the columns for clarity</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">word =</span> <span class="dv">1</span>,</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">frequency =</span> <span class="dv">2</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-4f295ea4{table-layout:auto;width:50%;}.cl-4f25da90{font-family:'Helvetica';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-4f25da91{font-family:'Helvetica';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-4f270500{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-4f27050a{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-4f2711da{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4f2711e4{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4f2711e5{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4f2711ee{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4f2711ef{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4f2711f0{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4f2711f8{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4f2711f9{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-4f295ea4"><thead><tr style="overflow-wrap:break-word;"><th class="cl-4f2711da"><p class="cl-4f270500"><span class="cl-4f25da90">word</span></p></th><th class="cl-4f2711e4"><p class="cl-4f27050a"><span class="cl-4f25da90">frequency</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-4f2711e5"><p class="cl-4f270500"><span class="cl-4f25da91">the</span></p></td><td class="cl-4f2711ee"><p class="cl-4f27050a"><span class="cl-4f25da91">1,630</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4f2711ef"><p class="cl-4f270500"><span class="cl-4f25da91">and</span></p></td><td class="cl-4f2711f0"><p class="cl-4f27050a"><span class="cl-4f25da91">844</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4f2711e5"><p class="cl-4f270500"><span class="cl-4f25da91">to</span></p></td><td class="cl-4f2711ee"><p class="cl-4f27050a"><span class="cl-4f25da91">721</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4f2711ef"><p class="cl-4f270500"><span class="cl-4f25da91">a</span></p></td><td class="cl-4f2711f0"><p class="cl-4f27050a"><span class="cl-4f25da91">627</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4f2711e5"><p class="cl-4f270500"><span class="cl-4f25da91">she</span></p></td><td class="cl-4f2711ee"><p class="cl-4f27050a"><span class="cl-4f25da91">537</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4f2711ef"><p class="cl-4f270500"><span class="cl-4f25da91">it</span></p></td><td class="cl-4f2711f0"><p class="cl-4f27050a"><span class="cl-4f25da91">526</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4f2711e5"><p class="cl-4f270500"><span class="cl-4f25da91">of</span></p></td><td class="cl-4f2711ee"><p class="cl-4f27050a"><span class="cl-4f25da91">508</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4f2711ef"><p class="cl-4f270500"><span class="cl-4f25da91">said</span></p></td><td class="cl-4f2711f0"><p class="cl-4f27050a"><span class="cl-4f25da91">462</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4f2711e5"><p class="cl-4f270500"><span class="cl-4f25da91">i</span></p></td><td class="cl-4f2711ee"><p class="cl-4f27050a"><span class="cl-4f25da91">400</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4f2711ef"><p class="cl-4f270500"><span class="cl-4f25da91">alice</span></p></td><td class="cl-4f2711f0"><p class="cl-4f27050a"><span class="cl-4f25da91">385</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4f2711e5"><p class="cl-4f270500"><span class="cl-4f25da91">in</span></p></td><td class="cl-4f2711ee"><p class="cl-4f27050a"><span class="cl-4f25da91">366</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4f2711ef"><p class="cl-4f270500"><span class="cl-4f25da91">you</span></p></td><td class="cl-4f2711f0"><p class="cl-4f27050a"><span class="cl-4f25da91">360</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4f2711e5"><p class="cl-4f270500"><span class="cl-4f25da91">was</span></p></td><td class="cl-4f2711ee"><p class="cl-4f27050a"><span class="cl-4f25da91">357</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4f2711ef"><p class="cl-4f270500"><span class="cl-4f25da91">that</span></p></td><td class="cl-4f2711f0"><p class="cl-4f27050a"><span class="cl-4f25da91">276</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4f2711f8"><p class="cl-4f270500"><span class="cl-4f25da91">as</span></p></td><td class="cl-4f2711f9"><p class="cl-4f27050a"><span class="cl-4f25da91">262</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>The most common words often consist of function words that may lack significance. To enhance our analysis, we’ll eliminate these function words, often referred to as <em>stopwords</em>, from the frequency list. Let’s take a look at the refined list without stopwords.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create table wo stopwords</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>wfreq_wostop <span class="ot">&lt;-</span> wfreq <span class="sc">%&gt;%</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(tidytext<span class="sc">::</span>stop_words, <span class="at">by =</span> <span class="st">"word"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(word <span class="sc">!=</span> <span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-4f349b16{table-layout:auto;width:50%;}.cl-4f31c45e{font-family:'Helvetica';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-4f31c468{font-family:'Helvetica';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-4f32e30c{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-4f32e316{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-4f32ef3c{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4f32ef46{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4f32ef6e{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4f32ef6f{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4f32ef78{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4f32ef79{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4f32ef82{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4f32ef83{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-4f349b16"><thead><tr style="overflow-wrap:break-word;"><th class="cl-4f32ef3c"><p class="cl-4f32e30c"><span class="cl-4f31c45e">word</span></p></th><th class="cl-4f32ef46"><p class="cl-4f32e316"><span class="cl-4f31c45e">frequency</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-4f32ef6e"><p class="cl-4f32e30c"><span class="cl-4f31c468">alice</span></p></td><td class="cl-4f32ef6f"><p class="cl-4f32e316"><span class="cl-4f31c468">385</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4f32ef78"><p class="cl-4f32e30c"><span class="cl-4f31c468">queen</span></p></td><td class="cl-4f32ef79"><p class="cl-4f32e316"><span class="cl-4f31c468">68</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4f32ef6e"><p class="cl-4f32e30c"><span class="cl-4f31c468">time</span></p></td><td class="cl-4f32ef6f"><p class="cl-4f32e316"><span class="cl-4f31c468">68</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4f32ef78"><p class="cl-4f32e30c"><span class="cl-4f31c468">king</span></p></td><td class="cl-4f32ef79"><p class="cl-4f32e316"><span class="cl-4f31c468">61</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4f32ef6e"><p class="cl-4f32e30c"><span class="cl-4f31c468">dont</span></p></td><td class="cl-4f32ef6f"><p class="cl-4f32e316"><span class="cl-4f31c468">60</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4f32ef78"><p class="cl-4f32e30c"><span class="cl-4f31c468">im</span></p></td><td class="cl-4f32ef79"><p class="cl-4f32e316"><span class="cl-4f31c468">57</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4f32ef6e"><p class="cl-4f32e30c"><span class="cl-4f31c468">mock</span></p></td><td class="cl-4f32ef6f"><p class="cl-4f32e316"><span class="cl-4f31c468">56</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4f32ef78"><p class="cl-4f32e30c"><span class="cl-4f31c468">turtle</span></p></td><td class="cl-4f32ef79"><p class="cl-4f32e316"><span class="cl-4f31c468">56</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4f32ef6e"><p class="cl-4f32e30c"><span class="cl-4f31c468">gryphon</span></p></td><td class="cl-4f32ef6f"><p class="cl-4f32e316"><span class="cl-4f31c468">55</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4f32ef78"><p class="cl-4f32e30c"><span class="cl-4f31c468">hatter</span></p></td><td class="cl-4f32ef79"><p class="cl-4f32e316"><span class="cl-4f31c468">55</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4f32ef6e"><p class="cl-4f32e30c"><span class="cl-4f31c468">head</span></p></td><td class="cl-4f32ef6f"><p class="cl-4f32e316"><span class="cl-4f31c468">48</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4f32ef78"><p class="cl-4f32e30c"><span class="cl-4f31c468">voice</span></p></td><td class="cl-4f32ef79"><p class="cl-4f32e316"><span class="cl-4f31c468">47</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4f32ef6e"><p class="cl-4f32e30c"><span class="cl-4f31c468">looked</span></p></td><td class="cl-4f32ef6f"><p class="cl-4f32e316"><span class="cl-4f31c468">45</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4f32ef78"><p class="cl-4f32e30c"><span class="cl-4f31c468">rabbit</span></p></td><td class="cl-4f32ef79"><p class="cl-4f32e316"><span class="cl-4f31c468">43</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4f32ef82"><p class="cl-4f32e30c"><span class="cl-4f31c468">round</span></p></td><td class="cl-4f32ef83"><p class="cl-4f32e316"><span class="cl-4f31c468">41</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>Word frequency lists can be presented visually in several ways, with bar graphs being the most common and intuitive choice for visualization.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>wfreq_wostop <span class="sc">%&gt;%</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(word, <span class="sc">-</span>frequency, mean), <span class="at">y =</span> frequency)) <span class="sc">+</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"10 most frequent non-stop words </span><span class="sc">\n</span><span class="st">in the example text"</span>,</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">""</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">size =</span> <span class="dv">12</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="textanalysis_files/figure-html/wf6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<section id="wordclouds" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="wordclouds">Wordclouds</h2>
<p>Alternatively, word frequency lists can be visually represented as word clouds, though they provide less detailed information. Word clouds are visual representations where words appear larger based on their frequency, offering a quick visual summary of word importance in a dataset.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create a word cloud visualization</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>text <span class="sc">%&gt;%</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Convert text data to a quanteda corpus</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  quanteda<span class="sc">::</span><span class="fu">corpus</span>() <span class="sc">%&gt;%</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># tokenize the corpus, removing punctuation</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  quanteda<span class="sc">::</span><span class="fu">tokens</span>(<span class="at">remove_punct =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># remove English stopwords</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  quanteda<span class="sc">::</span><span class="fu">tokens_remove</span>(<span class="fu">stopwords</span>(<span class="st">"english"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># create a document-feature matrix (DFM)</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>  quanteda<span class="sc">::</span><span class="fu">dfm</span>() <span class="sc">%&gt;%</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># generate a word cloud using textplot_wordcloud</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>  quanteda.textplots<span class="sc">::</span><span class="fu">textplot_wordcloud</span>(</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># maximum words to display in the word cloud</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_words =</span> <span class="dv">150</span>,</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># determine the maximum size of words</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_size =</span> <span class="dv">10</span>,</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># determine the minimum size of words</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">min_size =</span> <span class="fl">1.5</span>,</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Define a color palette for the word cloud</span></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> scales<span class="sc">::</span><span class="fu">viridis_pal</span>(<span class="at">option =</span> <span class="st">"A"</span>)(<span class="dv">10</span>)</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="textanalysis_files/figure-html/wc1-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><br></p>
<div class="warning" style="padding:0.5em; background-color:rgba(215,209,204,.3); color:#51247a">
<span>
<p style="margin-top:1em; text-align:center">
The <code>textplot_wordcloud</code> function creates a word cloud visualization of text data in R. Its main arguments are <code>x</code> (a Document-Feature Matrix or DFM), <code>max_words</code> (maximum words to display), and <code>color</code> (color palette for the word cloud).<br>
</p>
<p style="margin-left:1em;">
</p>
<p></p>
</span></div>
<p><br></p>
<p>Another form of word clouds, known as <em>comparison clouds</em>, is helpful in discerning disparities between texts. For instance, we can load various texts and assess how they vary in terms of word frequencies. To illustrate this, we’ll load Herman Melville’s <em>Moby Dick</em>, George Orwell’s <em>1984</em>, and Charles Darwin’s <em>Origin</em>.</p>
<p>First, we’ll load these texts and combine them into single documents.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load data</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>orwell_sep <span class="ot">&lt;-</span> base<span class="sc">::</span><span class="fu">readRDS</span>(<span class="fu">url</span>(<span class="st">"https://slcladal.github.io/data/orwell.rda"</span>, <span class="st">"rb"</span>))</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>orwell <span class="ot">&lt;-</span> orwell_sep <span class="sc">%&gt;%</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste0</span>(<span class="at">collapse =</span> <span class="st">" "</span>)</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>melville_sep <span class="ot">&lt;-</span> base<span class="sc">::</span><span class="fu">readRDS</span>(<span class="fu">url</span>(<span class="st">"https://slcladal.github.io/data/melville.rda"</span>, <span class="st">"rb"</span>))</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>melville <span class="ot">&lt;-</span> melville_sep <span class="sc">%&gt;%</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste0</span>(<span class="at">collapse =</span> <span class="st">" "</span>)</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>darwin_sep <span class="ot">&lt;-</span> base<span class="sc">::</span><span class="fu">readRDS</span>(<span class="fu">url</span>(<span class="st">"https://slcladal.github.io/data/darwin.rda"</span>, <span class="st">"rb"</span>))</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>darwin <span class="ot">&lt;-</span> darwin_sep <span class="sc">%&gt;%</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste0</span>(<span class="at">collapse =</span> <span class="st">" "</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now, we generate a corpus object from these texts and create a variable with the author name.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>corp_dom <span class="ot">&lt;-</span> quanteda<span class="sc">::</span><span class="fu">corpus</span>(<span class="fu">c</span>(darwin, melville, orwell))</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(corp_dom, <span class="st">"docvars"</span>)<span class="sc">$</span>Author <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Darwin"</span>, <span class="st">"Melville"</span>, <span class="st">"Orwell"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now, we can remove so-called <em>stopwords</em> (non-lexical function words) and punctuation and generate the comparison cloud.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create a comparison word cloud for a corpus</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>corp_dom <span class="sc">%&gt;%</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># tokenize the corpus, removing punctuation, symbols, and numbers</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  quanteda<span class="sc">::</span><span class="fu">tokens</span>(</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_punct =</span> <span class="cn">TRUE</span>,</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_symbols =</span> <span class="cn">TRUE</span>,</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_numbers =</span> <span class="cn">TRUE</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># remove English stopwords</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>  quanteda<span class="sc">::</span><span class="fu">tokens_remove</span>(<span class="fu">stopwords</span>(<span class="st">"english"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># create a Document-Feature Matrix (DFM)</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>  quanteda<span class="sc">::</span><span class="fu">dfm</span>() <span class="sc">%&gt;%</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># group the DFM by the 'Author' column from 'corp_dom'</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>  quanteda<span class="sc">::</span><span class="fu">dfm_group</span>(<span class="at">groups =</span> corp_dom<span class="sc">$</span>Author) <span class="sc">%&gt;%</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># trim the DFM, keeping terms that occur at least 10 times</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>  quanteda<span class="sc">::</span><span class="fu">dfm_trim</span>(<span class="at">min_termfreq =</span> <span class="dv">10</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># generate a comparison word cloud</span></span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>  quanteda.textplots<span class="sc">::</span><span class="fu">textplot_wordcloud</span>(</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># create a comparison word cloud</span></span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">comparison =</span> <span class="cn">TRUE</span>,</span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>    <span class="co"># set colors for different groups</span></span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="fu">c</span>(<span class="st">"darkgray"</span>, <span class="st">"orange"</span>, <span class="st">"purple"</span>),</span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a>    <span class="co"># define the maximum number of words to display in the word cloud</span></span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_words =</span> <span class="dv">150</span></span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="textanalysis_files/figure-html/wc4-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="frequency-changes" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="frequency-changes">Frequency changes</h2>
<p>We can also explore how the term <em>alice</em> is used throughout the chapters of our example text. To begin, let’s extract the word count for each chapter.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extract the number of words per chapter</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>Words <span class="ot">&lt;-</span> text_chapters <span class="sc">%&gt;%</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># split each chapter into words based on spaces</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_split</span>(<span class="st">" "</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># measure the length (number of words) in each chapter</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lengths</span>()</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="co"># display the resulting data, which contains the word counts per chapter</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>Words</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]    8 2364 2125 1765 2616 2339 2609 2307 2487 2272 2058 1886 2153</code></pre>
</div>
</div>
<p>Next, we extract the number of matches in each chapter.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extract the number of matches of "alice" per chapter</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>Matches <span class="ot">&lt;-</span> text_chapters <span class="sc">%&gt;%</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># count the number of times "alice" appears in each chapter</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_count</span>(<span class="st">"alice"</span>)</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="co"># display the resulting data, which shows the number of matches of "alice" per chapter</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>Matches</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1 28 26 23 31 35 43 51 39 52 30 16 23</code></pre>
</div>
</div>
<p>Now, we extract the names of the chapters and create a table with the chapter names and the relative frequency of matches per 1,000 words.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extract chapters</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>Chapters <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"chapter"</span>, <span class="dv">0</span><span class="sc">:</span>(<span class="fu">length</span>(text_chapters) <span class="sc">-</span> <span class="dv">1</span>))</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>Chapters</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "chapter0"  "chapter1"  "chapter2"  "chapter3"  "chapter4"  "chapter5" 
 [7] "chapter6"  "chapter7"  "chapter8"  "chapter9"  "chapter10" "chapter11"
[13] "chapter12"</code></pre>
</div>
</div>
<p>Next, we combine the information in a single data frame and add a column containing the relative frequency of <em>alice</em> in each chapter.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create table of results</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>tb <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(Chapters, Matches, Words) <span class="sc">%&gt;%</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># create new variable with the relative frequency</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">Frequency =</span> <span class="fu">round</span>(Matches <span class="sc">/</span> Words <span class="sc">*</span> <span class="dv">1000</span>, <span class="dv">2</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># reorder chapters</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">Chapters =</span> <span class="fu">factor</span>(Chapters, <span class="at">levels =</span> <span class="fu">c</span>(<span class="fu">paste0</span>(<span class="st">"chapter"</span>, <span class="dv">0</span><span class="sc">:</span><span class="dv">12</span>))))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-51773028{table-layout:auto;width:50%;}.cl-51743b8e{font-family:'Helvetica';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-51743b98{font-family:'Helvetica';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-51755a5a{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-51755a64{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-51756720{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-51756721{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5175672a{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-51756748{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-51756749{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5175674a{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-51756752{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-51756753{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5175675c{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5175675d{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5175675e{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-51756766{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-51773028"><thead><tr style="overflow-wrap:break-word;"><th class="cl-51756720"><p class="cl-51755a5a"><span class="cl-51743b8e">Chapters</span></p></th><th class="cl-51756721"><p class="cl-51755a64"><span class="cl-51743b8e">Matches</span></p></th><th class="cl-51756721"><p class="cl-51755a64"><span class="cl-51743b8e">Words</span></p></th><th class="cl-5175672a"><p class="cl-51755a64"><span class="cl-51743b8e">Frequency</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-51756748"><p class="cl-51755a5a"><span class="cl-51743b98">chapter0</span></p></td><td class="cl-51756749"><p class="cl-51755a64"><span class="cl-51743b98">1</span></p></td><td class="cl-51756749"><p class="cl-51755a64"><span class="cl-51743b98">8</span></p></td><td class="cl-5175674a"><p class="cl-51755a64"><span class="cl-51743b98">125.00</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-51756752"><p class="cl-51755a5a"><span class="cl-51743b98">chapter1</span></p></td><td class="cl-51756753"><p class="cl-51755a64"><span class="cl-51743b98">28</span></p></td><td class="cl-51756753"><p class="cl-51755a64"><span class="cl-51743b98">2,364</span></p></td><td class="cl-5175675c"><p class="cl-51755a64"><span class="cl-51743b98">11.84</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-51756748"><p class="cl-51755a5a"><span class="cl-51743b98">chapter2</span></p></td><td class="cl-51756749"><p class="cl-51755a64"><span class="cl-51743b98">26</span></p></td><td class="cl-51756749"><p class="cl-51755a64"><span class="cl-51743b98">2,125</span></p></td><td class="cl-5175674a"><p class="cl-51755a64"><span class="cl-51743b98">12.24</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-51756752"><p class="cl-51755a5a"><span class="cl-51743b98">chapter3</span></p></td><td class="cl-51756753"><p class="cl-51755a64"><span class="cl-51743b98">23</span></p></td><td class="cl-51756753"><p class="cl-51755a64"><span class="cl-51743b98">1,765</span></p></td><td class="cl-5175675c"><p class="cl-51755a64"><span class="cl-51743b98">13.03</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-51756748"><p class="cl-51755a5a"><span class="cl-51743b98">chapter4</span></p></td><td class="cl-51756749"><p class="cl-51755a64"><span class="cl-51743b98">31</span></p></td><td class="cl-51756749"><p class="cl-51755a64"><span class="cl-51743b98">2,616</span></p></td><td class="cl-5175674a"><p class="cl-51755a64"><span class="cl-51743b98">11.85</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-51756752"><p class="cl-51755a5a"><span class="cl-51743b98">chapter5</span></p></td><td class="cl-51756753"><p class="cl-51755a64"><span class="cl-51743b98">35</span></p></td><td class="cl-51756753"><p class="cl-51755a64"><span class="cl-51743b98">2,339</span></p></td><td class="cl-5175675c"><p class="cl-51755a64"><span class="cl-51743b98">14.96</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-51756748"><p class="cl-51755a5a"><span class="cl-51743b98">chapter6</span></p></td><td class="cl-51756749"><p class="cl-51755a64"><span class="cl-51743b98">43</span></p></td><td class="cl-51756749"><p class="cl-51755a64"><span class="cl-51743b98">2,609</span></p></td><td class="cl-5175674a"><p class="cl-51755a64"><span class="cl-51743b98">16.48</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-51756752"><p class="cl-51755a5a"><span class="cl-51743b98">chapter7</span></p></td><td class="cl-51756753"><p class="cl-51755a64"><span class="cl-51743b98">51</span></p></td><td class="cl-51756753"><p class="cl-51755a64"><span class="cl-51743b98">2,307</span></p></td><td class="cl-5175675c"><p class="cl-51755a64"><span class="cl-51743b98">22.11</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-51756748"><p class="cl-51755a5a"><span class="cl-51743b98">chapter8</span></p></td><td class="cl-51756749"><p class="cl-51755a64"><span class="cl-51743b98">39</span></p></td><td class="cl-51756749"><p class="cl-51755a64"><span class="cl-51743b98">2,487</span></p></td><td class="cl-5175674a"><p class="cl-51755a64"><span class="cl-51743b98">15.68</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-51756752"><p class="cl-51755a5a"><span class="cl-51743b98">chapter9</span></p></td><td class="cl-51756753"><p class="cl-51755a64"><span class="cl-51743b98">52</span></p></td><td class="cl-51756753"><p class="cl-51755a64"><span class="cl-51743b98">2,272</span></p></td><td class="cl-5175675c"><p class="cl-51755a64"><span class="cl-51743b98">22.89</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-51756748"><p class="cl-51755a5a"><span class="cl-51743b98">chapter10</span></p></td><td class="cl-51756749"><p class="cl-51755a64"><span class="cl-51743b98">30</span></p></td><td class="cl-51756749"><p class="cl-51755a64"><span class="cl-51743b98">2,058</span></p></td><td class="cl-5175674a"><p class="cl-51755a64"><span class="cl-51743b98">14.58</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-51756752"><p class="cl-51755a5a"><span class="cl-51743b98">chapter11</span></p></td><td class="cl-51756753"><p class="cl-51755a64"><span class="cl-51743b98">16</span></p></td><td class="cl-51756753"><p class="cl-51755a64"><span class="cl-51743b98">1,886</span></p></td><td class="cl-5175675c"><p class="cl-51755a64"><span class="cl-51743b98">8.48</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5175675d"><p class="cl-51755a5a"><span class="cl-51743b98">chapter12</span></p></td><td class="cl-5175675e"><p class="cl-51755a64"><span class="cl-51743b98">23</span></p></td><td class="cl-5175675e"><p class="cl-51755a64"><span class="cl-51743b98">2,153</span></p></td><td class="cl-51756766"><p class="cl-51755a64"><span class="cl-51743b98">10.68</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>Now, let’s visualize the relative frequencies of our search term in each chapter.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create a plot using ggplot</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(tb, <span class="fu">aes</span>(<span class="at">x =</span> Chapters, <span class="at">y =</span> Frequency, <span class="at">group =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add a smoothed line (trendline) in purple color</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">color =</span> <span class="st">"purple"</span>) <span class="sc">+</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add a line plot in dark gray color</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">"darkgray"</span>) <span class="sc">+</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># remove fill from the legend</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">color =</span> <span class="fu">guide_legend</span>(<span class="at">override.aes =</span> <span class="fu">list</span>(<span class="at">fill =</span> <span class="cn">NA</span>))) <span class="sc">+</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># set a white and black theme</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># rotate x-axis text by 45 degrees and adjust alignment</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># customize the y-axis label</span></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">"Relative Frequency (per 1,000 words)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="textanalysis_files/figure-html/wf18-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="dispersion-plots" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="dispersion-plots">Dispersion plots</h2>
<p>To show when in a text or in a collection of texts certain terms occur, we can use <em>dispersion plots</em>. The <code>quanteda</code> package offers a very easy-to-use function <code>textplot_xray</code> to generate dispersion plots.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># add chapter names</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(text_chapters) <span class="ot">&lt;-</span> Chapters</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="co"># generate corpus from chapters</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Assuming text_chapters is your character vector</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="co"># text_corpus &lt;- quanteda::corpus(text_chapters)</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a tokens object</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>text_corpus <span class="ot">&lt;-</span> quanteda<span class="sc">::</span><span class="fu">tokens</span>(text_chapters)</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a><span class="co"># generate dispersion plots</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>quanteda.textplots<span class="sc">::</span><span class="fu">textplot_xray</span>(<span class="fu">kwic</span>(text_corpus, <span class="at">pattern =</span> <span class="st">"alice"</span>),</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kwic</span>(text_corpus, <span class="at">pattern =</span> <span class="st">"hatter"</span>),</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">sort =</span> T</span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="textanalysis_files/figure-html/dp-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>We can modify the plot by saving it into an object and then use <code>ggplot</code> to modify it appearance.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># generate and save dispersion plots</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>dp <span class="ot">&lt;-</span> quanteda.textplots<span class="sc">::</span><span class="fu">textplot_xray</span>(</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kwic</span>(text_corpus, <span class="at">pattern =</span> <span class="st">"alice"</span>),</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kwic</span>(text_corpus, <span class="at">pattern =</span> <span class="st">"cat"</span>)</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a><span class="co"># modify plot</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>dp <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">color =</span> keyword) <span class="sc">+</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"red"</span>, <span class="st">"blue"</span>)) <span class="sc">+</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="textanalysis_files/figure-html/dp2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="over--and-underuse" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="over--and-underuse">Over- and underuse</h2>
<p>Frequency data serves as a valuable lens through which we can explore the essence of a text. For instance, when we examine private dialogues, we often encounter higher occurrences of second-person pronouns compared to more formal text types like scripted monologues or speeches. This insight holds the potential to aid in text classification and assessing text formality.</p>
<p>To illustrate, consider the following statistics: the counts of second-person pronouns, <em>you</em> and <em>your</em>, as well as the total word count excluding these pronouns in private dialogues versus scripted monologues within the Irish segment of the International Corpus of English (ICE). Additionally, the tables provide the percentage of second-person pronouns in both text types, enabling us to discern whether private dialogues indeed contain more of these pronouns compared to scripted monologues, such as speeches.</p>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-521425c2{table-layout:auto;width:50%;}.cl-52115496{font-family:'Helvetica';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-52115497{font-family:'Helvetica';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-52127ba0{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-521287bc{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-521287bd{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-521287c6{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-521287d0{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-521287d1{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-521287da{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-521287db{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-521287dc{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-521287e4{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-521287ee{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-521287f8{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-521287f9{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-521425c2"><thead><tr style="overflow-wrap:break-word;"><th class="cl-521287bc"><p class="cl-52127ba0"><span class="cl-52115496">.</span></p></th><th class="cl-521287bd"><p class="cl-52127ba0"><span class="cl-52115496">Private dialogues</span></p></th><th class="cl-521287c6"><p class="cl-52127ba0"><span class="cl-52115496">Scripted monologues</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-521287d0"><p class="cl-52127ba0"><span class="cl-52115497">you, your</span></p></td><td class="cl-521287d1"><p class="cl-52127ba0"><span class="cl-52115497">6761</span></p></td><td class="cl-521287da"><p class="cl-52127ba0"><span class="cl-52115497">659</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-521287db"><p class="cl-52127ba0"><span class="cl-52115497">Other words</span></p></td><td class="cl-521287dc"><p class="cl-52127ba0"><span class="cl-52115497">259625</span></p></td><td class="cl-521287e4"><p class="cl-52127ba0"><span class="cl-52115497">105295</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-521287ee"><p class="cl-52127ba0"><span class="cl-52115497">Percent</span></p></td><td class="cl-521287f8"><p class="cl-52127ba0"><span class="cl-52115497">2.60</span></p></td><td class="cl-521287f9"><p class="cl-52127ba0"><span class="cl-52115497">0.63</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>This straightforward example highlights that second-person pronouns constitute 2.6 percent of all words in private dialogues, yet they represent only 0.63 percent in scripted speeches. To vividly illustrate such variations, we can employ association and mosaic plots, which offer effective visual presentations.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create a matrix 'd' with the specified values and dimensions</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">6761</span>, <span class="dv">659</span>, <span class="dv">259625</span>, <span class="dv">105295</span>), <span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="co"># assign column names to the matrix</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(d) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"D"</span>, <span class="st">"M"</span>)</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="co"># assign row names to the matrix</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(d) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"you, your"</span>, <span class="st">"Other words"</span>)</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="co"># generate an association plot using 'assocplot' function</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="fu">assocplot</span>(d)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="textanalysis_files/figure-html/ou2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>In an association plot, bars above the dashed line signify relative overuse, while bars below indicate relative underuse. Accordingly, the plot reveals that in monologues, there’s an underuse of <em>you</em> and <em>your</em> and an overuse of <em>other words</em>. Conversely, in dialogues, the opposite patterns emerge: an overuse of <em>you</em> and <em>your</em> and an underuse of <em>other words</em>. This visual representation helps us grasp the distinctive word usage patterns between these text types.</p>
</section>
</section>
<section id="collocations" class="level1 unnumbered">
<h1 class="unnumbered">Collocations</h1>
<p>Collocations are like linguistic buddies. They’re those word pairs that just seem to go hand in hand, like <em>Merry Christmas</em>. You see, these words have a special relationship – they occur together way more often than if words were just randomly strung together in a sentence.</p>
<p>Before we start tough, it is important to understand that identifying words pairs (w1 and w2) that collocate (i.e.&nbsp;collocations) and determining their association strength (a measure of how strongly attracted words are to each other) is based on the co-occurrence frequencies of word pairs in a contingency table (see below, <em>O</em> is short for <em>observed frequency</em>).</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: center;">w<sub>2</sub> present</th>
<th style="text-align: right;">w<sub>2</sub> absent</th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>w<sub>1</sub> present</strong></td>
<td style="text-align: center;">O<sub>11</sub></td>
<td style="text-align: right;">O<sub>12</sub></td>
<td>= R<sub>1</sub></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>w<sub>1</sub> absent</strong></td>
<td style="text-align: center;">O<sub>21</sub></td>
<td style="text-align: right;">O<sub>22</sub></td>
<td>= R<sub>2</sub></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: center;">= C<sub>1</sub></td>
<td style="text-align: right;">= C<sub>2</sub></td>
<td>= N</td>
</tr>
</tbody>
</table>
<p>In the following, we will extract collocations from the sentences in our example text. In a first step, we split our example text into sentences and clean the data (removing punctuation, converting to lower case, etc.).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>text <span class="sc">%&gt;%</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># concatenate the elements in the 'text' object</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste0</span>(<span class="at">collapse =</span> <span class="st">" "</span>) <span class="sc">%&gt;%</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># split text into sentences</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>  tokenizers<span class="sc">::</span><span class="fu">tokenize_sentences</span>() <span class="sc">%&gt;%</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># unlist sentences</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unlist</span>() <span class="sc">%&gt;%</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># remove non-word characters</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">W"</span>, <span class="st">" "</span>) <span class="sc">%&gt;%</span></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(<span class="st">"[^[:alnum:] ]"</span>, <span class="st">" "</span>) <span class="sc">%&gt;%</span></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># remove superfluous white spaces</span></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_squish</span>() <span class="sc">%&gt;%</span></span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># convert to lower case and save in 'sentences' object</span></span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tolower</span>() <span class="ot">-&gt;</span> sentences</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-522705e8{table-layout:auto;width:95%;}.cl-522444c0{font-family:'Helvetica';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-522444ca{font-family:'Helvetica';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-52256184{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-52256d32{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-52256d3c{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-52256d3d{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-52256d3e{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-522705e8"><thead><tr style="overflow-wrap:break-word;"><th class="cl-52256d32"><p class="cl-52256184"><span class="cl-522444c0">.</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-52256d3c"><p class="cl-52256184"><span class="cl-522444ca">alice s adventures in wonderland by lewis carroll chapter i</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-52256d3d"><p class="cl-52256184"><span class="cl-522444ca">down the rabbit hole alice was beginning to get very tired of sitting by her sister on the bank and of having nothing to do once or twice she had peeped into the book her sister was reading but it had no pictures or conversations in it and what is the use of a book thought alice without pictures or conversations</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-52256d3c"><p class="cl-52256184"><span class="cl-522444ca">so she was considering in her own mind as well as she could for the hot day made her feel very sleepy and stupid whether the pleasure of making a daisy chain would be worth the trouble of getting up and picking the daisies when suddenly a white rabbit with pink eyes ran close by her</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-52256d3d"><p class="cl-52256184"><span class="cl-522444ca">there was nothing so very remarkable in that nor did alice think it so very much out of the way to hear the rabbit say to itself oh dear</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-52256d3c"><p class="cl-52256184"><span class="cl-522444ca">oh dear</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-52256d3d"><p class="cl-52256184"><span class="cl-522444ca">i shall be late</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-52256d3c"><p class="cl-52256184"><span class="cl-522444ca">when she thought it over afterwards it occurred to her that she ought to have wondered at this but at the time it all seemed quite natural but when the rabbit actually took a watch out of its waistcoat pocket and looked at it and then hurried on alice started to her feet for it flashed across her mind that she had never before seen a rabbit with either a waistcoat pocket or a watch to take out of it and burning with curiosity she ran across the field after it and fortunately was just in time to see it pop down a large rabbit hole under the hedge</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-52256d3d"><p class="cl-52256184"><span class="cl-522444ca">in another moment down went alice after it never once considering how in the world she was to get out again</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-52256d3c"><p class="cl-52256184"><span class="cl-522444ca">the rabbit hole went straight on like a tunnel for some way and then dipped suddenly down so suddenly that alice had not a moment to think about stopping herself before she found herself falling down a very deep well</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-52256d3e"><p class="cl-52256184"><span class="cl-522444ca">either the well was very deep or she fell very slowly for she had plenty of time as she went down to look about her and to wonder what was going to happen next</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>Next, we tabulate the data and reformat it so that we have the relevant information to calculate the association statistics (word 1 and word 2 as well as O11, O12, O21, and O22).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tokenize the 'sentences' data using quanteda package</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>sentences <span class="sc">%&gt;%</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  quanteda<span class="sc">::</span><span class="fu">tokens</span>() <span class="sc">%&gt;%</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># create a document-feature matrix (dfm) using quanteda</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>  quanteda<span class="sc">::</span><span class="fu">dfm</span>() <span class="sc">%&gt;%</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># create a feature co-occurrence matrix (fcm) without considering trigrams</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>  quanteda<span class="sc">::</span><span class="fu">fcm</span>(<span class="at">tri =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># tidy the data using tidytext package</span></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>  tidytext<span class="sc">::</span><span class="fu">tidy</span>() <span class="sc">%&gt;%</span></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># rearrange columns for better readability</span></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">relocate</span>(term, document, count) <span class="sc">%&gt;%</span></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># rename columns for better interpretation</span></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(</span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">w1 =</span> <span class="dv">1</span>,</span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">w2 =</span> <span class="dv">2</span>,</span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">O11 =</span> <span class="dv">3</span></span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a>  ) <span class="ot">-&gt;</span> coll_basic</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-5262e5ae{table-layout:auto;width:95%;}.cl-52601fa4{font-family:'Helvetica';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-52601fae{font-family:'Helvetica';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-52613e7a{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-52613e84{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-52614b0e{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-52614b0f{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-52614b18{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-52614b19{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-52614b22{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-52614b23{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-52614b2c{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-52614b2d{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-52614b2e{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-52614b36{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-52614b37{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-52614b38{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-5262e5ae"><thead><tr style="overflow-wrap:break-word;"><th class="cl-52614b0e"><p class="cl-52613e7a"><span class="cl-52601fa4">w1</span></p></th><th class="cl-52614b0f"><p class="cl-52613e7a"><span class="cl-52601fa4">w2</span></p></th><th class="cl-52614b18"><p class="cl-52613e84"><span class="cl-52601fa4">O11</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-52614b19"><p class="cl-52613e7a"><span class="cl-52601fae">alice</span></p></td><td class="cl-52614b22"><p class="cl-52613e7a"><span class="cl-52601fae">alice</span></p></td><td class="cl-52614b23"><p class="cl-52613e84"><span class="cl-52601fae">11</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-52614b2c"><p class="cl-52613e7a"><span class="cl-52601fae">alice</span></p></td><td class="cl-52614b2d"><p class="cl-52613e7a"><span class="cl-52601fae">s</span></p></td><td class="cl-52614b2e"><p class="cl-52613e84"><span class="cl-52601fae">67</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-52614b19"><p class="cl-52613e7a"><span class="cl-52601fae">alice</span></p></td><td class="cl-52614b22"><p class="cl-52613e7a"><span class="cl-52601fae">adventures</span></p></td><td class="cl-52614b23"><p class="cl-52613e84"><span class="cl-52601fae">6</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-52614b2c"><p class="cl-52613e7a"><span class="cl-52601fae">alice</span></p></td><td class="cl-52614b2d"><p class="cl-52613e7a"><span class="cl-52601fae">in</span></p></td><td class="cl-52614b2e"><p class="cl-52613e84"><span class="cl-52601fae">137</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-52614b19"><p class="cl-52613e7a"><span class="cl-52601fae">alice</span></p></td><td class="cl-52614b22"><p class="cl-52613e7a"><span class="cl-52601fae">wonderland</span></p></td><td class="cl-52614b23"><p class="cl-52613e84"><span class="cl-52601fae">1</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-52614b2c"><p class="cl-52613e7a"><span class="cl-52601fae">alice</span></p></td><td class="cl-52614b2d"><p class="cl-52613e7a"><span class="cl-52601fae">by</span></p></td><td class="cl-52614b2e"><p class="cl-52613e84"><span class="cl-52601fae">18</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-52614b19"><p class="cl-52613e7a"><span class="cl-52601fae">alice</span></p></td><td class="cl-52614b22"><p class="cl-52613e7a"><span class="cl-52601fae">lewis</span></p></td><td class="cl-52614b23"><p class="cl-52613e84"><span class="cl-52601fae">1</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-52614b2c"><p class="cl-52613e7a"><span class="cl-52601fae">alice</span></p></td><td class="cl-52614b2d"><p class="cl-52613e7a"><span class="cl-52601fae">carroll</span></p></td><td class="cl-52614b2e"><p class="cl-52613e84"><span class="cl-52601fae">1</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-52614b19"><p class="cl-52613e7a"><span class="cl-52601fae">alice</span></p></td><td class="cl-52614b22"><p class="cl-52613e7a"><span class="cl-52601fae">chapter</span></p></td><td class="cl-52614b23"><p class="cl-52613e84"><span class="cl-52601fae">1</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-52614b36"><p class="cl-52613e7a"><span class="cl-52601fae">alice</span></p></td><td class="cl-52614b37"><p class="cl-52613e7a"><span class="cl-52601fae">i</span></p></td><td class="cl-52614b38"><p class="cl-52613e84"><span class="cl-52601fae">163</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>We now enhance our table by calculating all observed frequencies (O11, O12, O21, O22) as well as row totals (R1, R2), column totals (C1, C2), and the overall total (N).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate the total number of observations (N)</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>coll_basic <span class="sc">%&gt;%</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">N =</span> <span class="fu">sum</span>(O11)) <span class="sc">%&gt;%</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># calculate R1, O12, and R2</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(w1) <span class="sc">%&gt;%</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">R1 =</span> <span class="fu">sum</span>(O11),</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">O12 =</span> R1 <span class="sc">-</span> O11,</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">R2 =</span> N <span class="sc">-</span> R1</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">ungroup</span>(w1) <span class="sc">%&gt;%</span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># calculate C1, O21, C2, and O22</span></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(w2) <span class="sc">%&gt;%</span></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">C1 =</span> <span class="fu">sum</span>(O11),</span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">O21 =</span> C1 <span class="sc">-</span> O11,</span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">C2 =</span> N <span class="sc">-</span> C1,</span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">O22 =</span> R2 <span class="sc">-</span> O21</span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a>  ) <span class="ot">-&gt;</span> colldf</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-52e4c934{table-layout:auto;width:95%;}.cl-52e1a9c0{font-family:'Helvetica';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-52e1a9c1{font-family:'Helvetica';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-52e2daf2{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-52e2dafc{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-52e2e862{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-52e2e863{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-52e2e864{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-52e2e86c{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-52e2e86d{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-52e2e876{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-52e2e877{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-52e2e878{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-52e2e879{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-52e2e880{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-52e2e881{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-52e2e882{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-52e2e883{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-52e2e88a{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-52e2e88b{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-52e2e88c{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-52e4c934"><thead><tr style="overflow-wrap:break-word;"><th class="cl-52e2e862"><p class="cl-52e2daf2"><span class="cl-52e1a9c0">w1</span></p></th><th class="cl-52e2e863"><p class="cl-52e2daf2"><span class="cl-52e1a9c0">w2</span></p></th><th class="cl-52e2e864"><p class="cl-52e2dafc"><span class="cl-52e1a9c0">O11</span></p></th><th class="cl-52e2e864"><p class="cl-52e2dafc"><span class="cl-52e1a9c0">N</span></p></th><th class="cl-52e2e864"><p class="cl-52e2dafc"><span class="cl-52e1a9c0">R1</span></p></th><th class="cl-52e2e864"><p class="cl-52e2dafc"><span class="cl-52e1a9c0">O12</span></p></th><th class="cl-52e2e864"><p class="cl-52e2dafc"><span class="cl-52e1a9c0">R2</span></p></th><th class="cl-52e2e864"><p class="cl-52e2dafc"><span class="cl-52e1a9c0">C1</span></p></th><th class="cl-52e2e864"><p class="cl-52e2dafc"><span class="cl-52e1a9c0">O21</span></p></th><th class="cl-52e2e864"><p class="cl-52e2dafc"><span class="cl-52e1a9c0">C2</span></p></th><th class="cl-52e2e86c"><p class="cl-52e2dafc"><span class="cl-52e1a9c0">O22</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-52e2e86d"><p class="cl-52e2daf2"><span class="cl-52e1a9c1">alice</span></p></td><td class="cl-52e2e876"><p class="cl-52e2daf2"><span class="cl-52e1a9c1">alice</span></p></td><td class="cl-52e2e877"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">11</span></p></td><td class="cl-52e2e877"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">890,202</span></p></td><td class="cl-52e2e877"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">9,690</span></p></td><td class="cl-52e2e877"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">9,679</span></p></td><td class="cl-52e2e877"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">880,512</span></p></td><td class="cl-52e2e877"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">9,690</span></p></td><td class="cl-52e2e877"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">9,679</span></p></td><td class="cl-52e2e877"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">880,512</span></p></td><td class="cl-52e2e878"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">870,833</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-52e2e879"><p class="cl-52e2daf2"><span class="cl-52e1a9c1">alice</span></p></td><td class="cl-52e2e880"><p class="cl-52e2daf2"><span class="cl-52e1a9c1">s</span></p></td><td class="cl-52e2e881"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">67</span></p></td><td class="cl-52e2e881"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">890,202</span></p></td><td class="cl-52e2e881"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">9,690</span></p></td><td class="cl-52e2e881"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">9,623</span></p></td><td class="cl-52e2e881"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">880,512</span></p></td><td class="cl-52e2e881"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">4,812</span></p></td><td class="cl-52e2e881"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">4,745</span></p></td><td class="cl-52e2e881"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">885,390</span></p></td><td class="cl-52e2e882"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">875,767</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-52e2e86d"><p class="cl-52e2daf2"><span class="cl-52e1a9c1">alice</span></p></td><td class="cl-52e2e876"><p class="cl-52e2daf2"><span class="cl-52e1a9c1">adventures</span></p></td><td class="cl-52e2e877"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">6</span></p></td><td class="cl-52e2e877"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">890,202</span></p></td><td class="cl-52e2e877"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">9,690</span></p></td><td class="cl-52e2e877"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">9,684</span></p></td><td class="cl-52e2e877"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">880,512</span></p></td><td class="cl-52e2e877"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">263</span></p></td><td class="cl-52e2e877"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">257</span></p></td><td class="cl-52e2e877"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">889,939</span></p></td><td class="cl-52e2e878"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">880,255</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-52e2e879"><p class="cl-52e2daf2"><span class="cl-52e1a9c1">alice</span></p></td><td class="cl-52e2e880"><p class="cl-52e2daf2"><span class="cl-52e1a9c1">in</span></p></td><td class="cl-52e2e881"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">137</span></p></td><td class="cl-52e2e881"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">890,202</span></p></td><td class="cl-52e2e881"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">9,690</span></p></td><td class="cl-52e2e881"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">9,553</span></p></td><td class="cl-52e2e881"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">880,512</span></p></td><td class="cl-52e2e881"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">12,600</span></p></td><td class="cl-52e2e881"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">12,463</span></p></td><td class="cl-52e2e881"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">877,602</span></p></td><td class="cl-52e2e882"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">868,049</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-52e2e86d"><p class="cl-52e2daf2"><span class="cl-52e1a9c1">alice</span></p></td><td class="cl-52e2e876"><p class="cl-52e2daf2"><span class="cl-52e1a9c1">wonderland</span></p></td><td class="cl-52e2e877"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">1</span></p></td><td class="cl-52e2e877"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">890,202</span></p></td><td class="cl-52e2e877"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">9,690</span></p></td><td class="cl-52e2e877"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">9,689</span></p></td><td class="cl-52e2e877"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">880,512</span></p></td><td class="cl-52e2e877"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">229</span></p></td><td class="cl-52e2e877"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">228</span></p></td><td class="cl-52e2e877"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">889,973</span></p></td><td class="cl-52e2e878"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">880,284</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-52e2e879"><p class="cl-52e2daf2"><span class="cl-52e1a9c1">alice</span></p></td><td class="cl-52e2e880"><p class="cl-52e2daf2"><span class="cl-52e1a9c1">by</span></p></td><td class="cl-52e2e881"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">18</span></p></td><td class="cl-52e2e881"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">890,202</span></p></td><td class="cl-52e2e881"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">9,690</span></p></td><td class="cl-52e2e881"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">9,672</span></p></td><td class="cl-52e2e881"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">880,512</span></p></td><td class="cl-52e2e881"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">2,131</span></p></td><td class="cl-52e2e881"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">2,113</span></p></td><td class="cl-52e2e881"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">888,071</span></p></td><td class="cl-52e2e882"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">878,399</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-52e2e86d"><p class="cl-52e2daf2"><span class="cl-52e1a9c1">alice</span></p></td><td class="cl-52e2e876"><p class="cl-52e2daf2"><span class="cl-52e1a9c1">lewis</span></p></td><td class="cl-52e2e877"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">1</span></p></td><td class="cl-52e2e877"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">890,202</span></p></td><td class="cl-52e2e877"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">9,690</span></p></td><td class="cl-52e2e877"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">9,689</span></p></td><td class="cl-52e2e877"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">880,512</span></p></td><td class="cl-52e2e877"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">9</span></p></td><td class="cl-52e2e877"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">8</span></p></td><td class="cl-52e2e877"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">890,193</span></p></td><td class="cl-52e2e878"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">880,504</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-52e2e879"><p class="cl-52e2daf2"><span class="cl-52e1a9c1">alice</span></p></td><td class="cl-52e2e880"><p class="cl-52e2daf2"><span class="cl-52e1a9c1">carroll</span></p></td><td class="cl-52e2e881"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">1</span></p></td><td class="cl-52e2e881"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">890,202</span></p></td><td class="cl-52e2e881"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">9,690</span></p></td><td class="cl-52e2e881"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">9,689</span></p></td><td class="cl-52e2e881"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">880,512</span></p></td><td class="cl-52e2e881"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">9</span></p></td><td class="cl-52e2e881"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">8</span></p></td><td class="cl-52e2e881"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">890,193</span></p></td><td class="cl-52e2e882"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">880,504</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-52e2e86d"><p class="cl-52e2daf2"><span class="cl-52e1a9c1">alice</span></p></td><td class="cl-52e2e876"><p class="cl-52e2daf2"><span class="cl-52e1a9c1">chapter</span></p></td><td class="cl-52e2e877"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">1</span></p></td><td class="cl-52e2e877"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">890,202</span></p></td><td class="cl-52e2e877"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">9,690</span></p></td><td class="cl-52e2e877"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">9,689</span></p></td><td class="cl-52e2e877"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">880,512</span></p></td><td class="cl-52e2e877"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">20</span></p></td><td class="cl-52e2e877"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">19</span></p></td><td class="cl-52e2e877"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">890,182</span></p></td><td class="cl-52e2e878"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">880,493</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-52e2e883"><p class="cl-52e2daf2"><span class="cl-52e1a9c1">alice</span></p></td><td class="cl-52e2e88a"><p class="cl-52e2daf2"><span class="cl-52e1a9c1">i</span></p></td><td class="cl-52e2e88b"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">163</span></p></td><td class="cl-52e2e88b"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">890,202</span></p></td><td class="cl-52e2e88b"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">9,690</span></p></td><td class="cl-52e2e88b"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">9,527</span></p></td><td class="cl-52e2e88b"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">880,512</span></p></td><td class="cl-52e2e88b"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">11,764</span></p></td><td class="cl-52e2e88b"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">11,601</span></p></td><td class="cl-52e2e88b"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">878,438</span></p></td><td class="cl-52e2e88c"><p class="cl-52e2dafc"><span class="cl-52e1a9c1">868,911</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>We could calculate all collocations in the corpus (based on co-occurrence within the same sentence) or we can find collocations of a specific term - here, we will find collocations fo the term <em>alice</em>.</p>
<p>Now that we have all the relevant information, we will reduce the data and add additional information to the data so that the computing of the association measures runs smoothly.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># reduce and complement data</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>colldf <span class="sc">%&gt;%</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># determine Term</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>    w1 <span class="sc">==</span> <span class="st">"alice"</span>,</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># set minimum number of occurrences of w2</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>    (O11 <span class="sc">+</span> O21) <span class="sc">&gt;</span> <span class="dv">10</span>,</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># set minimum number of co-occurrences of w1 and w2</span></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>    O11 <span class="sc">&gt;</span> <span class="dv">5</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rowwise</span>() <span class="sc">%&gt;%</span></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">E11 =</span> R1 <span class="sc">*</span> C1 <span class="sc">/</span> N,</span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">E12 =</span> R1 <span class="sc">*</span> C2 <span class="sc">/</span> N,</span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">E21 =</span> R2 <span class="sc">*</span> C1 <span class="sc">/</span> N,</span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">E22 =</span> R2 <span class="sc">*</span> C2 <span class="sc">/</span> N</span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a>  ) <span class="ot">-&gt;</span> colldf_redux</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-52fbe736{table-layout:auto;width:95%;}.cl-52f86bd8{font-family:'Helvetica';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-52f86be2{font-family:'Helvetica';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-52f9bcfe{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-52f9bd08{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-52f9ccd0{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-52f9ccda{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-52f9ccdb{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-52f9cce4{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-52f9cce5{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-52f9ccee{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-52f9ccef{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-52f9ccf8{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-52f9ccf9{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-52f9ccfa{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-52f9cd02{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-52f9cd03{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-52f9cd04{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-52f9cd0c{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-52f9cd0d{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-52f9cd16{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-52fbe736"><thead><tr style="overflow-wrap:break-word;"><th class="cl-52f9ccd0"><p class="cl-52f9bcfe"><span class="cl-52f86bd8">w1</span></p></th><th class="cl-52f9ccda"><p class="cl-52f9bcfe"><span class="cl-52f86bd8">w2</span></p></th><th class="cl-52f9ccdb"><p class="cl-52f9bd08"><span class="cl-52f86bd8">O11</span></p></th><th class="cl-52f9ccdb"><p class="cl-52f9bd08"><span class="cl-52f86bd8">N</span></p></th><th class="cl-52f9ccdb"><p class="cl-52f9bd08"><span class="cl-52f86bd8">R1</span></p></th><th class="cl-52f9ccdb"><p class="cl-52f9bd08"><span class="cl-52f86bd8">O12</span></p></th><th class="cl-52f9ccdb"><p class="cl-52f9bd08"><span class="cl-52f86bd8">R2</span></p></th><th class="cl-52f9ccdb"><p class="cl-52f9bd08"><span class="cl-52f86bd8">C1</span></p></th><th class="cl-52f9ccdb"><p class="cl-52f9bd08"><span class="cl-52f86bd8">O21</span></p></th><th class="cl-52f9ccdb"><p class="cl-52f9bd08"><span class="cl-52f86bd8">C2</span></p></th><th class="cl-52f9ccdb"><p class="cl-52f9bd08"><span class="cl-52f86bd8">O22</span></p></th><th class="cl-52f9ccdb"><p class="cl-52f9bd08"><span class="cl-52f86bd8">E11</span></p></th><th class="cl-52f9ccdb"><p class="cl-52f9bd08"><span class="cl-52f86bd8">E12</span></p></th><th class="cl-52f9ccdb"><p class="cl-52f9bd08"><span class="cl-52f86bd8">E21</span></p></th><th class="cl-52f9cce4"><p class="cl-52f9bd08"><span class="cl-52f86bd8">E22</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-52f9cce5"><p class="cl-52f9bcfe"><span class="cl-52f86be2">alice</span></p></td><td class="cl-52f9ccee"><p class="cl-52f9bcfe"><span class="cl-52f86be2">alice</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">11</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">890,202</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">9,690</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">9,679</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">880,512</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">9,690</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">9,679</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">880,512</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">870,833</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">105.47730</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">9,584.523</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">9,584.5227</span></p></td><td class="cl-52f9ccf8"><p class="cl-52f9bd08"><span class="cl-52f86be2">870,927.5</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-52f9ccf9"><p class="cl-52f9bcfe"><span class="cl-52f86be2">alice</span></p></td><td class="cl-52f9ccfa"><p class="cl-52f9bcfe"><span class="cl-52f86be2">s</span></p></td><td class="cl-52f9cd02"><p class="cl-52f9bd08"><span class="cl-52f86be2">67</span></p></td><td class="cl-52f9cd02"><p class="cl-52f9bd08"><span class="cl-52f86be2">890,202</span></p></td><td class="cl-52f9cd02"><p class="cl-52f9bd08"><span class="cl-52f86be2">9,690</span></p></td><td class="cl-52f9cd02"><p class="cl-52f9bd08"><span class="cl-52f86be2">9,623</span></p></td><td class="cl-52f9cd02"><p class="cl-52f9bd08"><span class="cl-52f86be2">880,512</span></p></td><td class="cl-52f9cd02"><p class="cl-52f9bd08"><span class="cl-52f86be2">4,812</span></p></td><td class="cl-52f9cd02"><p class="cl-52f9bd08"><span class="cl-52f86be2">4,745</span></p></td><td class="cl-52f9cd02"><p class="cl-52f9bd08"><span class="cl-52f86be2">885,390</span></p></td><td class="cl-52f9cd02"><p class="cl-52f9bd08"><span class="cl-52f86be2">875,767</span></p></td><td class="cl-52f9cd02"><p class="cl-52f9bd08"><span class="cl-52f86be2">52.37944</span></p></td><td class="cl-52f9cd02"><p class="cl-52f9bd08"><span class="cl-52f86be2">9,637.621</span></p></td><td class="cl-52f9cd02"><p class="cl-52f9bd08"><span class="cl-52f86be2">4,759.6206</span></p></td><td class="cl-52f9cd03"><p class="cl-52f9bd08"><span class="cl-52f86be2">875,752.4</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-52f9cce5"><p class="cl-52f9bcfe"><span class="cl-52f86be2">alice</span></p></td><td class="cl-52f9ccee"><p class="cl-52f9bcfe"><span class="cl-52f86be2">adventures</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">6</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">890,202</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">9,690</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">9,684</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">880,512</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">263</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">257</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">889,939</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">880,255</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">2.86280</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">9,687.137</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">260.1372</span></p></td><td class="cl-52f9ccf8"><p class="cl-52f9bd08"><span class="cl-52f86be2">880,251.9</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-52f9ccf9"><p class="cl-52f9bcfe"><span class="cl-52f86be2">alice</span></p></td><td class="cl-52f9ccfa"><p class="cl-52f9bcfe"><span class="cl-52f86be2">in</span></p></td><td class="cl-52f9cd02"><p class="cl-52f9bd08"><span class="cl-52f86be2">137</span></p></td><td class="cl-52f9cd02"><p class="cl-52f9bd08"><span class="cl-52f86be2">890,202</span></p></td><td class="cl-52f9cd02"><p class="cl-52f9bd08"><span class="cl-52f86be2">9,690</span></p></td><td class="cl-52f9cd02"><p class="cl-52f9bd08"><span class="cl-52f86be2">9,553</span></p></td><td class="cl-52f9cd02"><p class="cl-52f9bd08"><span class="cl-52f86be2">880,512</span></p></td><td class="cl-52f9cd02"><p class="cl-52f9bd08"><span class="cl-52f86be2">12,600</span></p></td><td class="cl-52f9cd02"><p class="cl-52f9bd08"><span class="cl-52f86be2">12,463</span></p></td><td class="cl-52f9cd02"><p class="cl-52f9bd08"><span class="cl-52f86be2">877,602</span></p></td><td class="cl-52f9cd02"><p class="cl-52f9bd08"><span class="cl-52f86be2">868,049</span></p></td><td class="cl-52f9cd02"><p class="cl-52f9bd08"><span class="cl-52f86be2">137.15314</span></p></td><td class="cl-52f9cd02"><p class="cl-52f9bd08"><span class="cl-52f86be2">9,552.847</span></p></td><td class="cl-52f9cd02"><p class="cl-52f9bd08"><span class="cl-52f86be2">12,462.8469</span></p></td><td class="cl-52f9cd03"><p class="cl-52f9bd08"><span class="cl-52f86be2">868,049.2</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-52f9cce5"><p class="cl-52f9bcfe"><span class="cl-52f86be2">alice</span></p></td><td class="cl-52f9ccee"><p class="cl-52f9bcfe"><span class="cl-52f86be2">by</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">18</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">890,202</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">9,690</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">9,672</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">880,512</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">2,131</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">2,113</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">888,071</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">878,399</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">23.19630</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">9,666.804</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">2,107.8037</span></p></td><td class="cl-52f9ccf8"><p class="cl-52f9bd08"><span class="cl-52f86be2">878,404.2</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-52f9ccf9"><p class="cl-52f9bcfe"><span class="cl-52f86be2">alice</span></p></td><td class="cl-52f9ccfa"><p class="cl-52f9bcfe"><span class="cl-52f86be2">i</span></p></td><td class="cl-52f9cd02"><p class="cl-52f9bd08"><span class="cl-52f86be2">163</span></p></td><td class="cl-52f9cd02"><p class="cl-52f9bd08"><span class="cl-52f86be2">890,202</span></p></td><td class="cl-52f9cd02"><p class="cl-52f9bd08"><span class="cl-52f86be2">9,690</span></p></td><td class="cl-52f9cd02"><p class="cl-52f9bd08"><span class="cl-52f86be2">9,527</span></p></td><td class="cl-52f9cd02"><p class="cl-52f9bd08"><span class="cl-52f86be2">880,512</span></p></td><td class="cl-52f9cd02"><p class="cl-52f9bd08"><span class="cl-52f86be2">11,764</span></p></td><td class="cl-52f9cd02"><p class="cl-52f9bd08"><span class="cl-52f86be2">11,601</span></p></td><td class="cl-52f9cd02"><p class="cl-52f9bd08"><span class="cl-52f86be2">878,438</span></p></td><td class="cl-52f9cd02"><p class="cl-52f9bd08"><span class="cl-52f86be2">868,911</span></p></td><td class="cl-52f9cd02"><p class="cl-52f9bd08"><span class="cl-52f86be2">128.05314</span></p></td><td class="cl-52f9cd02"><p class="cl-52f9bd08"><span class="cl-52f86be2">9,561.947</span></p></td><td class="cl-52f9cd02"><p class="cl-52f9bd08"><span class="cl-52f86be2">11,635.9469</span></p></td><td class="cl-52f9cd03"><p class="cl-52f9bd08"><span class="cl-52f86be2">868,876.1</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-52f9cce5"><p class="cl-52f9bcfe"><span class="cl-52f86be2">alice</span></p></td><td class="cl-52f9ccee"><p class="cl-52f9bcfe"><span class="cl-52f86be2">down</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">37</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">890,202</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">9,690</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">9,653</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">880,512</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">3,494</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">3,457</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">886,708</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">877,055</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">38.03278</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">9,651.967</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">3,455.9672</span></p></td><td class="cl-52f9ccf8"><p class="cl-52f9bd08"><span class="cl-52f86be2">877,056.0</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-52f9ccf9"><p class="cl-52f9bcfe"><span class="cl-52f86be2">alice</span></p></td><td class="cl-52f9ccfa"><p class="cl-52f9bcfe"><span class="cl-52f86be2">the</span></p></td><td class="cl-52f9cd02"><p class="cl-52f9bd08"><span class="cl-52f86be2">477</span></p></td><td class="cl-52f9cd02"><p class="cl-52f9bd08"><span class="cl-52f86be2">890,202</span></p></td><td class="cl-52f9cd02"><p class="cl-52f9bd08"><span class="cl-52f86be2">9,690</span></p></td><td class="cl-52f9cd02"><p class="cl-52f9bd08"><span class="cl-52f86be2">9,213</span></p></td><td class="cl-52f9cd02"><p class="cl-52f9bd08"><span class="cl-52f86be2">880,512</span></p></td><td class="cl-52f9cd02"><p class="cl-52f9bd08"><span class="cl-52f86be2">53,304</span></p></td><td class="cl-52f9cd02"><p class="cl-52f9bd08"><span class="cl-52f86be2">52,827</span></p></td><td class="cl-52f9cd02"><p class="cl-52f9bd08"><span class="cl-52f86be2">836,898</span></p></td><td class="cl-52f9cd02"><p class="cl-52f9bd08"><span class="cl-52f86be2">827,685</span></p></td><td class="cl-52f9cd02"><p class="cl-52f9bd08"><span class="cl-52f86be2">580.22310</span></p></td><td class="cl-52f9cd02"><p class="cl-52f9bd08"><span class="cl-52f86be2">9,109.777</span></p></td><td class="cl-52f9cd02"><p class="cl-52f9bd08"><span class="cl-52f86be2">52,723.7769</span></p></td><td class="cl-52f9cd03"><p class="cl-52f9bd08"><span class="cl-52f86be2">827,788.2</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-52f9cce5"><p class="cl-52f9bcfe"><span class="cl-52f86be2">alice</span></p></td><td class="cl-52f9ccee"><p class="cl-52f9bcfe"><span class="cl-52f86be2">rabbit</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">23</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">890,202</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">9,690</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">9,667</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">880,512</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">1,710</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">1,687</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">888,492</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">878,825</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">18.61364</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">9,671.386</span></p></td><td class="cl-52f9ccef"><p class="cl-52f9bd08"><span class="cl-52f86be2">1,691.3864</span></p></td><td class="cl-52f9ccf8"><p class="cl-52f9bd08"><span class="cl-52f86be2">878,820.6</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-52f9cd04"><p class="cl-52f9bcfe"><span class="cl-52f86be2">alice</span></p></td><td class="cl-52f9cd0c"><p class="cl-52f9bcfe"><span class="cl-52f86be2">was</span></p></td><td class="cl-52f9cd0d"><p class="cl-52f9bd08"><span class="cl-52f86be2">155</span></p></td><td class="cl-52f9cd0d"><p class="cl-52f9bd08"><span class="cl-52f86be2">890,202</span></p></td><td class="cl-52f9cd0d"><p class="cl-52f9bd08"><span class="cl-52f86be2">9,690</span></p></td><td class="cl-52f9cd0d"><p class="cl-52f9bd08"><span class="cl-52f86be2">9,535</span></p></td><td class="cl-52f9cd0d"><p class="cl-52f9bd08"><span class="cl-52f86be2">880,512</span></p></td><td class="cl-52f9cd0d"><p class="cl-52f9bd08"><span class="cl-52f86be2">13,666</span></p></td><td class="cl-52f9cd0d"><p class="cl-52f9bd08"><span class="cl-52f86be2">13,511</span></p></td><td class="cl-52f9cd0d"><p class="cl-52f9bd08"><span class="cl-52f86be2">876,536</span></p></td><td class="cl-52f9cd0d"><p class="cl-52f9bd08"><span class="cl-52f86be2">867,001</span></p></td><td class="cl-52f9cd0d"><p class="cl-52f9bd08"><span class="cl-52f86be2">148.75673</span></p></td><td class="cl-52f9cd0d"><p class="cl-52f9bd08"><span class="cl-52f86be2">9,541.243</span></p></td><td class="cl-52f9cd0d"><p class="cl-52f9bd08"><span class="cl-52f86be2">13,517.2433</span></p></td><td class="cl-52f9cd16"><p class="cl-52f9bd08"><span class="cl-52f86be2">866,994.8</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>Now we can calculate the collocation statistics (the association strength).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>colldf_redux <span class="sc">%&gt;%</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># determine number of rows</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">Rws =</span> <span class="fu">nrow</span>(.)) <span class="sc">%&gt;%</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># work row-wise</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rowwise</span>() <span class="sc">%&gt;%</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># calculate fishers' exact test</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">p =</span> <span class="fu">as.vector</span>(<span class="fu">unlist</span>(<span class="fu">fisher.test</span>(<span class="fu">matrix</span>(<span class="fu">c</span>(O11, O12, O21, O22),</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">byrow =</span> T</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>  ))[<span class="dv">1</span>]))) <span class="sc">%&gt;%</span></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># extract AM</span></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 1. bias towards top left</span></span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">btl_O12 =</span> <span class="fu">ifelse</span>(C1 <span class="sc">&gt;</span> R1, <span class="dv">0</span>, R1 <span class="sc">-</span> C1),</span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">btl_O11 =</span> <span class="fu">ifelse</span>(C1 <span class="sc">&gt;</span> R1, R1, R1 <span class="sc">-</span> btl_O12),</span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">btl_O21 =</span> <span class="fu">ifelse</span>(C1 <span class="sc">&gt;</span> R1, C1 <span class="sc">-</span> R1, C1 <span class="sc">-</span> btl_O11),</span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">btl_O22 =</span> <span class="fu">ifelse</span>(C1 <span class="sc">&gt;</span> R1, C2, C2 <span class="sc">-</span> btl_O12),</span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 2. bias towards top right</span></span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">btr_O11 =</span> <span class="dv">0</span>,</span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">btr_O21 =</span> R1,</span>
<span id="cb31-21"><a href="#cb31-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">btr_O12 =</span> C1,</span>
<span id="cb31-22"><a href="#cb31-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">btr_O22 =</span> C2 <span class="sc">-</span> R1</span>
<span id="cb31-23"><a href="#cb31-23" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb31-24"><a href="#cb31-24" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 3. calculate AM</span></span>
<span id="cb31-25"><a href="#cb31-25" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb31-26"><a href="#cb31-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">upp =</span> btl_O11 <span class="sc">/</span> R1,</span>
<span id="cb31-27"><a href="#cb31-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">low =</span> btr_O11 <span class="sc">/</span> R1,</span>
<span id="cb31-28"><a href="#cb31-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">op =</span> O11 <span class="sc">/</span> R1</span>
<span id="cb31-29"><a href="#cb31-29" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb31-30"><a href="#cb31-30" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">AM =</span> op <span class="sc">/</span> upp) <span class="sc">%&gt;%</span></span>
<span id="cb31-31"><a href="#cb31-31" aria-hidden="true" tabindex="-1"></a>  <span class="co"># remove superfluous columns</span></span>
<span id="cb31-32"><a href="#cb31-32" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>btr_O21, <span class="sc">-</span>btr_O12, <span class="sc">-</span>btr_O22, <span class="sc">-</span>btl_O12, <span class="sc">-</span>btl_O11, <span class="sc">-</span>btl_O21, <span class="sc">-</span>btl_O22, <span class="sc">-</span>btr_O11) <span class="sc">%&gt;%</span></span>
<span id="cb31-33"><a href="#cb31-33" aria-hidden="true" tabindex="-1"></a>  <span class="co"># extract x2 statistics</span></span>
<span id="cb31-34"><a href="#cb31-34" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">X2 =</span> (O11 <span class="sc">-</span> E11)<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> E11 <span class="sc">+</span> (O12 <span class="sc">-</span> E12)<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> E12 <span class="sc">+</span> (O21 <span class="sc">-</span> E21)<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> E21 <span class="sc">+</span> (O22 <span class="sc">-</span> E22)<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> E22) <span class="sc">%&gt;%</span></span>
<span id="cb31-35"><a href="#cb31-35" aria-hidden="true" tabindex="-1"></a>  <span class="co"># extract association measures</span></span>
<span id="cb31-36"><a href="#cb31-36" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb31-37"><a href="#cb31-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">phi =</span> <span class="fu">sqrt</span>((X2 <span class="sc">/</span> N)),</span>
<span id="cb31-38"><a href="#cb31-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">MI =</span> <span class="fu">log2</span>(O11 <span class="sc">/</span> E11),</span>
<span id="cb31-39"><a href="#cb31-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">DeltaP12 =</span> (O11 <span class="sc">/</span> (O11 <span class="sc">+</span> O12)) <span class="sc">-</span> (O21 <span class="sc">/</span> (O21 <span class="sc">+</span> O22)),</span>
<span id="cb31-40"><a href="#cb31-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">DeltaP21 =</span> (O11 <span class="sc">/</span> (O11 <span class="sc">+</span> O21)) <span class="sc">-</span> (O21 <span class="sc">/</span> (O12 <span class="sc">+</span> O22)),</span>
<span id="cb31-41"><a href="#cb31-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">LogOddsRatio =</span> <span class="fu">log</span>(((O11 <span class="sc">+</span> <span class="fl">0.5</span>) <span class="sc">*</span> (O22 <span class="sc">+</span> <span class="fl">0.5</span>)) <span class="sc">/</span> ((O12 <span class="sc">+</span> <span class="fl">0.5</span>) <span class="sc">*</span> (O21 <span class="sc">+</span> <span class="fl">0.5</span>)))</span>
<span id="cb31-42"><a href="#cb31-42" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb31-43"><a href="#cb31-43" aria-hidden="true" tabindex="-1"></a>  <span class="co"># determine Bonferroni corrected significance</span></span>
<span id="cb31-44"><a href="#cb31-44" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">Sig_corrected =</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb31-45"><a href="#cb31-45" aria-hidden="true" tabindex="-1"></a>    p <span class="sc">/</span> Rws <span class="sc">&gt;</span> .<span class="dv">05</span> <span class="sc">~</span> <span class="st">"n.s."</span>,</span>
<span id="cb31-46"><a href="#cb31-46" aria-hidden="true" tabindex="-1"></a>    p <span class="sc">/</span> Rws <span class="sc">&gt;</span> .<span class="dv">01</span> <span class="sc">~</span> <span class="st">"p &lt; .05*"</span>,</span>
<span id="cb31-47"><a href="#cb31-47" aria-hidden="true" tabindex="-1"></a>    p <span class="sc">/</span> Rws <span class="sc">&gt;</span> .<span class="dv">001</span> <span class="sc">~</span> <span class="st">"p &lt; .01**"</span>,</span>
<span id="cb31-48"><a href="#cb31-48" aria-hidden="true" tabindex="-1"></a>    p <span class="sc">/</span> Rws <span class="sc">&lt;=</span> .<span class="dv">001</span> <span class="sc">~</span> <span class="st">"p &lt; .001***"</span>,</span>
<span id="cb31-49"><a href="#cb31-49" aria-hidden="true" tabindex="-1"></a>    T <span class="sc">~</span> <span class="st">"N.A."</span></span>
<span id="cb31-50"><a href="#cb31-50" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb31-51"><a href="#cb31-51" aria-hidden="true" tabindex="-1"></a>  <span class="co"># round p-value</span></span>
<span id="cb31-52"><a href="#cb31-52" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">p =</span> <span class="fu">round</span>(p, <span class="dv">5</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb31-53"><a href="#cb31-53" aria-hidden="true" tabindex="-1"></a>  <span class="co"># filter out non significant results</span></span>
<span id="cb31-54"><a href="#cb31-54" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(</span>
<span id="cb31-55"><a href="#cb31-55" aria-hidden="true" tabindex="-1"></a>    Sig_corrected <span class="sc">!=</span> <span class="st">"n.s."</span>,</span>
<span id="cb31-56"><a href="#cb31-56" aria-hidden="true" tabindex="-1"></a>    <span class="co"># filter out instances where the w1 and w2 repel each other</span></span>
<span id="cb31-57"><a href="#cb31-57" aria-hidden="true" tabindex="-1"></a>    E11 <span class="sc">&lt;</span> O11</span>
<span id="cb31-58"><a href="#cb31-58" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb31-59"><a href="#cb31-59" aria-hidden="true" tabindex="-1"></a>  <span class="co"># arrange by phi (association measure)</span></span>
<span id="cb31-60"><a href="#cb31-60" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="sc">-</span>AM) <span class="sc">%&gt;%</span></span>
<span id="cb31-61"><a href="#cb31-61" aria-hidden="true" tabindex="-1"></a>  <span class="co"># remove superfluous columns</span></span>
<span id="cb31-62"><a href="#cb31-62" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">any_of</span>(<span class="fu">c</span>(</span>
<span id="cb31-63"><a href="#cb31-63" aria-hidden="true" tabindex="-1"></a>    <span class="st">"TermCoocFreq"</span>, <span class="st">"AllFreq"</span>, <span class="st">"NRows"</span>, <span class="st">"E12"</span>, <span class="st">"E21"</span>,</span>
<span id="cb31-64"><a href="#cb31-64" aria-hidden="true" tabindex="-1"></a>    <span class="st">"E22"</span>, <span class="st">"O12"</span>, <span class="st">"O21"</span>, <span class="st">"O22"</span>, <span class="st">"R1"</span>, <span class="st">"R2"</span>, <span class="st">"C1"</span>, <span class="st">"C2"</span></span>
<span id="cb31-65"><a href="#cb31-65" aria-hidden="true" tabindex="-1"></a>  ))) <span class="ot">-&gt;</span> assoc_tb</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-53507418{table-layout:auto;width:95%;}.cl-534d058a{font-family:'Helvetica';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-534d058b{font-family:'Helvetica';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-534e4aee{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-534e4aef{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-534e58cc{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-534e58cd{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-534e58d6{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-534e58d7{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-534e58e0{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-534e58e1{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-534e58ea{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-534e58eb{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-534e58ec{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-534e58ed{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-534e58f4{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-534e58f5{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-534e58fe{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-534e58ff{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-534e5900{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-534e5908{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-53507418"><thead><tr style="overflow-wrap:break-word;"><th class="cl-534e58cc"><p class="cl-534e4aee"><span class="cl-534d058a">w1</span></p></th><th class="cl-534e58cd"><p class="cl-534e4aee"><span class="cl-534d058a">w2</span></p></th><th class="cl-534e58d6"><p class="cl-534e4aef"><span class="cl-534d058a">O11</span></p></th><th class="cl-534e58d6"><p class="cl-534e4aef"><span class="cl-534d058a">N</span></p></th><th class="cl-534e58d6"><p class="cl-534e4aef"><span class="cl-534d058a">E11</span></p></th><th class="cl-534e58d6"><p class="cl-534e4aef"><span class="cl-534d058a">Rws</span></p></th><th class="cl-534e58d6"><p class="cl-534e4aef"><span class="cl-534d058a">p</span></p></th><th class="cl-534e58d6"><p class="cl-534e4aef"><span class="cl-534d058a">upp</span></p></th><th class="cl-534e58d6"><p class="cl-534e4aef"><span class="cl-534d058a">low</span></p></th><th class="cl-534e58d6"><p class="cl-534e4aef"><span class="cl-534d058a">op</span></p></th><th class="cl-534e58d6"><p class="cl-534e4aef"><span class="cl-534d058a">AM</span></p></th><th class="cl-534e58d6"><p class="cl-534e4aef"><span class="cl-534d058a">X2</span></p></th><th class="cl-534e58d6"><p class="cl-534e4aef"><span class="cl-534d058a">phi</span></p></th><th class="cl-534e58d6"><p class="cl-534e4aef"><span class="cl-534d058a">MI</span></p></th><th class="cl-534e58d6"><p class="cl-534e4aef"><span class="cl-534d058a">DeltaP12</span></p></th><th class="cl-534e58d6"><p class="cl-534e4aef"><span class="cl-534d058a">DeltaP21</span></p></th><th class="cl-534e58d6"><p class="cl-534e4aef"><span class="cl-534d058a">LogOddsRatio</span></p></th><th class="cl-534e58d7"><p class="cl-534e4aee"><span class="cl-534d058a">Sig_corrected</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-534e58e0"><p class="cl-534e4aee"><span class="cl-534d058b">alice</span></p></td><td class="cl-534e58e1"><p class="cl-534e4aee"><span class="cl-534d058b">turning</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">7</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">890,202</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">1.621890</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">278</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">0.00132</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">0.01537668</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">0</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">0.0007223942</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">0.04697987</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">18.032827</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">0.004500778</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">2.1096787</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">0.0005611244</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">0.04682032</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">1.5654805</span></p></td><td class="cl-534e58eb"><p class="cl-534e4aee"><span class="cl-534d058b">p &lt; .001***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-534e58ec"><p class="cl-534e4aee"><span class="cl-534d058b">alice</span></p></td><td class="cl-534e58ed"><p class="cl-534e4aee"><span class="cl-534d058b">to</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">334</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">890,202</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">276.232956</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">278</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">0.00058</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">1.00000000</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">0</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">0.0344685243</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">0.03446852</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">12.571828</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">0.003757984</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">0.2739627</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">0.0060271174</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">-0.01579578</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">0.1998464</span></p></td><td class="cl-534e58f5"><p class="cl-534e4aee"><span class="cl-534d058b">p &lt; .001***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-534e58e0"><p class="cl-534e4aee"><span class="cl-534d058b">alice</span></p></td><td class="cl-534e58e1"><p class="cl-534e4aee"><span class="cl-534d058b">afraid</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">10</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">890,202</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">3.200240</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">278</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">0.00164</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">0.03034056</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">0</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">0.0010319917</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">0.03401361</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">14.611721</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">0.004051412</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">1.6437480</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">0.0007094521</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">0.03369447</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">1.2107100</span></p></td><td class="cl-534e58eb"><p class="cl-534e4aee"><span class="cl-534d058b">p &lt; .001***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-534e58ec"><p class="cl-534e4aee"><span class="cl-534d058b">alice</span></p></td><td class="cl-534e58ed"><p class="cl-534e4aee"><span class="cl-534d058b">silent</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">6</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">890,202</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">2.187919</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">278</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">0.02361</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">0.02074303</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">0</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">0.0006191950</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">0.02985075</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">6.716520</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">0.002746805</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">1.4554031</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">0.0003977330</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">0.02963165</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">1.1059978</span></p></td><td class="cl-534e58f5"><p class="cl-534e4aee"><span class="cl-534d058b">p &lt; .001***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-534e58e0"><p class="cl-534e4aee"><span class="cl-534d058b">alice</span></p></td><td class="cl-534e58e1"><p class="cl-534e4aee"><span class="cl-534d058b">replied</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">14</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">890,202</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">5.126915</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">278</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">0.00081</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">0.04860681</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">0</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">0.0014447884</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">0.02972399</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">15.533749</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">0.004177283</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">1.4492639</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">0.0009257722</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">0.02921035</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">1.0586565</span></p></td><td class="cl-534e58eb"><p class="cl-534e4aee"><span class="cl-534d058b">p &lt; .001***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-534e58ec"><p class="cl-534e4aee"><span class="cl-534d058b">alice</span></p></td><td class="cl-534e58ed"><p class="cl-534e4aee"><span class="cl-534d058b">thought</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">60</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">890,202</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">22.086010</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">278</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">0.00000</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">0.20939112</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">0</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">0.0061919505</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">0.02957122</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">65.951703</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">0.008607335</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">1.4418297</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">0.0039557515</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">0.02735431</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">1.0304387</span></p></td><td class="cl-534e58f5"><p class="cl-534e4aee"><span class="cl-534d058b">p &lt; .001***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-534e58e0"><p class="cl-534e4aee"><span class="cl-534d058b">alice</span></p></td><td class="cl-534e58e1"><p class="cl-534e4aee"><span class="cl-534d058b">timidly</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">6</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">890,202</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">2.209689</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">278</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">0.02463</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">0.02094943</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">0</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">0.0006191950</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">0.02955665</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">6.574620</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">0.002717635</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">1.4411188</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">0.0003954616</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">0.02933530</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">1.0958173</span></p></td><td class="cl-534e58eb"><p class="cl-534e4aee"><span class="cl-534d058b">p &lt; .001***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-534e58ec"><p class="cl-534e4aee"><span class="cl-534d058b">alice</span></p></td><td class="cl-534e58ed"><p class="cl-534e4aee"><span class="cl-534d058b">sir</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">6</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">890,202</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">2.318541</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">278</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">0.03016</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">0.02198142</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">0</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">0.0006191950</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">0.02816901</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">5.911290</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">0.002576896</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">1.3717451</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">0.0003841046</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">0.02793643</span></p></td><td class="cl-534e58f4"><p class="cl-534e4aef"><span class="cl-534d058b">1.0464132</span></p></td><td class="cl-534e58f5"><p class="cl-534e4aee"><span class="cl-534d058b">p &lt; .001***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-534e58e0"><p class="cl-534e4aee"><span class="cl-534d058b">alice</span></p></td><td class="cl-534e58e1"><p class="cl-534e4aee"><span class="cl-534d058b">haven</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">6</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">890,202</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">2.372967</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">278</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">0.03321</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">0.02249742</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">0</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">0.0006191950</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">0.02752294</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">5.606231</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">0.002509523</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">1.3382704</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">0.0003784260</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">0.02728473</span></p></td><td class="cl-534e58ea"><p class="cl-534e4aef"><span class="cl-534d058b">1.0225968</span></p></td><td class="cl-534e58eb"><p class="cl-534e4aee"><span class="cl-534d058b">p &lt; .001***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-534e58fe"><p class="cl-534e4aee"><span class="cl-534d058b">alice</span></p></td><td class="cl-534e58ff"><p class="cl-534e4aee"><span class="cl-534d058b">cried</span></p></td><td class="cl-534e5900"><p class="cl-534e4aef"><span class="cl-534d058b">10</span></p></td><td class="cl-534e5900"><p class="cl-534e4aef"><span class="cl-534d058b">890,202</span></p></td><td class="cl-534e5900"><p class="cl-534e4aef"><span class="cl-534d058b">3.962202</span></p></td><td class="cl-534e5900"><p class="cl-534e4aef"><span class="cl-534d058b">278</span></p></td><td class="cl-534e5900"><p class="cl-534e4aef"><span class="cl-534d058b">0.00729</span></p></td><td class="cl-534e5900"><p class="cl-534e4aef"><span class="cl-534d058b">0.03756450</span></p></td><td class="cl-534e5900"><p class="cl-534e4aef"><span class="cl-534d058b">0</span></p></td><td class="cl-534e5900"><p class="cl-534e4aef"><span class="cl-534d058b">0.0010319917</span></p></td><td class="cl-534e5900"><p class="cl-534e4aef"><span class="cl-534d058b">0.02747253</span></p></td><td class="cl-534e5900"><p class="cl-534e4aef"><span class="cl-534d058b">9.305752</span></p></td><td class="cl-534e5900"><p class="cl-534e4aef"><span class="cl-534d058b">0.003233192</span></p></td><td class="cl-534e5900"><p class="cl-534e4aef"><span class="cl-534d058b">1.3356257</span></p></td><td class="cl-534e5900"><p class="cl-534e4aef"><span class="cl-534d058b">0.0006299529</span></p></td><td class="cl-534e5900"><p class="cl-534e4aef"><span class="cl-534d058b">0.02707470</span></p></td><td class="cl-534e5900"><p class="cl-534e4aef"><span class="cl-534d058b">0.9906554</span></p></td><td class="cl-534e5908"><p class="cl-534e4aee"><span class="cl-534d058b">p &lt; .001***</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>The resulting table shows collocations in the example text descending by collocation strength.</p>
<p>We now use a <a href="https://ladal.edu.au/net.html">network graph</a>, or network for short, to visualise the collocations of our keyword (<em>alice</em>). Networks are a powerful and versatile visual representation used to depict relationships or connections among various elements. Network graphs typically consist of nodes, representing individual entities, and edges, indicating the connections or interactions between these entities.</p>
<p>We start by extracting the tokens that we want to show (the top 20 collocates of <em>alice</em>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sort the coocStatz data frame in descending order based on the 'phi' column</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>top20colls <span class="ot">&lt;-</span> assoc_tb <span class="sc">%&gt;%</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="sc">-</span>phi) <span class="sc">%&gt;%</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># select the top 20 rows after sorting</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">20</span>) <span class="sc">%&gt;%</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># extract the 'token' column</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">pull</span>(w2) <span class="sc">%&gt;%</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add keyword</span></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="st">"alice"</span>)</span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect the top 20 tokens with the highest 'phi' values</span></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>top20colls</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "said"    "thought" "very"    "turning" "replied" "afraid"  "to"     
 [8] "i"       "cried"   "much"    "nothing" "think"   "silent"  "say"    
[15] "timidly" "glad"    "t"       "sir"     "looked"  "please"  "alice"  </code></pre>
</div>
</div>
<p>We then need to generate a feature co-occurrence matrix from a document-feature matrix based on the cleaned, lower case sentences of our text.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tokenize the 'sentences' data using quanteda package</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>keyword_fcm <span class="ot">&lt;-</span> sentences <span class="sc">%&gt;%</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  quanteda<span class="sc">::</span><span class="fu">tokens</span>() <span class="sc">%&gt;%</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># create a document-feature matrix (dfm) from the tokens</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>  quanteda<span class="sc">::</span><span class="fu">dfm</span>() <span class="sc">%&gt;%</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># select features based on 'top20colls' and the term "selection" pattern</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>  quanteda<span class="sc">::</span><span class="fu">dfm_select</span>(<span class="at">pattern =</span> <span class="fu">c</span>(top20colls, <span class="st">"selection"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create a symmetric feature co-occurrence matrix (fcm)</span></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>  quanteda<span class="sc">::</span><span class="fu">fcm</span>(<span class="at">tri =</span> <span class="cn">FALSE</span>)</span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect the first 6 rows and 6 columns of the resulting fcm</span></span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>keyword_fcm[<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Feature co-occurrence matrix of: 6 by 6 features.
         features
features  alice   i  to very nothing thought
  alice      11 163 334   86      18      60
  i         163 269 307   48      12      33
  to        334 307 321  155      32      68
  very       86  48 155   12       5      12
  nothing    18  12  32    5       0       4
  thought    60  33  68   12       4       0</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create a network plot using the fcm</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>quanteda.textplots<span class="sc">::</span><span class="fu">textplot_network</span>(keyword_fcm,</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># set the transparency of edges to 0.8 for visibility</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">edge_alpha =</span> <span class="fl">0.8</span>,</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># set the color of edges to gray</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">edge_color =</span> <span class="st">"gray"</span>,</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># set the size of edges to 2 for better visibility</span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">edge_size =</span> <span class="dv">2</span>,</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># adjust the size of vertex labels</span></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># based on the logarithm of row sums of the fcm</span></span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">vertex_labelsize =</span> <span class="fu">log</span>(<span class="fu">rowSums</span>(keyword_fcm))</span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="textanalysis_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="keywords" class="level1 unnumbered">
<h1 class="unnumbered">Keywords</h1>
<p>Keywords play a pivotal role in text analysis, serving as distinctive terms that hold particular significance within a given text, context, or collection. This approach revolves around pinpointing words closely associated with a specific text. In simpler terms, keyness analysis strives to identify words that distinctly represent the content of a given text.</p>
<p><br></p>
<div class="warning" style="padding:0.5em; background-color:rgba(215,209,204,.3); color:#51247a">
<span>
<p style="margin-top:1em; text-align:center">
<b>Keyness is a statistical measure that helps identify significant terms in text by assessing how prominently a term stands out in a specific context by comparing its frequency to what’s expected based on background data.</b><br>
</p>
<p style="margin-left:1em;">
</p>
<p></p>
</span></div>
<p><br></p>
<p>To determine if a token is a keyword and if it occurs significantly more frequently in a target corpus compared to a reference corpus, we use the following information (that is provided by the table above):</p>
<ul>
<li><p>O11 = Number of times word<sub>x</sub> occurs in <code>target corpus</code></p></li>
<li><p>O12 = Number of times word<sub>x</sub> occurs in <code>reference corpus</code> (without <code>target corpus</code>)</p></li>
<li><p>O21 = Number of times other words occur in <code>target corpus</code></p></li>
<li><p>O22 = Number of times other words occur in <code>reference corpus</code></p></li>
</ul>
<p>Example:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: center;">target corpus</th>
<th style="text-align: right;">reference corpus</th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>token</strong></td>
<td style="text-align: center;">O<sub>11</sub></td>
<td style="text-align: right;">O<sub>12</sub></td>
<td>= R<sub>1</sub></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>other tokens</strong></td>
<td style="text-align: center;">O<sub>21</sub></td>
<td style="text-align: right;">O<sub>22</sub></td>
<td>= R<sub>2</sub></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: center;">= C<sub>1</sub></td>
<td style="text-align: right;">= C<sub>2</sub></td>
<td>= N</td>
</tr>
</tbody>
</table>
<p>First, we’ll load two texts.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load data</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>text1 <span class="ot">&lt;-</span> base<span class="sc">::</span><span class="fu">readRDS</span>(<span class="fu">url</span>(<span class="st">"https://slcladal.github.io/data/orwell.rda"</span>, <span class="st">"rb"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste0</span>(<span class="at">collapse =</span> <span class="st">" "</span>)</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>text2 <span class="ot">&lt;-</span> base<span class="sc">::</span><span class="fu">readRDS</span>(<span class="fu">url</span>(<span class="st">"https://slcladal.github.io/data/melville.rda"</span>, <span class="st">"rb"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste0</span>(<span class="at">collapse =</span> <span class="st">" "</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-53b99588{table-layout:auto;width:95%;}.cl-53b6f616{font-family:'Helvetica';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-53b6f620{font-family:'Helvetica';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-53b80f6a{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-53b81a50{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-53b81a51{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-53b99588"><thead><tr style="overflow-wrap:break-word;"><th class="cl-53b81a50"><p class="cl-53b80f6a"><span class="cl-53b6f616">.</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-53b81a51"><p class="cl-53b80f6a"><span class="cl-53b6f620">1984 George Orwell Part 1, Chapter 1 It was a bright cold day in April, and the clocks were striking thirteen. Winston Smith, his chin nuzzled into his breast in an effort to escape the vile wind, sli</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>As you can see, text1 is George Orwell’s <em>1984</em>.</p>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-53c173de{table-layout:auto;width:95%;}.cl-53be1f04{font-family:'Helvetica';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-53be1f0e{font-family:'Helvetica';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-53bf2dd6{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-53bf38da{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-53bf38db{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-53c173de"><thead><tr style="overflow-wrap:break-word;"><th class="cl-53bf38da"><p class="cl-53bf2dd6"><span class="cl-53be1f04">.</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-53bf38db"><p class="cl-53bf2dd6"><span class="cl-53be1f0e">MOBY-DICK; or, THE WHALE. By Herman Melville CHAPTER 1. Loomings. Call me Ishmael. Some years ago—never mind how long precisely—having little or no money in my purse, and nothing particular to interes</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>The table shows that text2 is Herman Melville’s <em>Moby Dick</em>.</p>
<p>After loading the two texts, we create a frequency table of first text.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>text1_words <span class="ot">&lt;-</span> text1 <span class="sc">%&gt;%</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># remove non-word characters</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_remove_all</span>(<span class="st">"[^[:alpha:] ]"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># convert to lower</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tolower</span>() <span class="sc">%&gt;%</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># tokenize the corpus files</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>  quanteda<span class="sc">::</span><span class="fu">tokens</span>(</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_punct =</span> T,</span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_symbols =</span> T,</span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_numbers =</span> T</span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># unlist the tokens to create a data frame</span></span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unlist</span>() <span class="sc">%&gt;%</span></span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># rename the column to 'token'</span></span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">token =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># group by 'token' and count the occurrences</span></span>
<span id="cb38-18"><a href="#cb38-18" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(token) <span class="sc">%&gt;%</span></span>
<span id="cb38-19"><a href="#cb38-19" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb38-20"><a href="#cb38-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add column stating where the frequency list is 'from'</span></span>
<span id="cb38-21"><a href="#cb38-21" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">type =</span> <span class="st">"text1"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now, we create a frequency table of second text.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>text2_words <span class="ot">&lt;-</span> text2 <span class="sc">%&gt;%</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># remove non-word characters</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_remove_all</span>(<span class="st">"[^[:alpha:] ]"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># convert to lower</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tolower</span>() <span class="sc">%&gt;%</span></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># tokenize the corpus files</span></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>  quanteda<span class="sc">::</span><span class="fu">tokens</span>(</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_punct =</span> T,</span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_symbols =</span> T,</span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_numbers =</span> T</span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># unlist the tokens to create a data frame</span></span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unlist</span>() <span class="sc">%&gt;%</span></span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># rename the column to 'token'</span></span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">token =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># group by 'token' and count the occurrences</span></span>
<span id="cb39-18"><a href="#cb39-18" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(token) <span class="sc">%&gt;%</span></span>
<span id="cb39-19"><a href="#cb39-19" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb39-20"><a href="#cb39-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add column stating where the frequency list is 'from'</span></span>
<span id="cb39-21"><a href="#cb39-21" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">type =</span> <span class="st">"text2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In a next step, we combine the tables.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>texts_df <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">left_join</span>(text1_words, text2_words, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"token"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># rename columns and select relevant columns</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">text1 =</span> n.x,</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">text2 =</span> n.y</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>type.x, <span class="sc">-</span>type.y) <span class="sc">%&gt;%</span></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># replace NA values with 0 in 'corpus' and 'kwic' columns</span></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">replace_na</span>(<span class="fu">list</span>(<span class="at">text1 =</span> <span class="dv">0</span>, <span class="at">text2 =</span> <span class="dv">0</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-543fbe10{table-layout:auto;width:95%;}.cl-543cacd4{font-family:'Helvetica';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-543cacde{font-family:'Helvetica';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-543de37e{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-543de388{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-543df026{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543df030{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543df031{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543df03a{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543df03b{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543df03c{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543df044{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543df045{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543df06c{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543df076{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543df077{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-543df078{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-543fbe10"><thead><tr style="overflow-wrap:break-word;"><th class="cl-543df026"><p class="cl-543de37e"><span class="cl-543cacd4">token</span></p></th><th class="cl-543df030"><p class="cl-543de388"><span class="cl-543cacd4">text1</span></p></th><th class="cl-543df031"><p class="cl-543de388"><span class="cl-543cacd4">text2</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-543df03a"><p class="cl-543de37e"><span class="cl-543cacde">a</span></p></td><td class="cl-543df03b"><p class="cl-543de388"><span class="cl-543cacde">2,390</span></p></td><td class="cl-543df03c"><p class="cl-543de388"><span class="cl-543cacde">4,536</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-543df044"><p class="cl-543de37e"><span class="cl-543cacde">aaronson</span></p></td><td class="cl-543df045"><p class="cl-543de388"><span class="cl-543cacde">8</span></p></td><td class="cl-543df06c"><p class="cl-543de388"><span class="cl-543cacde">0</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-543df03a"><p class="cl-543de37e"><span class="cl-543cacde">aback</span></p></td><td class="cl-543df03b"><p class="cl-543de388"><span class="cl-543cacde">2</span></p></td><td class="cl-543df03c"><p class="cl-543de388"><span class="cl-543cacde">2</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-543df044"><p class="cl-543de37e"><span class="cl-543cacde">abandon</span></p></td><td class="cl-543df045"><p class="cl-543de388"><span class="cl-543cacde">3</span></p></td><td class="cl-543df06c"><p class="cl-543de388"><span class="cl-543cacde">3</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-543df03a"><p class="cl-543de37e"><span class="cl-543cacde">abandoned</span></p></td><td class="cl-543df03b"><p class="cl-543de388"><span class="cl-543cacde">4</span></p></td><td class="cl-543df03c"><p class="cl-543de388"><span class="cl-543cacde">7</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-543df044"><p class="cl-543de37e"><span class="cl-543cacde">abashed</span></p></td><td class="cl-543df045"><p class="cl-543de388"><span class="cl-543cacde">1</span></p></td><td class="cl-543df06c"><p class="cl-543de388"><span class="cl-543cacde">2</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-543df03a"><p class="cl-543de37e"><span class="cl-543cacde">abbreviated</span></p></td><td class="cl-543df03b"><p class="cl-543de388"><span class="cl-543cacde">1</span></p></td><td class="cl-543df03c"><p class="cl-543de388"><span class="cl-543cacde">0</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-543df044"><p class="cl-543de37e"><span class="cl-543cacde">abiding</span></p></td><td class="cl-543df045"><p class="cl-543de388"><span class="cl-543cacde">1</span></p></td><td class="cl-543df06c"><p class="cl-543de388"><span class="cl-543cacde">1</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-543df03a"><p class="cl-543de37e"><span class="cl-543cacde">ability</span></p></td><td class="cl-543df03b"><p class="cl-543de388"><span class="cl-543cacde">1</span></p></td><td class="cl-543df03c"><p class="cl-543de388"><span class="cl-543cacde">1</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-543df076"><p class="cl-543de37e"><span class="cl-543cacde">abject</span></p></td><td class="cl-543df077"><p class="cl-543de388"><span class="cl-543cacde">3</span></p></td><td class="cl-543df078"><p class="cl-543de388"><span class="cl-543cacde">0</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>We now calculate the frequencies of the observed and expected frequencies as well as the row and column totals.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>texts_df <span class="sc">%&gt;%</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">text1 =</span> <span class="fu">as.numeric</span>(text1),</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">text2 =</span> <span class="fu">as.numeric</span>(text2)</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">C1 =</span> <span class="fu">sum</span>(text1),</span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">C2 =</span> <span class="fu">sum</span>(text2),</span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">N =</span> C1 <span class="sc">+</span> C2</span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rowwise</span>() <span class="sc">%&gt;%</span></span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">R1 =</span> text1 <span class="sc">+</span> text2,</span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">R2 =</span> N <span class="sc">-</span> R1,</span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">O11 =</span> text1,</span>
<span id="cb41-16"><a href="#cb41-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">O12 =</span> R1 <span class="sc">-</span> O11,</span>
<span id="cb41-17"><a href="#cb41-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">O21 =</span> C1 <span class="sc">-</span> O11,</span>
<span id="cb41-18"><a href="#cb41-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">O22 =</span> C2 <span class="sc">-</span> O12</span>
<span id="cb41-19"><a href="#cb41-19" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb41-20"><a href="#cb41-20" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb41-21"><a href="#cb41-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">E11 =</span> (R1 <span class="sc">*</span> C1) <span class="sc">/</span> N,</span>
<span id="cb41-22"><a href="#cb41-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">E12 =</span> (R1 <span class="sc">*</span> C2) <span class="sc">/</span> N,</span>
<span id="cb41-23"><a href="#cb41-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">E21 =</span> (R2 <span class="sc">*</span> C1) <span class="sc">/</span> N,</span>
<span id="cb41-24"><a href="#cb41-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">E22 =</span> (R2 <span class="sc">*</span> C2) <span class="sc">/</span> N</span>
<span id="cb41-25"><a href="#cb41-25" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb41-26"><a href="#cb41-26" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>text1, <span class="sc">-</span>text2) <span class="ot">-&gt;</span> stats_tb2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-5471e520{table-layout:auto;width:95%;}.cl-546e5efa{font-family:'Helvetica';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-546e5f0e{font-family:'Helvetica';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-546fad14{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-546fad28{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-546fbd36{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-546fbd37{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-546fbd38{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-546fbd40{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-546fbd41{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-546fbd4a{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-546fbd4b{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-546fbd4c{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-546fbd54{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-546fbd55{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-546fbd56{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-546fbd5e{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-5471e520"><thead><tr style="overflow-wrap:break-word;"><th class="cl-546fbd36"><p class="cl-546fad14"><span class="cl-546e5efa">token</span></p></th><th class="cl-546fbd37"><p class="cl-546fad28"><span class="cl-546e5efa">C1</span></p></th><th class="cl-546fbd37"><p class="cl-546fad28"><span class="cl-546e5efa">C2</span></p></th><th class="cl-546fbd37"><p class="cl-546fad28"><span class="cl-546e5efa">N</span></p></th><th class="cl-546fbd37"><p class="cl-546fad28"><span class="cl-546e5efa">R1</span></p></th><th class="cl-546fbd37"><p class="cl-546fad28"><span class="cl-546e5efa">R2</span></p></th><th class="cl-546fbd37"><p class="cl-546fad28"><span class="cl-546e5efa">O11</span></p></th><th class="cl-546fbd37"><p class="cl-546fad28"><span class="cl-546e5efa">O12</span></p></th><th class="cl-546fbd37"><p class="cl-546fad28"><span class="cl-546e5efa">O21</span></p></th><th class="cl-546fbd37"><p class="cl-546fad28"><span class="cl-546e5efa">O22</span></p></th><th class="cl-546fbd37"><p class="cl-546fad28"><span class="cl-546e5efa">E11</span></p></th><th class="cl-546fbd37"><p class="cl-546fad28"><span class="cl-546e5efa">E12</span></p></th><th class="cl-546fbd37"><p class="cl-546fad28"><span class="cl-546e5efa">E21</span></p></th><th class="cl-546fbd38"><p class="cl-546fad28"><span class="cl-546e5efa">E22</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-546fbd40"><p class="cl-546fad14"><span class="cl-546e5f0e">a</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">94,677</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">169,163</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">263,840</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">6,926</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">256,914</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">2,390</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">4,536</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">92,287</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">164,627</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">2,485.3430185</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">4,440.6569815</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">92,191.66</span></p></td><td class="cl-546fbd4a"><p class="cl-546fad28"><span class="cl-546e5f0e">164,722.3</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-546fbd4b"><p class="cl-546fad14"><span class="cl-546e5f0e">aaronson</span></p></td><td class="cl-546fbd4c"><p class="cl-546fad28"><span class="cl-546e5f0e">94,677</span></p></td><td class="cl-546fbd4c"><p class="cl-546fad28"><span class="cl-546e5f0e">169,163</span></p></td><td class="cl-546fbd4c"><p class="cl-546fad28"><span class="cl-546e5f0e">263,840</span></p></td><td class="cl-546fbd4c"><p class="cl-546fad28"><span class="cl-546e5f0e">8</span></p></td><td class="cl-546fbd4c"><p class="cl-546fad28"><span class="cl-546e5f0e">263,832</span></p></td><td class="cl-546fbd4c"><p class="cl-546fad28"><span class="cl-546e5f0e">8</span></p></td><td class="cl-546fbd4c"><p class="cl-546fad28"><span class="cl-546e5f0e">0</span></p></td><td class="cl-546fbd4c"><p class="cl-546fad28"><span class="cl-546e5f0e">94,669</span></p></td><td class="cl-546fbd4c"><p class="cl-546fad28"><span class="cl-546e5f0e">169,163</span></p></td><td class="cl-546fbd4c"><p class="cl-546fad28"><span class="cl-546e5f0e">2.8707398</span></p></td><td class="cl-546fbd4c"><p class="cl-546fad28"><span class="cl-546e5f0e">5.1292602</span></p></td><td class="cl-546fbd4c"><p class="cl-546fad28"><span class="cl-546e5f0e">94,674.13</span></p></td><td class="cl-546fbd54"><p class="cl-546fad28"><span class="cl-546e5f0e">169,157.9</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-546fbd40"><p class="cl-546fad14"><span class="cl-546e5f0e">aback</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">94,677</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">169,163</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">263,840</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">4</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">263,836</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">2</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">2</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">94,675</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">169,161</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">1.4353699</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">2.5646301</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">94,675.56</span></p></td><td class="cl-546fbd4a"><p class="cl-546fad28"><span class="cl-546e5f0e">169,160.4</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-546fbd4b"><p class="cl-546fad14"><span class="cl-546e5f0e">abandon</span></p></td><td class="cl-546fbd4c"><p class="cl-546fad28"><span class="cl-546e5f0e">94,677</span></p></td><td class="cl-546fbd4c"><p class="cl-546fad28"><span class="cl-546e5f0e">169,163</span></p></td><td class="cl-546fbd4c"><p class="cl-546fad28"><span class="cl-546e5f0e">263,840</span></p></td><td class="cl-546fbd4c"><p class="cl-546fad28"><span class="cl-546e5f0e">6</span></p></td><td class="cl-546fbd4c"><p class="cl-546fad28"><span class="cl-546e5f0e">263,834</span></p></td><td class="cl-546fbd4c"><p class="cl-546fad28"><span class="cl-546e5f0e">3</span></p></td><td class="cl-546fbd4c"><p class="cl-546fad28"><span class="cl-546e5f0e">3</span></p></td><td class="cl-546fbd4c"><p class="cl-546fad28"><span class="cl-546e5f0e">94,674</span></p></td><td class="cl-546fbd4c"><p class="cl-546fad28"><span class="cl-546e5f0e">169,160</span></p></td><td class="cl-546fbd4c"><p class="cl-546fad28"><span class="cl-546e5f0e">2.1530549</span></p></td><td class="cl-546fbd4c"><p class="cl-546fad28"><span class="cl-546e5f0e">3.8469451</span></p></td><td class="cl-546fbd4c"><p class="cl-546fad28"><span class="cl-546e5f0e">94,674.85</span></p></td><td class="cl-546fbd54"><p class="cl-546fad28"><span class="cl-546e5f0e">169,159.2</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-546fbd40"><p class="cl-546fad14"><span class="cl-546e5f0e">abandoned</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">94,677</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">169,163</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">263,840</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">11</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">263,829</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">4</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">7</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">94,673</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">169,156</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">3.9472673</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">7.0527327</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">94,673.05</span></p></td><td class="cl-546fbd4a"><p class="cl-546fad28"><span class="cl-546e5f0e">169,155.9</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-546fbd4b"><p class="cl-546fad14"><span class="cl-546e5f0e">abashed</span></p></td><td class="cl-546fbd4c"><p class="cl-546fad28"><span class="cl-546e5f0e">94,677</span></p></td><td class="cl-546fbd4c"><p class="cl-546fad28"><span class="cl-546e5f0e">169,163</span></p></td><td class="cl-546fbd4c"><p class="cl-546fad28"><span class="cl-546e5f0e">263,840</span></p></td><td class="cl-546fbd4c"><p class="cl-546fad28"><span class="cl-546e5f0e">3</span></p></td><td class="cl-546fbd4c"><p class="cl-546fad28"><span class="cl-546e5f0e">263,837</span></p></td><td class="cl-546fbd4c"><p class="cl-546fad28"><span class="cl-546e5f0e">1</span></p></td><td class="cl-546fbd4c"><p class="cl-546fad28"><span class="cl-546e5f0e">2</span></p></td><td class="cl-546fbd4c"><p class="cl-546fad28"><span class="cl-546e5f0e">94,676</span></p></td><td class="cl-546fbd4c"><p class="cl-546fad28"><span class="cl-546e5f0e">169,161</span></p></td><td class="cl-546fbd4c"><p class="cl-546fad28"><span class="cl-546e5f0e">1.0765274</span></p></td><td class="cl-546fbd4c"><p class="cl-546fad28"><span class="cl-546e5f0e">1.9234726</span></p></td><td class="cl-546fbd4c"><p class="cl-546fad28"><span class="cl-546e5f0e">94,675.92</span></p></td><td class="cl-546fbd54"><p class="cl-546fad28"><span class="cl-546e5f0e">169,161.1</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-546fbd40"><p class="cl-546fad14"><span class="cl-546e5f0e">abbreviated</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">94,677</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">169,163</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">263,840</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">1</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">263,839</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">1</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">0</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">94,676</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">169,163</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">0.3588425</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">0.6411575</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">94,676.64</span></p></td><td class="cl-546fbd4a"><p class="cl-546fad28"><span class="cl-546e5f0e">169,162.4</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-546fbd4b"><p class="cl-546fad14"><span class="cl-546e5f0e">abiding</span></p></td><td class="cl-546fbd4c"><p class="cl-546fad28"><span class="cl-546e5f0e">94,677</span></p></td><td class="cl-546fbd4c"><p class="cl-546fad28"><span class="cl-546e5f0e">169,163</span></p></td><td class="cl-546fbd4c"><p class="cl-546fad28"><span class="cl-546e5f0e">263,840</span></p></td><td class="cl-546fbd4c"><p class="cl-546fad28"><span class="cl-546e5f0e">2</span></p></td><td class="cl-546fbd4c"><p class="cl-546fad28"><span class="cl-546e5f0e">263,838</span></p></td><td class="cl-546fbd4c"><p class="cl-546fad28"><span class="cl-546e5f0e">1</span></p></td><td class="cl-546fbd4c"><p class="cl-546fad28"><span class="cl-546e5f0e">1</span></p></td><td class="cl-546fbd4c"><p class="cl-546fad28"><span class="cl-546e5f0e">94,676</span></p></td><td class="cl-546fbd4c"><p class="cl-546fad28"><span class="cl-546e5f0e">169,162</span></p></td><td class="cl-546fbd4c"><p class="cl-546fad28"><span class="cl-546e5f0e">0.7176850</span></p></td><td class="cl-546fbd4c"><p class="cl-546fad28"><span class="cl-546e5f0e">1.2823150</span></p></td><td class="cl-546fbd4c"><p class="cl-546fad28"><span class="cl-546e5f0e">94,676.28</span></p></td><td class="cl-546fbd54"><p class="cl-546fad28"><span class="cl-546e5f0e">169,161.7</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-546fbd40"><p class="cl-546fad14"><span class="cl-546e5f0e">ability</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">94,677</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">169,163</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">263,840</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">2</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">263,838</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">1</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">1</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">94,676</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">169,162</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">0.7176850</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">1.2823150</span></p></td><td class="cl-546fbd41"><p class="cl-546fad28"><span class="cl-546e5f0e">94,676.28</span></p></td><td class="cl-546fbd4a"><p class="cl-546fad28"><span class="cl-546e5f0e">169,161.7</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-546fbd55"><p class="cl-546fad14"><span class="cl-546e5f0e">abject</span></p></td><td class="cl-546fbd56"><p class="cl-546fad28"><span class="cl-546e5f0e">94,677</span></p></td><td class="cl-546fbd56"><p class="cl-546fad28"><span class="cl-546e5f0e">169,163</span></p></td><td class="cl-546fbd56"><p class="cl-546fad28"><span class="cl-546e5f0e">263,840</span></p></td><td class="cl-546fbd56"><p class="cl-546fad28"><span class="cl-546e5f0e">3</span></p></td><td class="cl-546fbd56"><p class="cl-546fad28"><span class="cl-546e5f0e">263,837</span></p></td><td class="cl-546fbd56"><p class="cl-546fad28"><span class="cl-546e5f0e">3</span></p></td><td class="cl-546fbd56"><p class="cl-546fad28"><span class="cl-546e5f0e">0</span></p></td><td class="cl-546fbd56"><p class="cl-546fad28"><span class="cl-546e5f0e">94,674</span></p></td><td class="cl-546fbd56"><p class="cl-546fad28"><span class="cl-546e5f0e">169,163</span></p></td><td class="cl-546fbd56"><p class="cl-546fad28"><span class="cl-546e5f0e">1.0765274</span></p></td><td class="cl-546fbd56"><p class="cl-546fad28"><span class="cl-546e5f0e">1.9234726</span></p></td><td class="cl-546fbd56"><p class="cl-546fad28"><span class="cl-546e5f0e">94,675.92</span></p></td><td class="cl-546fbd5e"><p class="cl-546fad28"><span class="cl-546e5f0e">169,161.1</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>We can now calculate the association strength which, in this case serves as a keyness measure.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>stats_tb2 <span class="sc">%&gt;%</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># determine number of rows</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">Rws =</span> <span class="fu">nrow</span>(.)) <span class="sc">%&gt;%</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># work row-wise</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rowwise</span>() <span class="sc">%&gt;%</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># calculate fishers' exact test</span></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">p =</span> <span class="fu">as.vector</span>(<span class="fu">unlist</span>(<span class="fu">fisher.test</span>(<span class="fu">matrix</span>(<span class="fu">c</span>(O11, O12, O21, O22),</span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">byrow =</span> T</span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a>  ))[<span class="dv">1</span>]))) <span class="sc">%&gt;%</span></span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># extract AM</span></span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 1. bias towards top left</span></span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb42-13"><a href="#cb42-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">btl_O12 =</span> <span class="fu">ifelse</span>(C1 <span class="sc">&gt;</span> R1, <span class="dv">0</span>, R1 <span class="sc">-</span> C1),</span>
<span id="cb42-14"><a href="#cb42-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">btl_O11 =</span> <span class="fu">ifelse</span>(C1 <span class="sc">&gt;</span> R1, R1, R1 <span class="sc">-</span> btl_O12),</span>
<span id="cb42-15"><a href="#cb42-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">btl_O21 =</span> <span class="fu">ifelse</span>(C1 <span class="sc">&gt;</span> R1, C1 <span class="sc">-</span> R1, C1 <span class="sc">-</span> btl_O11),</span>
<span id="cb42-16"><a href="#cb42-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">btl_O22 =</span> <span class="fu">ifelse</span>(C1 <span class="sc">&gt;</span> R1, C2, C2 <span class="sc">-</span> btl_O12),</span>
<span id="cb42-17"><a href="#cb42-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-18"><a href="#cb42-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 2. bias towards top right</span></span>
<span id="cb42-19"><a href="#cb42-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">btr_O11 =</span> <span class="dv">0</span>,</span>
<span id="cb42-20"><a href="#cb42-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">btr_O21 =</span> R1,</span>
<span id="cb42-21"><a href="#cb42-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">btr_O12 =</span> C1,</span>
<span id="cb42-22"><a href="#cb42-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">btr_O22 =</span> C2 <span class="sc">-</span> R1</span>
<span id="cb42-23"><a href="#cb42-23" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb42-24"><a href="#cb42-24" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 3. calculate AM</span></span>
<span id="cb42-25"><a href="#cb42-25" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb42-26"><a href="#cb42-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">upp =</span> btl_O11 <span class="sc">/</span> R1,</span>
<span id="cb42-27"><a href="#cb42-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">low =</span> btr_O11 <span class="sc">/</span> R1,</span>
<span id="cb42-28"><a href="#cb42-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">op =</span> O11 <span class="sc">/</span> R1</span>
<span id="cb42-29"><a href="#cb42-29" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb42-30"><a href="#cb42-30" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">AM =</span> op <span class="sc">/</span> upp) <span class="sc">%&gt;%</span></span>
<span id="cb42-31"><a href="#cb42-31" aria-hidden="true" tabindex="-1"></a>  <span class="co"># remove superfluous columns</span></span>
<span id="cb42-32"><a href="#cb42-32" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>btr_O21, <span class="sc">-</span>btr_O12, <span class="sc">-</span>btr_O22, <span class="sc">-</span>btl_O12, <span class="sc">-</span>btl_O11, <span class="sc">-</span>btl_O21, <span class="sc">-</span>btl_O22, <span class="sc">-</span>btr_O11) <span class="sc">%&gt;%</span></span>
<span id="cb42-33"><a href="#cb42-33" aria-hidden="true" tabindex="-1"></a>  <span class="co"># extract x2 statistics</span></span>
<span id="cb42-34"><a href="#cb42-34" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">X2 =</span> (O11 <span class="sc">-</span> E11)<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> E11 <span class="sc">+</span> (O12 <span class="sc">-</span> E12)<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> E12 <span class="sc">+</span> (O21 <span class="sc">-</span> E21)<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> E21 <span class="sc">+</span> (O22 <span class="sc">-</span> E22)<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> E22) <span class="sc">%&gt;%</span></span>
<span id="cb42-35"><a href="#cb42-35" aria-hidden="true" tabindex="-1"></a>  <span class="co"># extract expected frequency</span></span>
<span id="cb42-36"><a href="#cb42-36" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">Exp =</span> E11) <span class="sc">%&gt;%</span></span>
<span id="cb42-37"><a href="#cb42-37" aria-hidden="true" tabindex="-1"></a>  <span class="co"># extract association measures</span></span>
<span id="cb42-38"><a href="#cb42-38" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb42-39"><a href="#cb42-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">phi =</span> <span class="fu">sqrt</span>((X2 <span class="sc">/</span> N)),</span>
<span id="cb42-40"><a href="#cb42-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">MI =</span> <span class="fu">log2</span>(O11 <span class="sc">/</span> E11),</span>
<span id="cb42-41"><a href="#cb42-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">DeltaP12 =</span> (O11 <span class="sc">/</span> (O11 <span class="sc">+</span> O12)) <span class="sc">-</span> (O21 <span class="sc">/</span> (O21 <span class="sc">+</span> O22)),</span>
<span id="cb42-42"><a href="#cb42-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">DeltaP21 =</span> (O11 <span class="sc">/</span> (O11 <span class="sc">+</span> O21)) <span class="sc">-</span> (O21 <span class="sc">/</span> (O12 <span class="sc">+</span> O22)),</span>
<span id="cb42-43"><a href="#cb42-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">LogOddsRatio =</span> <span class="fu">log</span>(((O11 <span class="sc">+</span> <span class="fl">0.5</span>) <span class="sc">*</span> (O22 <span class="sc">+</span> <span class="fl">0.5</span>)) <span class="sc">/</span> ((O12 <span class="sc">+</span> <span class="fl">0.5</span>) <span class="sc">*</span> (O21 <span class="sc">+</span> <span class="fl">0.5</span>)))</span>
<span id="cb42-44"><a href="#cb42-44" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb42-45"><a href="#cb42-45" aria-hidden="true" tabindex="-1"></a>  <span class="co"># determine Bonferroni corrected significance</span></span>
<span id="cb42-46"><a href="#cb42-46" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">Sig_corrected =</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb42-47"><a href="#cb42-47" aria-hidden="true" tabindex="-1"></a>    p <span class="sc">/</span> Rws <span class="sc">&gt;</span> .<span class="dv">05</span> <span class="sc">~</span> <span class="st">"n.s."</span>,</span>
<span id="cb42-48"><a href="#cb42-48" aria-hidden="true" tabindex="-1"></a>    p <span class="sc">/</span> Rws <span class="sc">&gt;</span> .<span class="dv">01</span> <span class="sc">~</span> <span class="st">"p &lt; .05*"</span>,</span>
<span id="cb42-49"><a href="#cb42-49" aria-hidden="true" tabindex="-1"></a>    p <span class="sc">/</span> Rws <span class="sc">&gt;</span> .<span class="dv">001</span> <span class="sc">~</span> <span class="st">"p &lt; .01**"</span>,</span>
<span id="cb42-50"><a href="#cb42-50" aria-hidden="true" tabindex="-1"></a>    p <span class="sc">/</span> Rws <span class="sc">&lt;=</span> .<span class="dv">001</span> <span class="sc">~</span> <span class="st">"p &lt; .001***"</span>,</span>
<span id="cb42-51"><a href="#cb42-51" aria-hidden="true" tabindex="-1"></a>    T <span class="sc">~</span> <span class="st">"N.A."</span></span>
<span id="cb42-52"><a href="#cb42-52" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb42-53"><a href="#cb42-53" aria-hidden="true" tabindex="-1"></a>  <span class="co"># round p-value</span></span>
<span id="cb42-54"><a href="#cb42-54" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb42-55"><a href="#cb42-55" aria-hidden="true" tabindex="-1"></a>    <span class="at">p =</span> <span class="fu">round</span>(p, <span class="dv">5</span>),</span>
<span id="cb42-56"><a href="#cb42-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">type =</span> <span class="fu">ifelse</span>(E11 <span class="sc">&gt;</span> O11, <span class="st">"antitype"</span>, <span class="st">"type"</span>)</span>
<span id="cb42-57"><a href="#cb42-57" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb42-58"><a href="#cb42-58" aria-hidden="true" tabindex="-1"></a>  <span class="co"># filter out non significant results</span></span>
<span id="cb42-59"><a href="#cb42-59" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(Sig_corrected <span class="sc">!=</span> <span class="st">"n.s."</span>) <span class="sc">%&gt;%</span></span>
<span id="cb42-60"><a href="#cb42-60" aria-hidden="true" tabindex="-1"></a>  <span class="co"># arrange by phi (association measure)</span></span>
<span id="cb42-61"><a href="#cb42-61" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="sc">-</span>DeltaP12) <span class="sc">%&gt;%</span></span>
<span id="cb42-62"><a href="#cb42-62" aria-hidden="true" tabindex="-1"></a>  <span class="co"># remove superfluous columns</span></span>
<span id="cb42-63"><a href="#cb42-63" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">any_of</span>(<span class="fu">c</span>(</span>
<span id="cb42-64"><a href="#cb42-64" aria-hidden="true" tabindex="-1"></a>    <span class="st">"TermCoocFreq"</span>, <span class="st">"AllFreq"</span>, <span class="st">"NRows"</span>, <span class="st">"E12"</span>, <span class="st">"E21"</span>,</span>
<span id="cb42-65"><a href="#cb42-65" aria-hidden="true" tabindex="-1"></a>    <span class="st">"E22"</span>, <span class="st">"O12"</span>, <span class="st">"O21"</span>, <span class="st">"O22"</span>, <span class="st">"R1"</span>, <span class="st">"R2"</span>, <span class="st">"C1"</span>, <span class="st">"C2"</span>, <span class="st">"Exp"</span></span>
<span id="cb42-66"><a href="#cb42-66" aria-hidden="true" tabindex="-1"></a>  ))) <span class="ot">-&gt;</span> assoc_tb3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-568c9f9e{table-layout:auto;width:95%;}.cl-5688ecc8{font-family:'Helvetica';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-5688ecd2{font-family:'Helvetica';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-568a5dd8{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-568a5de2{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-568a6d3c{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-568a6d46{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-568a6d47{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-568a6d50{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-568a6d51{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-568a6d52{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-568a6d5a{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-568a6d5b{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-568a6d5c{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-568a6d64{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-568a6d65{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-568a6d6e{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-568a6d6f{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-568a6d70{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-568a6d71{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-568a6d78{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-568c9f9e"><thead><tr style="overflow-wrap:break-word;"><th class="cl-568a6d3c"><p class="cl-568a5dd8"><span class="cl-5688ecc8">token</span></p></th><th class="cl-568a6d46"><p class="cl-568a5de2"><span class="cl-5688ecc8">N</span></p></th><th class="cl-568a6d46"><p class="cl-568a5de2"><span class="cl-5688ecc8">O11</span></p></th><th class="cl-568a6d46"><p class="cl-568a5de2"><span class="cl-5688ecc8">E11</span></p></th><th class="cl-568a6d46"><p class="cl-568a5de2"><span class="cl-5688ecc8">Rws</span></p></th><th class="cl-568a6d46"><p class="cl-568a5de2"><span class="cl-5688ecc8">p</span></p></th><th class="cl-568a6d46"><p class="cl-568a5de2"><span class="cl-5688ecc8">upp</span></p></th><th class="cl-568a6d46"><p class="cl-568a5de2"><span class="cl-5688ecc8">low</span></p></th><th class="cl-568a6d46"><p class="cl-568a5de2"><span class="cl-5688ecc8">op</span></p></th><th class="cl-568a6d46"><p class="cl-568a5de2"><span class="cl-5688ecc8">AM</span></p></th><th class="cl-568a6d46"><p class="cl-568a5de2"><span class="cl-5688ecc8">X2</span></p></th><th class="cl-568a6d46"><p class="cl-568a5de2"><span class="cl-5688ecc8">phi</span></p></th><th class="cl-568a6d46"><p class="cl-568a5de2"><span class="cl-5688ecc8">MI</span></p></th><th class="cl-568a6d46"><p class="cl-568a5de2"><span class="cl-5688ecc8">DeltaP12</span></p></th><th class="cl-568a6d46"><p class="cl-568a5de2"><span class="cl-5688ecc8">DeltaP21</span></p></th><th class="cl-568a6d46"><p class="cl-568a5de2"><span class="cl-5688ecc8">LogOddsRatio</span></p></th><th class="cl-568a6d47"><p class="cl-568a5dd8"><span class="cl-5688ecc8">Sig_corrected</span></p></th><th class="cl-568a6d50"><p class="cl-568a5dd8"><span class="cl-5688ecc8">type</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-568a6d51"><p class="cl-568a5dd8"><span class="cl-5688ecd2">winston</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">263,840</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">440</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">157.89069</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">8,689</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">0</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">1</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">0</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">1</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">1</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">787.47801</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">0.05463223</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">1.478577</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">0.6422285</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">-0.5524307</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">7.366105</span></p></td><td class="cl-568a6d5a"><p class="cl-568a5dd8"><span class="cl-5688ecd2">p &lt; .001***</span></p></td><td class="cl-568a6d5b"><p class="cl-568a5dd8"><span class="cl-5688ecd2">type</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-568a6d5c"><p class="cl-568a5dd8"><span class="cl-5688ecd2">obrien</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">263,840</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">178</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">63.87396</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">8,689</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">0</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">1</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">0</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">1</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">1</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">318.25409</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">0.03473095</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">1.478577</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">0.6415904</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">-0.5567468</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">6.460007</span></p></td><td class="cl-568a6d65"><p class="cl-568a5dd8"><span class="cl-5688ecd2">p &lt; .001***</span></p></td><td class="cl-568a6d6e"><p class="cl-568a5dd8"><span class="cl-5688ecd2">type</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-568a6d51"><p class="cl-568a5dd8"><span class="cl-5688ecd2">telescreen</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">263,840</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">90</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">32.29582</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">8,689</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">0</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">1</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">0</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">1</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">1</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">160.86130</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">0.02469195</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">1.478577</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">0.6413763</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">-0.5581965</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">5.779837</span></p></td><td class="cl-568a6d5a"><p class="cl-568a5dd8"><span class="cl-5688ecd2">p &lt; .001***</span></p></td><td class="cl-568a6d5b"><p class="cl-568a5dd8"><span class="cl-5688ecd2">type</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-568a6d5c"><p class="cl-568a5dd8"><span class="cl-5688ecd2">julia</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">263,840</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">78</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">27.98971</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">8,689</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">0</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">1</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">0</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">1</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">1</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">139.40678</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">0.02298644</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">1.478577</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">0.6413471</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">-0.5583942</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">5.637459</span></p></td><td class="cl-568a6d65"><p class="cl-568a5dd8"><span class="cl-5688ecd2">p &lt; .001***</span></p></td><td class="cl-568a6d6e"><p class="cl-568a5dd8"><span class="cl-5688ecd2">type</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-568a6d51"><p class="cl-568a5dd8"><span class="cl-5688ecd2">winstons</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">263,840</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">70</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">25.11897</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">8,689</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">0</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">1</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">0</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">1</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">1</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">125.10486</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">0.02177543</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">1.478577</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">0.6413277</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">-0.5585260</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">5.529889</span></p></td><td class="cl-568a6d5a"><p class="cl-568a5dd8"><span class="cl-5688ecd2">p &lt; .001***</span></p></td><td class="cl-568a6d5b"><p class="cl-568a5dd8"><span class="cl-5688ecd2">type</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-568a6d5c"><p class="cl-568a5dd8"><span class="cl-5688ecd2">oceania</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">263,840</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">60</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">21.53055</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">8,689</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">0</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">1</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">0</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">1</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">1</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">107.22867</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">0.02015975</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">1.478577</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">0.6413034</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">-0.5586907</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">5.376814</span></p></td><td class="cl-568a6d65"><p class="cl-568a5dd8"><span class="cl-5688ecd2">p &lt; .001***</span></p></td><td class="cl-568a6d6e"><p class="cl-568a5dd8"><span class="cl-5688ecd2">type</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-568a6d51"><p class="cl-568a5dd8"><span class="cl-5688ecd2">proles</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">263,840</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">42</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">15.07138</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">8,689</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">0</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">1</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">0</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">1</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">1</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">75.05495</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">0.01686628</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">1.478577</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">0.6412596</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">-0.5589872</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">5.023484</span></p></td><td class="cl-568a6d5a"><p class="cl-568a5dd8"><span class="cl-5688ecd2">p &lt; .001***</span></p></td><td class="cl-568a6d5b"><p class="cl-568a5dd8"><span class="cl-5688ecd2">type</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-568a6d5c"><p class="cl-568a5dd8"><span class="cl-5688ecd2">newspeak</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">263,840</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">40</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">14.35370</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">8,689</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">0</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">1</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">0</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">1</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">1</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">71.48036</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">0.01645974</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">1.478577</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">0.6412547</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">-0.5590202</span></p></td><td class="cl-568a6d64"><p class="cl-568a5de2"><span class="cl-5688ecd2">4.975261</span></p></td><td class="cl-568a6d65"><p class="cl-568a5dd8"><span class="cl-5688ecd2">p &lt; .001***</span></p></td><td class="cl-568a6d6e"><p class="cl-568a5dd8"><span class="cl-5688ecd2">type</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-568a6d51"><p class="cl-568a5dd8"><span class="cl-5688ecd2">parsons</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">263,840</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">40</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">14.35370</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">8,689</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">0</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">1</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">0</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">1</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">1</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">71.48036</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">0.01645974</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">1.478577</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">0.6412547</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">-0.5590202</span></p></td><td class="cl-568a6d52"><p class="cl-568a5de2"><span class="cl-5688ecd2">4.975261</span></p></td><td class="cl-568a6d5a"><p class="cl-568a5dd8"><span class="cl-5688ecd2">p &lt; .001***</span></p></td><td class="cl-568a6d5b"><p class="cl-568a5dd8"><span class="cl-5688ecd2">type</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-568a6d6f"><p class="cl-568a5dd8"><span class="cl-5688ecd2">eurasia</span></p></td><td class="cl-568a6d70"><p class="cl-568a5de2"><span class="cl-5688ecd2">263,840</span></p></td><td class="cl-568a6d70"><p class="cl-568a5de2"><span class="cl-5688ecd2">35</span></p></td><td class="cl-568a6d70"><p class="cl-568a5de2"><span class="cl-5688ecd2">12.55949</span></p></td><td class="cl-568a6d70"><p class="cl-568a5de2"><span class="cl-5688ecd2">8,689</span></p></td><td class="cl-568a6d70"><p class="cl-568a5de2"><span class="cl-5688ecd2">0</span></p></td><td class="cl-568a6d70"><p class="cl-568a5de2"><span class="cl-5688ecd2">1</span></p></td><td class="cl-568a6d70"><p class="cl-568a5de2"><span class="cl-5688ecd2">0</span></p></td><td class="cl-568a6d70"><p class="cl-568a5de2"><span class="cl-5688ecd2">1</span></p></td><td class="cl-568a6d70"><p class="cl-568a5de2"><span class="cl-5688ecd2">1</span></p></td><td class="cl-568a6d70"><p class="cl-568a5de2"><span class="cl-5688ecd2">62.54413</span></p></td><td class="cl-568a6d70"><p class="cl-568a5de2"><span class="cl-5688ecd2">0.01539653</span></p></td><td class="cl-568a6d70"><p class="cl-568a5de2"><span class="cl-5688ecd2">1.478577</span></p></td><td class="cl-568a6d70"><p class="cl-568a5de2"><span class="cl-5688ecd2">0.6412426</span></p></td><td class="cl-568a6d70"><p class="cl-568a5de2"><span class="cl-5688ecd2">-0.5591025</span></p></td><td class="cl-568a6d70"><p class="cl-568a5de2"><span class="cl-5688ecd2">4.843439</span></p></td><td class="cl-568a6d71"><p class="cl-568a5dd8"><span class="cl-5688ecd2">p &lt; .001***</span></p></td><td class="cl-568a6d78"><p class="cl-568a5dd8"><span class="cl-5688ecd2">type</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>We can use a barplot to visualize the association strength (keyness) of words with a text.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># get top 10 keywords for text 1</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>top <span class="ot">&lt;-</span> assoc_tb3 <span class="sc">%&gt;%</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">10</span>)</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a><span class="co"># get top 10 keywords for text 2</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>bot <span class="ot">&lt;-</span> assoc_tb3 <span class="sc">%&gt;%</span></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">slice_tail</span>(<span class="at">n =</span> <span class="dv">10</span>)</span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a><span class="co"># combine into table</span></span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(top, bot) <span class="sc">%&gt;%</span></span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># create a ggplot</span></span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(token, DeltaP12, mean), <span class="at">y =</span> DeltaP12, <span class="at">label =</span> DeltaP12, <span class="at">fill =</span> type)) <span class="sc">+</span></span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add a bar plot using the 'phi' values</span></span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add text labels above the bars with rounded 'phi' values</span></span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(</span>
<span id="cb43-17"><a href="#cb43-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="fu">ifelse</span>(DeltaP12 <span class="sc">&gt;</span> <span class="dv">0</span>, DeltaP12 <span class="sc">-</span> <span class="fl">0.05</span>, DeltaP12 <span class="sc">+</span> <span class="fl">0.05</span>),</span>
<span id="cb43-18"><a href="#cb43-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="fu">round</span>(DeltaP12, <span class="dv">3</span>)</span>
<span id="cb43-19"><a href="#cb43-19" aria-hidden="true" tabindex="-1"></a>  ), <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb43-20"><a href="#cb43-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># flip the coordinates to have horizontal bars</span></span>
<span id="cb43-21"><a href="#cb43-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb43-22"><a href="#cb43-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># set the theme to a basic white and black theme</span></span>
<span id="cb43-23"><a href="#cb43-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb43-24"><a href="#cb43-24" aria-hidden="true" tabindex="-1"></a>  <span class="co"># remove legend</span></span>
<span id="cb43-25"><a href="#cb43-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb43-26"><a href="#cb43-26" aria-hidden="true" tabindex="-1"></a>  <span class="co"># define colors</span></span>
<span id="cb43-27"><a href="#cb43-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"orange"</span>, <span class="st">"darkgray"</span>)) <span class="sc">+</span></span>
<span id="cb43-28"><a href="#cb43-28" aria-hidden="true" tabindex="-1"></a>  <span class="co"># set the x-axis label to "Token" and y-axis label to "Association strength (phi)"</span></span>
<span id="cb43-29"><a href="#cb43-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Top 10 keywords for text1 and text 2"</span>, <span class="at">x =</span> <span class="st">"Keyword"</span>, <span class="at">y =</span> <span class="st">"Association strength (DeltaP12)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="textanalysis_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="text-classification" class="level1 unnumbered">
<h1 class="unnumbered">Text Classification</h1>
<p>Text classification involves methods for categorizing text into predefined groups, like languages, genres, or authors. These categorizations usually rely on the frequency of word types, important terms, phonetic elements, and other linguistic characteristics such as sentence length and words per line.</p>
<p>Like many other text analysis methods, text classification often starts with a training dataset already marked with the necessary labels. You can create these training datasets and their associated features manually or opt for pre-built training sets offered by specific software or tools.</p>
<p><br></p>
<div class="warning" style="padding:0.5em; background-color:rgba(215,209,204,.3); color:#51247a">
<span>
<p style="margin-top:1em; text-align:center">
<b>Text classification is a machine learning task where text documents are categorized into predefined classes or labels based on their content.</b> It involves training a model on labeled data to learn patterns and then using that model to classify new, unlabeled documents. Text classification has numerous applications, such as spam detection, sentiment analysis, and topic categorization.<br>
</p>
<p style="margin-left:1em;">
</p>
<p></p>
</span></div>
<p><br></p>
<p>In the upcoming example, we’ll use phoneme frequency to classify a text. To get started, we’ll load a German text and break it down into its constituent phonetic elements.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># read in German text</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>German <span class="ot">&lt;-</span> <span class="fu">readLines</span>(<span class="st">"https://slcladal.github.io/data/phonemictext1.txt"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_remove_all</span>(<span class="st">" "</span>) <span class="sc">%&gt;%</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_split</span>(<span class="st">""</span>) <span class="sc">%&gt;%</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unlist</span>()</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect data</span></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(German, <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "?" "a" "l" "s" "h" "E" "s" "@" "d" "e" ":" "n" "S" "t" "E" "p" "@" "n" "v"
[20] "O"</code></pre>
</div>
</div>
<p>We now do the same for three other texts - an English and a Spanish text as well as one text in a language that we will determine using classification.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># read in texts</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>English <span class="ot">&lt;-</span> <span class="fu">readLines</span>(<span class="st">"https://slcladal.github.io/data/phonemictext2.txt"</span>)</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>Spanish <span class="ot">&lt;-</span> <span class="fu">readLines</span>(<span class="st">"https://slcladal.github.io/data/phonemictext3.txt"</span>)</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>Unknown <span class="ot">&lt;-</span> <span class="fu">readLines</span>(<span class="st">"https://slcladal.github.io/data/phonemictext4.txt"</span>)</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a><span class="co"># clean, split texts into phonemes, unlist and convert them into vectors</span></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>English <span class="ot">&lt;-</span> <span class="fu">as.vector</span>(<span class="fu">unlist</span>(<span class="fu">strsplit</span>(<span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">""</span>, English), <span class="st">""</span>)))</span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>Spanish <span class="ot">&lt;-</span> <span class="fu">as.vector</span>(<span class="fu">unlist</span>(<span class="fu">strsplit</span>(<span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">""</span>, Spanish), <span class="st">""</span>)))</span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>Unknown <span class="ot">&lt;-</span> <span class="fu">as.vector</span>(<span class="fu">unlist</span>(<span class="fu">strsplit</span>(<span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">""</span>, Unknown), <span class="st">""</span>)))</span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect data</span></span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(English, <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "D"  "@"  "b"  "U"  "k"  "I"  "z"  "p"  "r"  "\\" "@"  "z"  "E"  "n"  "t" 
[16] "@"  "d"  "{"  "z"  "@" </code></pre>
</div>
</div>
<p>We will now create a table that represents the phonemes and their frequencies in each of the 4 texts. In addition, we will add the language and simply the column names.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create data tables</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>German <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">names</span>(<span class="fu">table</span>(German)), <span class="fu">as.vector</span>(<span class="fu">table</span>(German)))</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>English <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">names</span>(<span class="fu">table</span>(English)), <span class="fu">as.vector</span>(<span class="fu">table</span>(English)))</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>Spanish <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">names</span>(<span class="fu">table</span>(Spanish)), <span class="fu">as.vector</span>(<span class="fu">table</span>(Spanish)))</span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>Unknown <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">names</span>(<span class="fu">table</span>(Unknown)), <span class="fu">as.vector</span>(<span class="fu">table</span>(Unknown)))</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a><span class="co"># add column with language</span></span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>German<span class="sc">$</span>Language <span class="ot">&lt;-</span> <span class="st">"German"</span></span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>English<span class="sc">$</span>Language <span class="ot">&lt;-</span> <span class="st">"English"</span></span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a>Spanish<span class="sc">$</span>Language <span class="ot">&lt;-</span> <span class="st">"Spanish"</span></span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a>Unknown<span class="sc">$</span>Language <span class="ot">&lt;-</span> <span class="st">"Unknown"</span></span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a><span class="co"># simplify column names</span></span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(German)[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Phoneme"</span>, <span class="st">"Frequency"</span>)</span>
<span id="cb48-13"><a href="#cb48-13" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(English)[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Phoneme"</span>, <span class="st">"Frequency"</span>)</span>
<span id="cb48-14"><a href="#cb48-14" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Spanish)[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Phoneme"</span>, <span class="st">"Frequency"</span>)</span>
<span id="cb48-15"><a href="#cb48-15" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Unknown)[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Phoneme"</span>, <span class="st">"Frequency"</span>)</span>
<span id="cb48-16"><a href="#cb48-16" aria-hidden="true" tabindex="-1"></a><span class="co"># combine all tables into a single table</span></span>
<span id="cb48-17"><a href="#cb48-17" aria-hidden="true" tabindex="-1"></a>classdata <span class="ot">&lt;-</span> <span class="fu">rbind</span>(German, English, Spanish, Unknown)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-587f20a6{table-layout:auto;width:50%;}.cl-587c349a{font-family:'Helvetica';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-587c34a4{font-family:'Helvetica';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-587d5672{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-587d569a{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-587d6392{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-587d6393{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-587d639c{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-587d639d{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-587d639e{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-587d63a6{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-587d63a7{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-587d63a8{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-587d63b0{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-587d63b1{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-587d63ba{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-587d63bb{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-587f20a6"><thead><tr style="overflow-wrap:break-word;"><th class="cl-587d6392"><p class="cl-587d5672"><span class="cl-587c349a">Phoneme</span></p></th><th class="cl-587d6393"><p class="cl-587d569a"><span class="cl-587c349a">Frequency</span></p></th><th class="cl-587d639c"><p class="cl-587d5672"><span class="cl-587c349a">Language</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-587d639d"><p class="cl-587d5672"><span class="cl-587c34a4">-</span></p></td><td class="cl-587d639e"><p class="cl-587d569a"><span class="cl-587c34a4">6</span></p></td><td class="cl-587d63a6"><p class="cl-587d5672"><span class="cl-587c34a4">German</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-587d63a7"><p class="cl-587d5672"><span class="cl-587c34a4">:</span></p></td><td class="cl-587d63a8"><p class="cl-587d569a"><span class="cl-587c34a4">569</span></p></td><td class="cl-587d63b0"><p class="cl-587d5672"><span class="cl-587c34a4">German</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-587d639d"><p class="cl-587d5672"><span class="cl-587c34a4">?</span></p></td><td class="cl-587d639e"><p class="cl-587d569a"><span class="cl-587c34a4">556</span></p></td><td class="cl-587d63a6"><p class="cl-587d5672"><span class="cl-587c34a4">German</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-587d63a7"><p class="cl-587d5672"><span class="cl-587c34a4">@</span></p></td><td class="cl-587d63a8"><p class="cl-587d569a"><span class="cl-587c34a4">565</span></p></td><td class="cl-587d63b0"><p class="cl-587d5672"><span class="cl-587c34a4">German</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-587d639d"><p class="cl-587d5672"><span class="cl-587c34a4">2</span></p></td><td class="cl-587d639e"><p class="cl-587d569a"><span class="cl-587c34a4">6</span></p></td><td class="cl-587d63a6"><p class="cl-587d5672"><span class="cl-587c34a4">German</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-587d63a7"><p class="cl-587d5672"><span class="cl-587c34a4">3</span></p></td><td class="cl-587d63a8"><p class="cl-587d569a"><span class="cl-587c34a4">31</span></p></td><td class="cl-587d63b0"><p class="cl-587d5672"><span class="cl-587c34a4">German</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-587d639d"><p class="cl-587d5672"><span class="cl-587c34a4">4</span></p></td><td class="cl-587d639e"><p class="cl-587d569a"><span class="cl-587c34a4">67</span></p></td><td class="cl-587d63a6"><p class="cl-587d5672"><span class="cl-587c34a4">German</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-587d63a7"><p class="cl-587d5672"><span class="cl-587c34a4">5</span></p></td><td class="cl-587d63a8"><p class="cl-587d569a"><span class="cl-587c34a4">1</span></p></td><td class="cl-587d63b0"><p class="cl-587d5672"><span class="cl-587c34a4">German</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-587d639d"><p class="cl-587d5672"><span class="cl-587c34a4">6</span></p></td><td class="cl-587d639e"><p class="cl-587d569a"><span class="cl-587c34a4">402</span></p></td><td class="cl-587d63a6"><p class="cl-587d5672"><span class="cl-587c34a4">German</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-587d63b1"><p class="cl-587d5672"><span class="cl-587c34a4">8</span></p></td><td class="cl-587d63ba"><p class="cl-587d569a"><span class="cl-587c34a4">32</span></p></td><td class="cl-587d63bb"><p class="cl-587d5672"><span class="cl-587c34a4">German</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>Now, we group the data so that we see, how often each phoneme is used in each language.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># convert into wide format</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>classdw <span class="ot">&lt;-</span> classdata <span class="sc">%&gt;%</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">spread</span>(Phoneme, Frequency) <span class="sc">%&gt;%</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace</span>(<span class="fu">is.na</span>(.), <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-588c2f6c{table-layout:auto;width:50%;}.cl-58895440{font-family:'Helvetica';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-5889544a{font-family:'Helvetica';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-588a7884{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-588a7885{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-588a8608{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-588a8612{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-588a8613{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-588a861c{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-588a861d{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-588a8626{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-588a8630{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-588a863a{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-588a863b{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-588a8644{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-588a864e{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-588a864f{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-588c2f6c"><thead><tr style="overflow-wrap:break-word;"><th class="cl-588a8608"><p class="cl-588a7884"><span class="cl-58895440">Language</span></p></th><th class="cl-588a8612"><p class="cl-588a7885"><span class="cl-58895440">-</span></p></th><th class="cl-588a8612"><p class="cl-588a7885"><span class="cl-58895440">:</span></p></th><th class="cl-588a8612"><p class="cl-588a7885"><span class="cl-58895440">?</span></p></th><th class="cl-588a8612"><p class="cl-588a7885"><span class="cl-58895440">'</span></p></th><th class="cl-588a8613"><p class="cl-588a7885"><span class="cl-58895440">{</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-588a861c"><p class="cl-588a7884"><span class="cl-5889544a">English</span></p></td><td class="cl-588a861d"><p class="cl-588a7885"><span class="cl-5889544a">8</span></p></td><td class="cl-588a861d"><p class="cl-588a7885"><span class="cl-5889544a">176</span></p></td><td class="cl-588a861d"><p class="cl-588a7885"><span class="cl-5889544a">0</span></p></td><td class="cl-588a861d"><p class="cl-588a7885"><span class="cl-5889544a">7</span></p></td><td class="cl-588a8626"><p class="cl-588a7885"><span class="cl-5889544a">123</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-588a8630"><p class="cl-588a7884"><span class="cl-5889544a">German</span></p></td><td class="cl-588a863a"><p class="cl-588a7885"><span class="cl-5889544a">6</span></p></td><td class="cl-588a863a"><p class="cl-588a7885"><span class="cl-5889544a">569</span></p></td><td class="cl-588a863a"><p class="cl-588a7885"><span class="cl-5889544a">556</span></p></td><td class="cl-588a863a"><p class="cl-588a7885"><span class="cl-5889544a">0</span></p></td><td class="cl-588a863b"><p class="cl-588a7885"><span class="cl-5889544a">0</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-588a861c"><p class="cl-588a7884"><span class="cl-5889544a">Spanish</span></p></td><td class="cl-588a861d"><p class="cl-588a7885"><span class="cl-5889544a">5</span></p></td><td class="cl-588a861d"><p class="cl-588a7885"><span class="cl-5889544a">0</span></p></td><td class="cl-588a861d"><p class="cl-588a7885"><span class="cl-5889544a">0</span></p></td><td class="cl-588a861d"><p class="cl-588a7885"><span class="cl-5889544a">0</span></p></td><td class="cl-588a8626"><p class="cl-588a7885"><span class="cl-5889544a">0</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-588a8644"><p class="cl-588a7884"><span class="cl-5889544a">Unknown</span></p></td><td class="cl-588a864e"><p class="cl-588a7885"><span class="cl-5889544a">12</span></p></td><td class="cl-588a864e"><p class="cl-588a7885"><span class="cl-5889544a">286</span></p></td><td class="cl-588a864e"><p class="cl-588a7885"><span class="cl-5889544a">0</span></p></td><td class="cl-588a864e"><p class="cl-588a7885"><span class="cl-5889544a">12</span></p></td><td class="cl-588a864f"><p class="cl-588a7885"><span class="cl-5889544a">125</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>Next, we must reshape our data to reflect the frequency of each phoneme categorized by language. This transformation aligns with our classifier’s design, which will employ <em>Language</em> as the dependent variable and utilize phoneme frequencies as predictors.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>numvar <span class="ot">&lt;-</span> <span class="fu">colnames</span>(classdw)[<span class="dv">2</span><span class="sc">:</span><span class="fu">length</span>(<span class="fu">colnames</span>(classdw))]</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>classdw[numvar] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(classdw[numvar], as.numeric)</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="co"># function for normalizing numeric variables</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>normalize <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>  (x <span class="sc">-</span> <span class="fu">min</span>(x)) <span class="sc">/</span> (<span class="fu">max</span>(x) <span class="sc">-</span> <span class="fu">min</span>(x))</span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a><span class="co"># apply normalization</span></span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>classdw[numvar] <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">lapply</span>(classdw[numvar], normalize))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-589a4c00{table-layout:auto;width:50%;}.cl-5897645e{font-family:'Helvetica';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-58976468{font-family:'Helvetica';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-58989392{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-58989393{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-5898a08a{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5898a094{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5898a095{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5898a096{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5898a09e{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5898a09f{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5898a0a0{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5898a0a8{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5898a0a9{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5898a0b2{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5898a0b3{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5898a0b4{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-589a4c00"><thead><tr style="overflow-wrap:break-word;"><th class="cl-5898a08a"><p class="cl-58989392"><span class="cl-5897645e">Language</span></p></th><th class="cl-5898a094"><p class="cl-58989393"><span class="cl-5897645e">-</span></p></th><th class="cl-5898a094"><p class="cl-58989393"><span class="cl-5897645e">:</span></p></th><th class="cl-5898a094"><p class="cl-58989393"><span class="cl-5897645e">?</span></p></th><th class="cl-5898a094"><p class="cl-58989393"><span class="cl-5897645e">'</span></p></th><th class="cl-5898a095"><p class="cl-58989393"><span class="cl-5897645e">{</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-5898a096"><p class="cl-58989392"><span class="cl-58976468">English</span></p></td><td class="cl-5898a09e"><p class="cl-58989393"><span class="cl-58976468">0.4285714</span></p></td><td class="cl-5898a09e"><p class="cl-58989393"><span class="cl-58976468">0.3093146</span></p></td><td class="cl-5898a09e"><p class="cl-58989393"><span class="cl-58976468">0</span></p></td><td class="cl-5898a09e"><p class="cl-58989393"><span class="cl-58976468">0.5833333</span></p></td><td class="cl-5898a09f"><p class="cl-58989393"><span class="cl-58976468">0.984</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5898a0a0"><p class="cl-58989392"><span class="cl-58976468">German</span></p></td><td class="cl-5898a0a8"><p class="cl-58989393"><span class="cl-58976468">0.1428571</span></p></td><td class="cl-5898a0a8"><p class="cl-58989393"><span class="cl-58976468">1.0000000</span></p></td><td class="cl-5898a0a8"><p class="cl-58989393"><span class="cl-58976468">1</span></p></td><td class="cl-5898a0a8"><p class="cl-58989393"><span class="cl-58976468">0.0000000</span></p></td><td class="cl-5898a0a9"><p class="cl-58989393"><span class="cl-58976468">0.000</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5898a096"><p class="cl-58989392"><span class="cl-58976468">Spanish</span></p></td><td class="cl-5898a09e"><p class="cl-58989393"><span class="cl-58976468">0.0000000</span></p></td><td class="cl-5898a09e"><p class="cl-58989393"><span class="cl-58976468">0.0000000</span></p></td><td class="cl-5898a09e"><p class="cl-58989393"><span class="cl-58976468">0</span></p></td><td class="cl-5898a09e"><p class="cl-58989393"><span class="cl-58976468">0.0000000</span></p></td><td class="cl-5898a09f"><p class="cl-58989393"><span class="cl-58976468">0.000</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5898a0b2"><p class="cl-58989392"><span class="cl-58976468">Unknown</span></p></td><td class="cl-5898a0b3"><p class="cl-58989393"><span class="cl-58976468">1.0000000</span></p></td><td class="cl-5898a0b3"><p class="cl-58989393"><span class="cl-58976468">0.5026362</span></p></td><td class="cl-5898a0b3"><p class="cl-58989393"><span class="cl-58976468">0</span></p></td><td class="cl-5898a0b3"><p class="cl-58989393"><span class="cl-58976468">1.0000000</span></p></td><td class="cl-5898a0b4"><p class="cl-58989393"><span class="cl-58976468">1.000</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>Before turning to the actual classification, we will use a cluster analysis to see which texts the unknown text is most similar with.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># remove language column</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>textm <span class="ot">&lt;-</span> classdw[, <span class="dv">2</span><span class="sc">:</span><span class="fu">ncol</span>(classdw)]</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="co"># add languages as row names</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(textm) <span class="ot">&lt;-</span> classdw[, <span class="dv">1</span>]</span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a><span class="co"># create distance matrix</span></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>distmtx <span class="ot">&lt;-</span> <span class="fu">dist</span>(textm)</span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a><span class="co"># perform clustering</span></span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>clustertexts <span class="ot">&lt;-</span> <span class="fu">hclust</span>(distmtx, <span class="at">method =</span> <span class="st">"ward.D"</span>)</span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a><span class="co"># visualize cluster result</span></span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(clustertexts, <span class="at">hang =</span> .<span class="dv">25</span>, <span class="at">main =</span> <span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="textanalysis_files/figure-html/tc10-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>As indicated by the cluster analysis, the unidentified text forms a cluster alongside the English texts, strongly suggesting that the unknown text is likely in English.</p>
<p>Before we dive into the actual classification process, we’ll partition the data into two distinct sets: one excluding <em>Unknown</em> (our training set) and the other containing only <em>Unknown</em> (our test set). This segmentation allows us to train our model effectively and subsequently test its accuracy.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create training set</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>train <span class="ot">&lt;-</span> classdw <span class="sc">%&gt;%</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Language <span class="sc">!=</span> <span class="st">"Unknown"</span>)</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a><span class="co"># create test set</span></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> classdw <span class="sc">%&gt;%</span></span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Language <span class="sc">==</span> <span class="st">"Unknown"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-58ada728{table-layout:auto;width:50%;}.cl-58a9cb3a{font-family:'Helvetica';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-58a9cb3b{font-family:'Helvetica';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-58aae3e4{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-58aae3e5{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-58aaf12c{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-58aaf12d{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-58aaf136{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-58aaf137{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-58aaf140{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-58aaf14a{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-58aaf14b{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-58aaf154{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-58aaf155{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-58aaf156{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-58aaf15e{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-58aaf15f{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-58ada728"><thead><tr style="overflow-wrap:break-word;"><th class="cl-58aaf12c"><p class="cl-58aae3e4"><span class="cl-58a9cb3a">Language</span></p></th><th class="cl-58aaf12d"><p class="cl-58aae3e5"><span class="cl-58a9cb3a">-</span></p></th><th class="cl-58aaf12d"><p class="cl-58aae3e5"><span class="cl-58a9cb3a">:</span></p></th><th class="cl-58aaf12d"><p class="cl-58aae3e5"><span class="cl-58a9cb3a">?</span></p></th><th class="cl-58aaf12d"><p class="cl-58aae3e5"><span class="cl-58a9cb3a">'</span></p></th><th class="cl-58aaf136"><p class="cl-58aae3e5"><span class="cl-58a9cb3a">{</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-58aaf137"><p class="cl-58aae3e4"><span class="cl-58a9cb3b">English</span></p></td><td class="cl-58aaf140"><p class="cl-58aae3e5"><span class="cl-58a9cb3b">0.4285714</span></p></td><td class="cl-58aaf140"><p class="cl-58aae3e5"><span class="cl-58a9cb3b">0.3093146</span></p></td><td class="cl-58aaf140"><p class="cl-58aae3e5"><span class="cl-58a9cb3b">0</span></p></td><td class="cl-58aaf140"><p class="cl-58aae3e5"><span class="cl-58a9cb3b">0.5833333</span></p></td><td class="cl-58aaf14a"><p class="cl-58aae3e5"><span class="cl-58a9cb3b">0.984</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-58aaf14b"><p class="cl-58aae3e4"><span class="cl-58a9cb3b">German</span></p></td><td class="cl-58aaf154"><p class="cl-58aae3e5"><span class="cl-58a9cb3b">0.1428571</span></p></td><td class="cl-58aaf154"><p class="cl-58aae3e5"><span class="cl-58a9cb3b">1.0000000</span></p></td><td class="cl-58aaf154"><p class="cl-58aae3e5"><span class="cl-58a9cb3b">1</span></p></td><td class="cl-58aaf154"><p class="cl-58aae3e5"><span class="cl-58a9cb3b">0.0000000</span></p></td><td class="cl-58aaf155"><p class="cl-58aae3e5"><span class="cl-58a9cb3b">0.000</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-58aaf137"><p class="cl-58aae3e4"><span class="cl-58a9cb3b">Spanish</span></p></td><td class="cl-58aaf140"><p class="cl-58aae3e5"><span class="cl-58a9cb3b">0.0000000</span></p></td><td class="cl-58aaf140"><p class="cl-58aae3e5"><span class="cl-58a9cb3b">0.0000000</span></p></td><td class="cl-58aaf140"><p class="cl-58aae3e5"><span class="cl-58a9cb3b">0</span></p></td><td class="cl-58aaf140"><p class="cl-58aae3e5"><span class="cl-58a9cb3b">0.0000000</span></p></td><td class="cl-58aaf14a"><p class="cl-58aae3e5"><span class="cl-58a9cb3b">0.000</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-58aaf156"><p class="cl-58aae3e4"><span class="cl-58a9cb3b">Unknown</span></p></td><td class="cl-58aaf15e"><p class="cl-58aae3e5"><span class="cl-58a9cb3b">1.0000000</span></p></td><td class="cl-58aaf15e"><p class="cl-58aae3e5"><span class="cl-58a9cb3b">0.5026362</span></p></td><td class="cl-58aaf15e"><p class="cl-58aae3e5"><span class="cl-58a9cb3b">0</span></p></td><td class="cl-58aaf15e"><p class="cl-58aae3e5"><span class="cl-58a9cb3b">1.0000000</span></p></td><td class="cl-58aaf15f"><p class="cl-58aae3e5"><span class="cl-58a9cb3b">1.000</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>In the final stage, we can put our classifier into action. Our chosen classifier is a k-nearest neighbor classifier, which operates on the principle of classifying an unknown element based on its proximity to the clusters within the training set.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># set seed for reproducibility</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">12345</span>)</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="co"># apply k-nearest-neighbor (knn) classifier</span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>prediction <span class="ot">&lt;-</span> class<span class="sc">::</span><span class="fu">knn</span>(train[, <span class="dv">2</span><span class="sc">:</span><span class="fu">ncol</span>(train)],</span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>  test[, <span class="dv">2</span><span class="sc">:</span><span class="fu">ncol</span>(test)],</span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">cl =</span> train[, <span class="dv">1</span>],</span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">k =</span> <span class="dv">3</span></span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect the result</span></span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a>prediction</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] English
Levels: English German Spanish</code></pre>
</div>
</div>
<p>Using the phoneme frequencies present in the unknown text, our knn-classifier confidently predicts that the text is in English. This prediction aligns with reality, as the text is, indeed, a section of the Wikipedia article for Aldous Huxley’s <em>Brave New World</em>. It’s worth noting that the training texts encompassed German, English, and Spanish translations of a subsection from Wikipedia’s article on Hermann Hesse’s <em>Steppenwolf</em>.</p>
</section>
<section id="part-of-speech-tagging" class="level1 unnumbered">
<h1 class="unnumbered">Part-of-Speech tagging</h1>
<p>One widely used method for enhancing text data is part-of-speech tagging, which involves identifying the word type to which each word belongs. In the following section, we will apply part-of-speech tags to a brief English text.</p>
<p>Part-of-speech tagging is the process of assigning grammatical categories (such as noun, verb, adjective, etc.) to individual words in a text. It provides valuable insights into the syntactic and grammatical structure of a text, making it easier to analyze and extract meaningful information.</p>
<p><br></p>
<div class="warning" style="padding:0.5em; background-color:rgba(215,209,204,.3); color:#51247a">
<span>
<p style="margin-top:1em; text-align:center">
<b>Part-of-speech tagging (POS tagging) is a natural language processing task where each word in a text is assigned a grammatical category, such as noun, verb, adjective, etc.</b> It involves using linguistic patterns and context to determine the appropriate part of speech for each word. POS tagging is crucial for various language analysis tasks, including information retrieval, text summarization, and grammar analysis.<br>
</p>
<p style="margin-left:1em;">
</p>
<p></p>
</span></div>
<p><br></p>
<p>We start by selecting a portion of our example text.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load text</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>sample <span class="ot">&lt;-</span> base<span class="sc">::</span><span class="fu">readRDS</span>(<span class="fu">url</span>(<span class="st">"https://slcladal.github.io/data/alice.rda"</span>, <span class="st">"rb"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>  .[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>] <span class="sc">%&gt;%</span></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste0</span>(<span class="at">collapse =</span> <span class="st">" "</span>)</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect</span></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a><span class="fu">substr</span>(sample, <span class="dv">1</span>, <span class="dv">200</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Alice’s Adventures in Wonderland by Lewis Carroll CHAPTER I. Down the Rabbit-Hole Alice was beginning to get very tired of sitting by her sister on the bank, and of having nothing to do: once or twice"</code></pre>
</div>
</div>
<p>With our text ready for analysis, our next step is to download a pre-trained language model.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># download language model</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>m_eng <span class="ot">&lt;-</span> udpipe<span class="sc">::</span><span class="fu">udpipe_download_model</span>(<span class="at">language =</span> <span class="st">"english-ewt"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Once you’ve downloaded a model previously, you also have the option to load it directly from the location where you’ve stored it on your computer. In my case, I’ve placed the model in a folder labeled <em>udpipemodels</em>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load language model from your computer after you have downloaded it once</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>m_eng <span class="ot">&lt;-</span> <span class="fu">udpipe_load_model</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"udpipemodels"</span>, <span class="st">"english-ewt-ud-2.5-191206.udpipe"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can now use the model to annotate out text.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tokenise, tag, dependency parsing</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>text_anndf <span class="ot">&lt;-</span> udpipe<span class="sc">::</span><span class="fu">udpipe_annotate</span>(m_eng, <span class="at">x =</span> sample) <span class="sc">%&gt;%</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>sentence)</span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect</span></span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(text_anndf, <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   doc_id paragraph_id sentence_id token_id      token      lemma  upos xpos
1    doc1            1           1        1      Alice      Alice PROPN  NNP
2    doc1            1           1        2         ’s         's  PART  POS
3    doc1            1           1        3 Adventures  Adventure  NOUN  NNS
4    doc1            1           1        4         in         in   ADP   IN
5    doc1            1           1        5 Wonderland Wonderland PROPN  NNP
6    doc1            1           1        6         by         by   ADP   IN
7    doc1            1           1        7      Lewis      Lewis PROPN  NNP
8    doc1            1           1        8    Carroll    Carroll PROPN  NNP
9    doc1            1           1        9    CHAPTER    chapter PROPN  NNP
10   doc1            1           1       10          I          I  PRON  PRP
                                        feats head_token_id   dep_rel deps
1                                 Number=Sing             3 nmod:poss &lt;NA&gt;
2                                        &lt;NA&gt;             1      case &lt;NA&gt;
3                                 Number=Plur             0      root &lt;NA&gt;
4                                        &lt;NA&gt;             5      case &lt;NA&gt;
5                                 Number=Sing             3      nmod &lt;NA&gt;
6                                        &lt;NA&gt;             7      case &lt;NA&gt;
7                                 Number=Sing             3      nmod &lt;NA&gt;
8                                 Number=Sing             7      flat &lt;NA&gt;
9                                 Number=Sing             7      flat &lt;NA&gt;
10 Case=Nom|Number=Sing|Person=1|PronType=Prs             3     appos &lt;NA&gt;
            misc
1  SpaceAfter=No
2           &lt;NA&gt;
3           &lt;NA&gt;
4           &lt;NA&gt;
5           &lt;NA&gt;
6           &lt;NA&gt;
7           &lt;NA&gt;
8           &lt;NA&gt;
9           &lt;NA&gt;
10 SpaceAfter=No</code></pre>
</div>
</div>
<p>It can be useful to extract only the words and their pos-tags and convert them back into a text format (rather than a tabular format).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>tagged_text <span class="ot">&lt;-</span> <span class="fu">paste</span>(text_anndf<span class="sc">$</span>token, <span class="st">"/"</span>, text_anndf<span class="sc">$</span>xpos, <span class="at">collapse =</span> <span class="st">" "</span>, <span class="at">sep =</span> <span class="st">""</span>)</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect tagged text</span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a><span class="fu">substr</span>(tagged_text, <span class="dv">1</span>, <span class="dv">200</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Alice/NNP ’s/POS Adventures/NNS in/IN Wonderland/NNP by/IN Lewis/NNP Carroll/NNP CHAPTER/NNP I/PRP ./. Down/RB the/DT Rabbit/NNP -/HYPH Hole/NNP Alice/NNP was/VBD beginning/VBG to/TO get/VB very/RB ti"</code></pre>
</div>
</div>
<p>We could use the pos-tagged data to study differences in the distribution of word classes across different registers. or to find certain syntactic patterns in a collection of texts.</p>
</section>
<section id="names-entity-recognition" class="level1 unnumbered">
<h1 class="unnumbered">Names Entity Recognition</h1>
<p>Named Entity Recognition (NER), also known as named entity extraction or entity extraction, is a text analysis technique that automatically identifies and extracts named entities from text, such as people, locations, brands, and more.</p>
<p>NER involves the process of extracting textual elements with characteristics commonly associated with proper nouns (e.g., locations, individuals, organizations) rather than other parts of speech. These characteristics may include non-sentence initial capitalization. Named entities are frequently retrieved in automated summarization and topic modeling.</p>
<p>NER can be accomplished through straightforward feature extraction, like extracting all non-sentence-initial capitalized words, or with the aid of training sets. Utilizing training sets—texts annotated to identify entities and non-entities—proves more effective when dealing with unknown or inconsistently capitalized data.</p>
<p><br></p>
<div class="warning" style="padding:0.5em; background-color:rgba(215,209,204,.3); color:#51247a">
<span>
<p style="margin-top:1em; text-align:center">
<b>Named Entity Recognition (NER) is a natural language processing task that identifies and classifies words or phrases within text into predefined categories, such as persons, locations, organizations, and more.</b> It employs contextual clues and language patterns to recognize these named entities. NER is essential for various applications, including information extraction, text summarization, and knowledge graph construction.<br>
</p>
<p style="margin-left:1em;">
</p>
<p></p>
</span></div>
<p><br></p>
<p>In this context, we will leverage the results obtained from part-of-speech tagging to extract terms tagged as named entities (the label <code>PROPN</code> in the <code>upos</code> column).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tokenise, tag, dependency parsing</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>ner_df <span class="ot">&lt;-</span> text_anndf <span class="sc">%&gt;%</span></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(upos <span class="sc">==</span> <span class="st">"PROPN"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(token_id, token, lemma, upos, feats)</span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect</span></span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(ner_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  token_id      token      lemma  upos       feats
1        1      Alice      Alice PROPN Number=Sing
2        5 Wonderland Wonderland PROPN Number=Sing
3        7      Lewis      Lewis PROPN Number=Sing
4        8    Carroll    Carroll PROPN Number=Sing
5        9    CHAPTER    chapter PROPN Number=Sing
6        3     Rabbit     rabbit PROPN Number=Sing</code></pre>
</div>
</div>
<p>The obtained results can be further processed and categorized into various types such as persons, locations, dates, and other entities. This initial insight should provide you with a starting point for your analysis and exploration.</p>
</section>
<section id="dependency-parsing-using-udpipe" class="level1 unnumbered">
<h1 class="unnumbered">Dependency Parsing Using UDPipe</h1>
<p>In addition to part-of-speech tagging, we can create visual representations illustrating the syntactic relationships between the various components of a sentence.</p>
<p><br></p>
<div class="warning" style="padding:0.5em; background-color:rgba(215,209,204,.3); color:#51247a">
<span>
<p style="margin-top:1em; text-align:center">
<b>Dependency parsing is a linguistic analysis technique that reveals the grammatical structure of sentences by identifying how words relate to one another.</b> It establishes hierarchical relationships, such as subject-verb, modifier-noun, or object-verb connections, within a sentence. Dependency parsing is fundamental for understanding sentence syntax, semantic roles, and linguistic relationships, playing a critical role in various natural language processing tasks like sentiment analysis, information extraction, and machine translation.<br>
</p>
<p style="margin-left:1em;">
</p>
<p></p>
</span></div>
<p><br></p>
<p>To achieve this, we first construct an object containing a sentence (in this instance, the sentence <em>John gave Mary a kiss</em>), and subsequently, we utilize the <code>textplot_dependencyparser</code> function to plot or visualize the dependencies.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># parse text</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>sent <span class="ot">&lt;-</span> udpipe<span class="sc">::</span><span class="fu">udpipe_annotate</span>(m_eng, <span class="at">x =</span> <span class="st">"John gave Mary a kiss."</span>) <span class="sc">%&gt;%</span></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>()</span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect</span></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(sent)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  doc_id paragraph_id sentence_id               sentence token_id token lemma
1   doc1            1           1 John gave Mary a kiss.        1  John  John
2   doc1            1           1 John gave Mary a kiss.        2  gave  give
3   doc1            1           1 John gave Mary a kiss.        3  Mary  Mary
4   doc1            1           1 John gave Mary a kiss.        4     a     a
5   doc1            1           1 John gave Mary a kiss.        5  kiss  kiss
6   doc1            1           1 John gave Mary a kiss.        6     .     .
   upos xpos                            feats head_token_id dep_rel deps
1 PROPN  NNP                      Number=Sing             2   nsubj &lt;NA&gt;
2  VERB  VBD Mood=Ind|Tense=Past|VerbForm=Fin             0    root &lt;NA&gt;
3 PROPN  NNP                      Number=Sing             2    iobj &lt;NA&gt;
4   DET   DT        Definite=Ind|PronType=Art             5     det &lt;NA&gt;
5  NOUN   NN                      Number=Sing             2     obj &lt;NA&gt;
6 PUNCT    .                             &lt;NA&gt;             2   punct &lt;NA&gt;
             misc
1            &lt;NA&gt;
2            &lt;NA&gt;
3            &lt;NA&gt;
4            &lt;NA&gt;
5   SpaceAfter=No
6 SpacesAfter=\\n</code></pre>
</div>
</div>
<p>We now generate the plot.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co"># generate dependency plot</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>dplot <span class="ot">&lt;-</span> textplot<span class="sc">::</span><span class="fu">textplot_dependencyparser</span>(sent, <span class="at">size =</span> <span class="dv">3</span>)</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a><span class="co"># show plot</span></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>dplot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="textanalysis_files/figure-html/udi5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Dependency parsing proves invaluable for a range of applications, including analyzing the relationships within sentences and shedding light on the roles of different elements. For instance, it helps distinguish between the agent and the patient in actions like crimes or other activities. This parsing technique enables a deeper understanding of the underlying grammatical and semantic structure of sentences, making it a valuable tool for linguistic analysis, information extraction, and natural language understanding.</p>
</section>
<section id="citation-session-info" class="level1 unnumbered">
<h1 class="unnumbered">Citation &amp; Session Info</h1>
<p>Schweinberger, Martin. 2023. <em>Practical Overview of Selected Text Analytics Methods</em>. Brisbane: The Language Technology and Data Analysis Laboratory (LADAL). url: https://ladal.edu.au/textanalysis.html (Version 2023.05.31).</p>
<pre><code>@manual{schweinberger2023ta,
  author = {Schweinberger, Martin},
  title = {Practical Overview of Selected Text Analytics Methods},
  note = {https://ladal.edu.au/textanalysis.html},
  year = {2023},
  organization = {The Language Technology and Data Analysis Laboratory (LADAL)},
  address = {Brisbane},
  edition = {2023.05.31}
}</code></pre>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sessionInfo</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>R version 4.4.1 (2024-06-14)
Platform: aarch64-apple-darwin20
Running under: macOS Sonoma 14.6.1

Matrix products: default
BLAS:   /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/lib/libRblas.0.dylib 
LAPACK: /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.12.0

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

time zone: Australia/Brisbane
tzcode source: internal

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
 [1] tidyr_1.3.1               ggraph_2.2.1             
 [3] quanteda.textplots_0.95   quanteda.textstats_0.97.2
 [5] wordcloud2_0.2.1          tidytext_0.4.2           
 [7] udpipe_0.8.11             tm_0.7-14                
 [9] NLP_0.3-0                 quanteda_4.1.0           
[11] flextable_0.9.7           ggplot2_3.5.1            
[13] stringr_1.5.1             dplyr_1.1.4              

loaded via a namespace (and not attached):
 [1] tidyselect_1.2.1        viridisLite_0.4.2       farver_2.1.2           
 [4] viridis_0.6.5           fastmap_1.2.0           tweenr_2.0.3           
 [7] fontquiver_0.2.1        janeaustenr_1.0.0       digest_0.6.37          
[10] lifecycle_1.0.4         tokenizers_0.3.0        magrittr_2.0.3         
[13] compiler_4.4.1          rlang_1.1.4             tools_4.4.1            
[16] igraph_2.1.1            utf8_1.2.4              sna_2.8                
[19] data.table_1.16.2       knitr_1.48              labeling_0.4.3         
[22] askpass_1.2.1           stopwords_2.3           graphlayouts_1.2.0     
[25] htmlwidgets_1.6.4       here_1.0.1              xml2_1.3.6             
[28] klippy_0.0.0.9500       withr_3.0.2             purrr_1.0.2            
[31] textplot_0.2.2          grid_4.4.1              polyclip_1.10-7        
[34] fansi_1.0.6             gdtools_0.4.0           colorspace_2.1-1       
[37] scales_1.3.0            MASS_7.3-61             cli_3.6.3              
[40] rmarkdown_2.28          ragg_1.3.3              generics_0.1.3         
[43] rstudioapi_0.17.1       cachem_1.1.0            ggforce_0.4.2          
[46] network_1.18.2          splines_4.4.1           assertthat_0.2.1       
[49] parallel_4.4.1          vctrs_0.6.5             Matrix_1.7-1           
[52] jsonlite_1.8.9          slam_0.1-54             fontBitstreamVera_0.1.1
[55] ggrepel_0.9.6           systemfonts_1.1.0       glue_1.8.0             
[58] statnet.common_4.10.0   codetools_0.2-20        stringi_1.8.4          
[61] gtable_0.3.6            munsell_0.5.1           tibble_3.2.1           
[64] pillar_1.9.0            htmltools_0.5.8.1       openssl_2.2.2          
[67] R6_2.5.1                textshaping_0.4.0       rprojroot_2.0.4        
[70] tidygraph_1.3.1         evaluate_1.0.1          lattice_0.22-6         
[73] SnowballC_0.7.1         memoise_2.0.1           fontLiberation_0.1.0   
[76] class_7.3-22            Rcpp_1.0.13             zip_2.3.1              
[79] uuid_1.2-1              fastmatch_1.1-4         coda_0.19-4.1          
[82] nlme_3.1-166            gridExtra_2.3           nsyllable_1.0.1        
[85] mgcv_1.9-1              officer_0.6.7           xfun_0.49              
[88] pkgconfig_2.0.3        </code></pre>
</div>
</div>
<p><a href="#introduction">Back to top</a></p>
<p><a href="https://ladal.edu.au">Back to HOME</a></p>
</section>
<section id="references" class="level1 unnumbered">




</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-bernard1998text" class="csl-entry" role="listitem">
Bernard, H Russell, and Gery Ryan. <span>“Text Analysis.”</span> <em>Handbook of Methods in Cultural Anthropology</em>.
</div>
<div id="ref-kabanoff1997introduction" class="csl-entry" role="listitem">
Kabanoff, Boris. <span>“Introduction: Computers Can Read as Well as Count: Computer-Aided Text Analysis in Organizational Research.”</span> <em>Journal of Organizational Behavior</em>, 507–11.
</div>
<div id="ref-lindquist2009corpus" class="csl-entry" role="listitem">
Lindquist, Hans. <em>Corpus Linguistics and the Description of English</em>. Edinburgh: Edinburgh University Press.
</div>
<div id="ref-popping2000computer" class="csl-entry" role="listitem">
Popping, Roel. <em>Computer-Assisted Text Analysis</em>. Sage.
</div>
</div></section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>If you want to render the R Notebook on your machine, i.e.&nbsp;knitting the document to html or a pdf, you need to make sure that you have R and RStudio installed and you also need to download the <a href="https://ladal.edu.au/content/bibtex.bib"><strong>bibliography file</strong></a> and store it in the same folder where you store the Rmd file.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




<script src="../../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>